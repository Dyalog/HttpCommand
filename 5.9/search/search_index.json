{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Overview","text":"<p><code>HttpCommand</code> is a utility is designed to make it easy for the APL user to send requests to and receive responses from HTTP servers like web servers and web services.</p> <p>Note</p> <p>While <code>HttpCommand</code> itself is <code>\u2395IO</code> and <code>\u2395ML</code> insensitive, the examples in this documentation assume an environment of <code>(\u2395IO \u2395ML)\u21901</code>.</p>"},{"location":"#loading-httpcommand","title":"Loading <code>HttpCommand</code>","text":"<p><code>HttpCommand</code> is included with your Dyalog APL installation. To bring it into your workspace:</p>"},{"location":"#dyalog-apl-version-190-and-later","title":"Dyalog APL Version 19.0 and later","text":"<pre><code>      ]import {ns} HttpCommand\n</code></pre> <p>or, under program control, do:</p> <pre><code>      \u2395SE.Link.Import {ns} 'HttpCommand' \n</code></pre> <p>where <code>{ns}</code> is an optional namespace name or reference.</p>"},{"location":"#dyalog-apl-versions-before-190","title":"Dyalog APL versions before 19.0","text":"<pre><code>      ]load HttpCommand {-target=ns}\n</code></pre> <p>or, under program control, do:</p> <pre><code>      \u2395SE.SALT.Load 'HttpCommand {-target=ns}' \n</code></pre> <p><code>{-target=ns}</code> optionally specifies the namespace in which to load <code>HttpCommand</code>. <code>ns</code> is the namespace name. </p>"},{"location":"#upgrading-to-the-latest-httpcommand","title":"Upgrading to the Latest <code>HttpCommand</code>","text":"<p>This documentation describes the latest version of <code>HttpCommand</code>, which may be more recent than the version of <code>HttpCommand</code> that came pre-installed with your Dyalog APL. Use <code>HttpCommand.Upgrade</code> upgrade your in-workspace copy of <code>HttpCommand</code>. Note that this only upgrades your in-workspace copy of <code>HttpCommand</code> and does not overwrite the version included in your Dyalog installation.</p> <p>If <code>HttpCommand.Version</code> reports a version earlier than 4.0.14, <code>HttpCommand.Upgrade</code> will need to be run twice to upgrade to the latest version.</p> <p><code>HttpCommand.Upgrade</code> does not work with Classic interpreters. See <code>Upgrade</code> for more information.</p> <p>For example, <code>HttpCommand</code> version 3.4 may be found in Dyalog version 18.0.</p> <pre><code>      ]load HttpCommand\n#.HttpCommand\n      HttpCommand.Version\n HttpCommand  3.4  2021-05-28 \n      HttpCommand.Upgrade\n0   \n      HttpCommand.Version  \u235d verify that we upgraded to v4.0.14\n HttpCommand  4.0.14  2022-09-04 \n      HttpCommand.Upgrade  \u235d now upgrade to v5\n0  Upgraded to HttpCommand 5.6.0 2024-03-17 from HttpCommand 4.0.14 2022-09-04 \n</code></pre> <p>Note</p> <p>When deploying <code>HttpCommand</code> as a part of your application, you should save a copy with your application to ensure you know precisely what version of <code>HttpCommand</code> is being used. You don't want to dynamically load or upgrade <code>HttpCommand</code> in your application.</p>"},{"location":"#httpcommand-is-available-as-a-tatin-package","title":"<code>HttpCommand</code> is Available as a Tatin Package","text":"<p>Tatin is a package manager for APL-based packages. <code>HttpCommand</code> is available as a Tatin package. If you have the Tatin client installed, you can load <code>HttpCommand</code> using:</p> <pre><code>      ]TATIN.LoadPackages HttpCommand\n</code></pre> <p>The Tatin client will be included in your Dyalog installation beginning with Dyalog version 19.0. For earlier versions of Dyalog, refer to the Tatin website for instructions on installing the Tatin client.</p> <p>Load Once, Use Often</p> <p>It is strongly recommended that you save your own copy of <code>HttpCommand</code> in your application rather than dynamically loading or upgrading it at runtime. In particular, it is bad practice to repeated load <code>HttpCommand</code> as this may cause Conga to  reinitialize each time <code>HttpCommand</code> is loaded and may interfere with other components of your application that also use Conga. If <code>HttpCommand</code> is being used within your application (as opposed to ad hoc usage in your APL session) it is recommended that all Conga-using components refer to the same Conga namespace. See HttpCommand and Conga</p>"},{"location":"#typical-usage-patterns","title":"Typical Usage Patterns","text":"<p><code>HttpCommand</code> is implemented as a Dyalog class and its typical usage pattern is:</p> <ol> <li>Create an instance of the <code>HttpCommand</code> class using the function <code>HttpCommand.New</code> <code>instance \u2190 HttpCommand.New ''</code></li> <li>Set fields (settings) appropriate to describe the request</li> <li>Send the request</li> <li>Examine the response result</li> </ol> <p>For example:</p> <pre><code>      cmd\u2190HttpCommand.New ''   \u235d create an instance\n      cmd.Command\u2190'get'        \u235d specify the HTTP method \n      cmd.URL\u2190'www.dyalog.com' \u235d specify the URL\n\n      \u22a2response\u2190cmd.Run        \u235d send the request\n[rc: 0 | msg: \"\" | HTTP Status: 200 \"OK\" | \u2374Data: 21060]\n\n      50\u2191response.Data         \u235d examine the response payload\n&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Trans      \n</code></pre> <p>The result of <code>HttpCommand.Run</code> is a namespace containing information about the response from server.  The display format for the namespace gives some useful information about the success of the request.  The server's response data, also known as the content or payload, is found in the <code>Data</code> element of the namespace.</p> <p><code>HttpCommand</code> has several \"shortcut\" shared methods to perform common operations. For instance, the above example can be accomplished by using <code>HttpCommand.Get</code>.</p> <pre><code>      50\u2191(HttpCommand.Get 'www.dyalog.com').Data\n&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Trans      \n</code></pre>"},{"location":"#philosophy","title":"Philosophy","text":"<p><code>HttpCommand</code> has been designed to be easy to integrate into your application by having a small footprint (it's a single class) and making almost no assumptions about the environment in which you'll use it. <code>HttpComand</code> attempts to use sensible default values for request settings while still giving you full control should you need it.  <code>HttpCommand</code>'s feature set has expanded over time as new use cases and feature requests have arisen. We expect this trend to continue and encourage you to submit feature requests or report any bugs via GitHub.</p> <p>This documentation should provide sufficient information to use <code>HttpCommand</code> to make most HTTP requests. In some cases, some further knowledge of HTTP may be necessary. This documentation does not attempt to be an exhaustive HTTP reference.</p>"},{"location":"#dyalog-classes","title":"Dyalog Classes","text":"<p><code>HttpCommand</code> is implemented as a Dyalog class. While it's not necessary to have an in-depth knowledge of Dyalog classes, it is useful to understand a couple basic concepts. A class can have \"shared\" methods and settings (known as fields) and \"instance\" methods and settings. For instance, the \"shortcut\" methods like <code>Get</code>, <code>GetJSON</code>, <code>Do</code> and <code>New</code> are shared methods whereas the instance methods like <code>Show</code> and <code>Run</code> are only available in an <code>HttpCommand</code> instance. Similarly, <code>Debug</code> and <code>CongaPath</code> are shared settings whereas <code>URL</code> and <code>Command</code> are instance settings. We will attempt to make the distinction between shared and instance references throughout this documentation.</p>"},{"location":"#use-of-conga","title":"Use of Conga","text":"<p><code>HttpCommand</code> uses Conga, Dyalog's TCP/IP utility library, for communication. Conga is installed as a part of Dyalog APL. By default <code>HttpCommand</code> will attempt to locate and use the installed Conga.  Conga consists of two parts:</p> <ul> <li>Two shared library files that are specific to the operating system and implement the low-level communications and security interfaces.</li> <li>An APL object that implements a cross-platform interface to the shared libraries.  The object will be either the <code>DRC</code> namespace or an instance of the <code>Conga.LIB</code> class. For the purposes of this document we will refer to this object as the Conga API.</li> </ul> <p>See HttpCommand and Conga for more information on how <code>HttpCommand</code> interacts with Conga.  See Integrating HttpCommand for more information on how to package Conga and <code>HttpCommand</code> in a distributed application. </p> <p>If your application has other components that also use Conga, we recommend that you use the \"multiple roots\" feature of the <code>Conga</code> namespace:</p> <ul> <li>Copy the <code>Conga</code> namespace from the <code>conga</code> workspace. <code>'Conga' #.\u2395CY 'conga'</code></li> <li>Set <code>HttpCommand.CongaRef</code> setting to refer to the <code>Conga</code> namespace. <code>HttpCommand.CongaRef\u2190#.Conga</code> </li> <li>Similarly configure the other Conga-using components to refer to the <code>Conga</code> namespace.</li> <li>Now each component can create their own Conga \"root\" using <code>Conga.Init</code>.<code>HttpCommand</code> does this for you automatically.</li> </ul>"},{"location":"#further-reading","title":"Further Reading","text":"<ul> <li>This documentation does not attempt to be an in-depth examination of either Conga or the HTTP protocol. For more information on Conga, see the Conga User Guide</li> <li>There are many resources available to learn about HTTP; a good one may be found on the Mozilla Developer Network</li> <li>For more information on Dyalog classes, please refer to the Object Oriented Programming chapter in the Dyalog Programming Reference Guide. </li> </ul>"},{"location":"LICENSE/","title":"License","text":"<p>MIT License</p> <p>Copyright (c) 2021 Dyalog</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>"},{"location":"conga-settings/","title":"Conga-related Settings","text":"<p>In general, you will not need to set any of the Conga-related settings since the <code>HttpCommand</code>'s defaults will suffice for almost all requests. For more information on Conga, please refer to the Conga User Guide.</p>"},{"location":"conga-settings/#instance-settings","title":"Instance Settings","text":""},{"location":"conga-settings/#buffersize","title":"<code>BufferSize</code>","text":"Description The maximum number of bytes that <code>HttpCommand</code> will accept for the HTTP status and headers received from the host. Default <code>200000</code> Example(s) <code>h.BufferSize\u219050000 \u235d set a lower threshold</code> Details By default, when using Conga's HTTP mode, as <code>HttpCommand</code> does, <code>BufferSize</code> applies only to the data received by the <code>HTTPHeader</code> event. The intent is to protect against a maliciously large response from the host.  If the data received by the <code>HTTPHeader</code> event exceeds <code>BufferSize</code>, <code>HttpCommand</code> will exit with a return code of 1135."},{"location":"conga-settings/#waittime","title":"<code>WaitTime</code>","text":"Description The number of milliseconds that Conga will wait (listen) for a response before timing out. Default <code>5000</code> Example(s) <code>h.WaitTime\u219010000 \u235d wait 10 seconds</code> Details This setting applies only to the time Conga will wait internally for a response. There is generally no reason to modify this setting; if your request is timing out, you should set <code>Timeout</code> setting appropriately.  See Timeout and WaitTime for more information on the relationship between the <code>Timeout</code> and <code>WaitTime</code> settings."},{"location":"conga-settings/#cert","title":"<code>Cert</code>","text":"Description The certificate specification to be used for secure communications over SSL/TLS. If set, <code>Cert</code> can be either:<ul><li>an instance of the Conga <code>X509Cert</code> class</li><li>a 2-element vector of character vectors representing the full path names to a public certificate file and a private key file. This is a shortcut that can be used instead of specifying both the <code>PrivateKeyFile</code> and <code>PublicCertFile</code> settings.</li></ul> Default <code>''</code> Example(s) <code>h.Init \u235d initialize the local instance of Conga</code><code>h.Cert\u2190 1\u2283h.LDRC.X509Cert.ReadCertUrls \u235d use first MS certificate store cert</code><code>h.Cert\u2190 'path-to-certfile.pem' 'path-to-keyfile.pem'</code> Details In most cases when using HTTPS for secure communications, the anonymous certificate that <code>HttpCommand</code> will create for you will suffice and you need not set <code>Cert</code>. It should only be necessary to assign <code>Cert</code> in those cases where you need to specify a certificate for authentication purposes.Note: <code>Cert</code> is also a positional argument for the shortcut methods (<code>Get</code>, <code>GetJSON</code>, <code>Do</code>, and <code>New</code>) as well as the <code>HttpCommand</code> constructor. <code>Cert</code> appears after the <code>Headers</code> positional argument.  For example:<code>h\u2190 HttpCommand.Get 'someurl.com' '' '' ('certfile.pem' 'keyfile.pem')</code>"},{"location":"conga-settings/#publiccertfile","title":"<code>PublicCertFile</code>","text":"Description <code>PublicCertFile</code> is a character vector containing the full path to a public certificate file when using HTTPS for secure communications. <code>PublicCertFile</code> is used in conjunction with <code>PrivateKeyFile</code> Default <code>''</code> Example(s) <code>h.PublicCertFile\u2190'path-to-certfile.pem'</code> Details The use of <code>Cert</code> and <code>PublicCertFile</code>/<code>PrivateKeyFile</code> are mutually exclusive and you should only one or the other. If both <code>Cert</code> and <code>PublicCertFile</code>/<code>PrivateKeyFile</code> are specified, <code>Cert</code> takes priority."},{"location":"conga-settings/#privatekeyfile","title":"<code>PrivateKeyFile</code>","text":"Description <code>PrivateKeyFile</code> is a character vector containing the full path to a private key file when using HTTPS for secure communications. <code>PrivateKeyFile</code> is used in conjunction with <code>PublicCertFile</code> Default <code>''</code> Example(s) <code>h.PrivateKeyFile\u2190'path-to-keyfile.pem'</code> Details The use of <code>Cert</code> and <code>PublicCertFile</code>/<code>PrivateKeyFile</code> are mutually exclusive and you should only one or the other. If both <code>Cert</code> and <code>PublicCertFile</code>/<code>PrivateKeyFile</code> are specified, <code>Cert</code> takes priority."},{"location":"conga-settings/#sslflags","title":"<code>SSLFlags</code>","text":"Description <code>SSLFlags</code> is used when using HTTPS for secure communications. It is a part of the certificate checking process and determines whether to connect to a server that does not have a valid certificate. Default <code>32</code> which means accept the server certificate without checking it Example(s) <code>h.SSLFlags\u21908</code> Details For more information on the interpretation of <code>SSLFlag</code> values, see Conga User Guide Appendix C.Note: <code>SSLFlags</code> is also a positional argument for the shortcut methods (<code>Get</code>, <code>GetJSON</code>, <code>Do</code>, and <code>New</code>) as well as the <code>HttpCommand</code> constructor. <code>SSLFlags</code> appears after the <code>Cert</code> positional argument."},{"location":"conga-settings/#priority","title":"<code>Priority</code>","text":"Description The GnuTLS priority string that specifies the TLS session's handshake algorithms. Default <code>'NORMAL:!CTYPE-OPENPGP'</code> Example(s) <code>h.Priority\u2190'SECURE128:-VERS-TLS1.0'</code> Details In general, you would use a different value than the default only in rare and very specific circumstances. See GnuTLS Priority Strings for more information.Note: <code>Priority</code> is also a positional argument for the shortcut methods (<code>Get</code>, <code>GetJSON</code>, <code>Do</code>, and <code>New</code>) as well as the <code>HttpCommand</code> constructor. <code>Priority</code> appears after the <code>SSLFlags</code> positional argument."},{"location":"conga-settings/#shared-settings","title":"Shared Settings","text":"<p>Shared settings are set in the <code>HttpCommand</code> class and are used by all instances of <code>HttpCommand</code>.</p>"},{"location":"conga-settings/#congapath","title":"<code>CongaPath</code>","text":"Description The path to Conga resources Default <code>''</code> Example(s) <code>HttpCommand.CongaPath\u2190'/myapp/dlls/'</code> Details This setting is intended to be used when Conga is not located in the Dyalog installation folder or the current folder, as might be the case when deploying <code>HttpCommand</code> as a part of a runtime application. <code>CongaPath</code> is used for two purposes:<ul><li>If the <code>Conga</code> or <code>DRC</code> namespace is not found in the <code>HttpCommand</code>'s parent namespace or in the root namespace (<code>#</code>), then <code>CongaPath</code> should be the path to the folder containing the <code>conga</code> workspace from which <code>HttpCommand</code> will copy the <code>Conga</code> namespace.</li><li><code>CongaPath</code> should be the path to the folder containing the Conga shared libraries</li></ul>See HttpCommand and Conga and/or Integrating HttpCommand for more information."},{"location":"conga-settings/#congaref","title":"<code>CongaRef</code>","text":"Description A reference to the <code>Conga</code> or <code>DRC</code> namespace or to an initialized instance of the <code>Conga.LIB</code> class. Default <code>''</code> Example(s) HttpCommand.CongaRef\u2190 #.Utils.Conga Details This setting is intended to be used when your application has other components that use Conga. To avoid having multiple copies of Conga, you can set <code>CongaRef</code> to point to an existing copy of the Conga API.See HttpCommand and Conga and/or Integrating HttpCommand for more information."},{"location":"conga-settings/#ldrc","title":"<code>LDRC</code>","text":"Description Once <code>HttpCommand</code> has been initialized by processing a request, <code>LDRC</code> is a reference to the Conga API that <code>HttpCommand</code> is using. Default N/A Example(s) <code>HttpCommand.Get 'dyalog.com' \u235d run a request</code> <code>HttpCommand.LDRC.Version</code><code>3 4 1612</code> Details <code>LDRC</code> should be treated as a read-only setting. It provides a means to access the Conga API which may be helpful for debugging and informational purposes."},{"location":"conga-settings/#congaversion","title":"<code>CongaVersion</code>","text":"Description Once <code>HttpCommand</code> has been initialized by processing a request, <code>CongaVersion</code> is the version number, in major.minor format, of the Conga API that <code>HttpCommand</code> is using. Default N/A Example(s) <code>HttpCommand.Get 'dyalog.com' \u235d run a request</code> <code>HttpCommand.CongaVersion</code><code>3.4</code> Details <code>CongaVersion</code> should be treated as a read-only setting. It provides information which may be helpful for debugging and informational purposes."},{"location":"conga/","title":"HttpCommand and Conga","text":"<p><code>HttpCommand</code> uses Conga, Dyalog's TCP/IP utility library, for communications. <code>HttpCommand</code> requires Conga version 3.0 or later. Conga consists of two elements:</p> <ul> <li>Two shared library files whose names begin with \"conga\" and are found in the Dyalog installation folder. The names of the files varies based on the platform they are running on and the specific version of Conga; for instance <code>conga34_64.dll</code> and <code>conga34ssl64.dll</code> are the shared library files for Conga version 3.4 for the 64-bit version of Dyalog for Windows.</li> <li>An APL-based API to communicate with the shared libraries. There are two versions of the API both of which are available in the <code>conga</code> workspace.<ul> <li>A namespace named <code>Conga</code> which was introduced with Conga version 3.0 and implements behavior that makes it easier to run multiple Conga-based utilities in the same workspace. <code>Conga</code> is the recommended API version to use.</li> <li>A namespace named <code>DRC</code> which is retained for backward-compatibility with applications which use earlier versions of Conga. <code>DRC</code> should only be used in an application where backward compatibility is necessary.</li> </ul> </li> </ul> <p>The Conga API looks for a matching version of the shared libraries; as such version of the API and the shared libraries must be the same. For more information on Conga please refer to the Conga User Guide.</p>"},{"location":"conga/#default-behavior","title":"Default Behavior","text":"<p>When first run, <code>HttpCommand</code> will attempt find or copy the Conga API and then initialize it. <code>HttpCommand</code> will attempt to use the <code>Conga</code> version of the API in preference to the <code>DRC</code> version. In general, all of this is transparent to the user.</p> <ul> <li>Look in the current workspace for the Conga API:<ul> <li>First look in the namespace where <code>HttpCommand</code> resides for a namespace named either <code>Conga</code> or <code>DRC</code>, in that order.</li> <li>Failing that, look in the root namespace <code>#</code> for a namespace named either <code>Conga</code> or <code>DRC</code>, in that order.</li> </ul> </li> <li>If neither version of the API is found in the current workspace, <code>HttpCommand</code> will attempt to copy the API (first <code>Conga</code> then <code>DRC</code>) from the <code>conga</code> workspace. The API is copied into the <code>HttpCommand</code> class which means there will be no additional footprint in workspace. <code>HttpCommand</code> will attempt to copy the API as follows:<ul> <li>If the <code>DYALOG</code> environment variable exists, use its folder. Otherwise use the folder from the command line used to start Dyalog.</li> <li>If that fails, then attempt to copy from the \"current\" folder as determined by <code>\u22831 \u2395NPARTS ''</code></li> </ul> </li> <li>If the API was found or successfully copied, <code>HttpCommand</code> will initialize Conga as follows:<ul> <li>If the <code>Conga</code> version of the API is used, <code>HttpCommand</code> will initialize it with a root name of <code>'HttpCommand'</code>.</li> <li>If the <code>DRC</code> version of the API is used, <code>HttpCommand</code> will simply initialize it. As <code>DRC</code> does not support multiple roots, care should be taken if other Conga-using utilities also reside in the workspace.</li> </ul> </li> <li>If the API was successfully initialized, a reference to the API root can be found in <code>HttpCommand.LDRC</code>.</li> </ul>"},{"location":"conga/#overriding-default-locations","title":"Overriding Default Locations","text":"<p>There are two methods to tell <code>HttpCommand</code>'s default behavior, both of which involve setting a shared public field in the <code>HttpCommand</code> class.</p> <ul> <li>If you have the <code>Conga</code> namespace in your workspace in other than default locations the <code>HttpCommand</code> will search, <code>HttpCommand.CongaRef</code> can be used to specify its location. <code>CongaRef</code> can be an actual reference to the namespace or a character array representing the location. For instance: <code>HttpCommand.CongaRef\u2190#.Utils.Conga</code> or <code>HttpCommand.CongaRef\u2190'#.Utils.Conga'</code> This can be useful when integrating <code>HttpCommand</code> into an application that also uses Conga.</li> <li><code>HttpCommand.CongaPath</code> can be used to specify the path to the shared library files and optionally the conga workspace. This can be useful when bundling <code>HttpCommand</code> in a distributed application. For instance: <code>HttpCommand.CongaPath\u2190(\u22831 \u2395NPARTS ''),'/conga/'</code> would tell <code>HttpCommand</code> to find the shared libraries in the <code>/conga/</code> subfolder of the current folder. See Integrating <code>HttpCommand</code> for more information.</li> </ul>"},{"location":"conga/#using-other-versions-of-conga","title":"Using Other Versions of Conga","text":"<p>If you need to use a version of Conga other than the one in the Dyalog installation folder, there are two ways to accomplish this:</p> <ul> <li>Put the shared libraries and the <code>conga</code> workspace in a folder and set <code>CongaPath</code> to point to that folder.</li> <li>Put the <code>Conga</code> namespace in your workspace (pointing <code>CongaRef</code> to it if necesssary) and the shared libraries in a folder set <code>CongaPath</code> to point to that folder.</li> </ul>"},{"location":"conga/#timeout-and-waittime","title":"Timeout and WaitTime","text":"<p>The operational setting Timeout should not be confused with the Conga setting WaitTime . Internally, after sending the request to the host, <code>HttpCommand</code> sits in a Conga Wait loop, listening for a response. <code>WaitTime</code> is the number of milliseconds that Conga will wait before timing out. When this happens, <code>HttpCommand</code> checks if the request itself has timed out based on the setting of <code>Timeout</code>. If it has, then <code>HttpCommand</code> will stop with a return code of 100 indicating the timeout. If the request has not timed out, then <code>HttpCommand</code> will perform another  iteration of the Conga Wait loop.   </p> <p>It is generally unnecessary to adjust the <code>WaitTime</code> setting. If your request is timing out, increase the <code>Timeout</code> setting.</p> <p>Note that <code>Timeout</code> is in seconds and <code>WaitTime</code> is in milliseconds. </p>"},{"location":"content-types/","title":"Request Content Types","text":"<p>If your HTTP request has a payload and you do not specify the content type, <code>HttpCommand</code> will attempt to determine whether to use a content type of <code>'application/json'</code> or <code>'application/x-www-form-urlencoded'</code>.</p> <p>This may be fine for interactively tinkering in the APL session. But when running <code>HttpCommand</code> under program control you should explicitly specify the content type for the payload by either setting <code>ContentType</code> or adding a <code>content-type</code> header. </p> <p>The exception to this is when using <code>GetJSON</code> which is specifically intended to interact with JSON-based web services and will use a default content type of <code>application/json</code>. </p>"},{"location":"content-types/#special-treatment-of-content-type-applicationjson","title":"Special Treatment of Content Type <code>application/json</code>","text":"<p>If you specify a content type of <code>'application/json'</code>, <code>HttpCommand</code> will automatically convert a non-JSON <code>Params</code> setting to JSON. In the rare case where <code>Params</code> is an APL character vector that happens to represent valid JSON, you should convert it yourself using <code>1 \u2395JSON</code>.</p>"},{"location":"content-types/#special-treatment-of-content-type-multipartform-data","title":"Special Treatment of Content Type <code>multipart/form-data</code>","text":"<p>Content type <code>multipart/form-data</code> is commonly used to transfer files to a server or to send multiple types of content in the request payload. If you specify a content type of <code>'multipart/form-data'</code>:</p> <ul> <li><code>Params</code> must be a namespace with named elements. The names correspond to what would be the form &lt;input&gt; names were this request being sent from a browser.</li> <li>Each element in <code>Params</code> consists of up to 3 elements:<ul> <li><code>[1]</code> content - the data for the element, if sending a file this is the file name (see the section below) </li> <li><code>[2]</code> type - the MIME content-type type for the element</li> <li><code>[3]</code> filename - if content is to be saved as a file, this is the filename for the content</li> </ul> </li> <li>To send a file, prefix the file name with either:<ul> <li><code>@</code> to upload the file's content and its name</li> <li><code>&lt;</code> to upload just the file's content</li> </ul> </li> <li>If you do not specify a content type for the file, <code>HttpCommand</code> will use a content type of <code>'text/plain'</code> if the extension of the file is .txt, otherwise it will use a content type of <code>'application/octet-stream'</code>. </li> </ul> <p>In the example below: </p> <ul> <li>Extra newlines have been removed for compactness.</li> <li>The file <code>/tmp/foo.txt</code> contains <code>Hello World</code>.</li> <li>We create 4 parts to be sent with the request:<ul> <li>a JSON array (with content type 'application/json')</li> <li>a named file - both the content and file name will be sent</li> <li>some in-workspace content to be saved as a file named 'data.txt'</li> <li>a simple string</li> <li>an unnamed file - only the content will be sent</li> </ul> </li> </ul> <pre><code>      h\u2190HttpCommand.New 'post' 'someurl.com'\n      p\u2190\u2395NS ''                     \u235d create a namespace\n      p.json\u2190'[1,2,3]' 'application/json' \u235d value and content type\n      p.namedfile\u2190'@/tmp/foo.txt'   \u235d @ = include the file name\n      p.saveasfile\u2190'this is the content' 'text/plain' 'data.txt' \u235d save content as a file\n      p.string\u2190'/tmp/foo.txt'       \u235d just a value\n      p.unnamedfile\u2190'&lt;/tmp/foo.txt' \u235d &lt; = do not include the file name\n      h.Params\u2190p                    \u235d assign the request Params\n      h.ContentType\u2190'multipart/form-data' \u235d\n      h.Show\nPOST / HTTP/1.1\nHost: someurl.com\nUser-Agent: Dyalog-HttpCommand/5.9.1\nAccept: */*\nAccept-Encoding: gzip, deflate\nContent-Type: multipart/form-data; boundary=YqXdULkJhPcuCBBikV8ffM8zS7uAdFoME4jNpDDs7SxVw9mM4q\nContent-Length: 806\n\n--YqXdULkJhPcuCBBikV8ffM8zS7uAdFoME4jNpDDs7SxVw9mM4q\nContent-Disposition: form-data; name=\"json\"\nContent-Type: application/json\n[1,2,3]\n\n--YqXdULkJhPcuCBBikV8ffM8zS7uAdFoME4jNpDDs7SxVw9mM4q\nContent-Disposition: form-data; name=\"namedfile\"; filename=\"foo.txt\"\nContent-Type: text/plain\nthis is a test\n\n--YqXdULkJhPcuCBBikV8ffM8zS7uAdFoME4jNpDDs7SxVw9mM4q\nContent-Disposition: form-data; name=\"saveasfile\"; filename=\"data.txt\"\nContent-Type: text/plain\nthis is the content\n\n--YqXdULkJhPcuCBBikV8ffM8zS7uAdFoME4jNpDDs7SxVw9mM4q\nContent-Disposition: form-data; name=\"string\"\n/tmp/foo.txt\n\n--YqXdULkJhPcuCBBikV8ffM8zS7uAdFoME4jNpDDs7SxVw9mM4q\nContent-Disposition: form-data; name=\"unnamedfile\"\nContent-Type: text/plain\nthis is a test\n--YqXdULkJhPcuCBBikV8ffM8zS7uAdFoME4jNpDDs7SxVw9mM4q--\n</code></pre> <pre><code>      h\u2190HttpCommand.New 'post' 'someurl.com'\n      p\u2190\u2395NS ''                     \u235d create a namespace\n      p.string\u2190'/tmp/foo.txt'       \u235d just a value\n      p.namedfile\u2190'@/tmp/foo.txt'   \u235d @ = include the file name\n      p.unnamedfile\u2190'&lt;/tmp/foo.txt' \u235d &lt; = do not include the file name\n      p.json\u2190'[1,2,3]' 'application/json' \u235d value and content type\n      p.saveasfile\u2190'this is the content' 'text/plain' 'data.txt'\n      h.Params\u2190p                    \u235d assign the request Params\n      h.ContentType\u2190'multipart/form-data' \u235d \n      h.Show\nPOST / HTTP/1.1\nHost: someurl.com                                                                                              \nUser-Agent: Dyalog-HttpCommand/5.6.0\nAccept: */*\nAccept-Encoding: gzip, deflate\nContent-Type: multipart/form-data; boundary=rgt7DIuxBqLFsveaLM0fBcR7gdvahhUfbtmuQ9UMEZvv9kDVrd\nContent-Length: 631\n\n--rgt7DIuxBqLFsveaLM0fBcR7gdvahhUfbtmuQ9UMEZvv9kDVrd\nContent-Disposition: form-data; name=\"json\"\nContent-Type: application/json                                                                                              \n[1,2,3]\n\n--rgt7DIuxBqLFsveaLM0fBcR7gdvahhUfbtmuQ9UMEZvv9kDVrd\nContent-Disposition: form-data; name=\"namedfile\"; filename=\"foo.txt\"\nContent-Type: text/plain\nHello World\n\n--rgt7DIuxBqLFsveaLM0fBcR7gdvahhUfbtmuQ9UMEZvv9kDVrd\nContent-Disposition: form-data; name=\"string\"                                                 \n/tmp/foo.txt\n\n--rgt7DIuxBqLFsveaLM0fBcR7gdvahhUfbtmuQ9UMEZvv9kDVrd\nContent-Disposition: form-data; name=\"unnamedfile\"\nContent-Type: text/plain\nHello World\n\n--rgt7DIuxBqLFsveaLM0fBcR7gdvahhUfbtmuQ9UMEZvv9kDVrd--\n</code></pre>"},{"location":"encode-methods/","title":"Encode/Decode Methods","text":""},{"location":"encode-methods/#base64-encoding","title":"Base64 Encoding","text":"<p>Base64 is a binary-to-text encoding scheme that is used to transmit binary data over channels the only reliably support text content. Among Base64's uses are:</p> <ul> <li>Embed images or other binary assets in HTML files.</li> <li>Encode user credentials for HTTP Basic Authentication  </li> </ul>"},{"location":"encode-methods/#base64decode","title":"<code>Base64Decode</code>","text":"<p>Decode a Base64-encoded string or single-byte integer vector.</p> Syntax <code>out\u2190{cpo} HttpCommand.Base64Decode b64</code> <code>b64</code> A character vector of Base64-encoded data. <code>cpo</code> (optional) cpo stands for \"code points only\".  It can be any value, its mere existence is all that is necessary. You would use it in the case where you do not want <code>Base64Decode</code> to perform a UTF-8 conversion on the result. In almost all use cases, you can ignore this argument. <code>out</code> A character vector representing the decoded base-64 right argument. Example(s) <pre>      HttpCommand.Base64Decode 'RHlhbG9nIOKNuuKNtOKMig=='Dyalog \u237a\u2374\u230a</pre>"},{"location":"encode-methods/#base64encode","title":"<code>Base64Encode</code>","text":"<p>Base64 encode a string or integer vector.</p> Syntax <code>b64\u2190{cpo} HttpCommand.Base64Encode in</code> <code>in</code> Either an integer vector with values in the range 0-255 or a character vector to be encoded <code>cpo</code> (optional) cpo stands for \"code points only\". If not supplied, <code>Base64Encode</code> will first perform UTF-8 conversion on a character argument. If any value for <code>cpo</code> is supplied, no conversion will be performed. If <code>in</code> is integer, no conversion is performed. The only use case for this argument is when you have already UTF-8 converted the <code>in</code> and you don't want <code>Base64Encode</code> to perform a second conversion. <code>b64</code> A character vector representing the base-64 encoding of the right argument. Example(s) <pre>      HttpCommand.Base64Encode 'Dyalog \u237a\u2374\u230a'RHlhbG9nIOKNuuKNtOKMig=="},{"location":"encode-methods/#url-encoding","title":"URL Encoding","text":"<p>URLs can only be sent over the Internet using the ASCII character set. However, URLs often contain characters outside the ASCII character set. URL encoding converts strings to a format acceptable for transmission over the Internet.  URLEncoding is also used to encode payloads for content-type <code>'application/x-www-form-urlencoded'</code>.</p>"},{"location":"encode-methods/#urldecode","title":"<code>UrlDecode</code>","text":"<p>URLDecode a URLEncoded string.</p>\n\n\n\nSyntax\n<code>out\u2190HttpCommand.UrlDecode in</code>\n\n\n<code>in</code>\nA URLEncoded string\n\n\n<code>out</code>\nThe URLDecoding of <code>in</code>.\n\n\nExample(s)\n<pre>      HttpCommand.UrlDecode 'Dyalog%20%E2%8D%BA%E2%8D%B4%E2%8C%8A'Dyalog \u237a\u2374\u230a      HttpCommand.UrlDecode 'name=Donald%20Duck'name=Donald Duck      HttpCommand.UrlDecode 'first=Donald&amp;last=O%27Mallard'first=Donald&amp;last=O'Mallard"},{"location":"encode-methods/#urlencode","title":"<code>UrlEncode</code>","text":"<p>URLEncode a string or a set of name/value pairs.</p>\n\n\n\nSyntax\n<code>out\u2190{name} HttpCommand.UrlEncode in</code>\n\n\n<code>in</code>\nOne of:<ul><li>a simple character vector to be URLEncoded</li><li>a set of name/value pairs</li></ul>\n\n\n<code>name</code>\n(optional) The name for the URLEncoded right argument. Applies only in the case where <code>in</code> is a simple character vector.\n\n\n<code>out</code>\nThe URLEncoding of <code>in</code>.\n\n\nExample(s)\n<pre>      HttpCommand.UrlEncode 'Dyalog \u237a\u2374\u230a'Dyalog%20%E2%8D%BA%E2%8D%B4%E2%8C%8A      'name' HttpCommand.UrlEncode 'Donald Duck'name=Donald%20Duck      HttpCommand.UrlEncode ('first' 'Donald') ('last' 'O''Mallard')first=Donald&amp;last=O%27Mallard"},{"location":"examples/","title":"Examples","text":"<p>Examples of some common <code>HttpCommand</code> use cases.</p>"},{"location":"examples/#interacting-with-web-services","title":"Interacting with Web Services","text":"<p>A web service will generally have a published API which describes how to interact with the service.  This API will be your guide for how to build requests using <code>HttpCommand</code> to access the web service. In many cases, the API will also describe the format of the data it returns in the <code>content-type</code> header.</p> <p>A web service may require authentication in order to gain access to certain resources or perform certain operations. GitHub is a good example of this - it does not require authentication to perform read-only queries on public resources, but authentication is necessary to perform write operations or to access private repositories.</p> <p>Let's look at GitHub's REST API as an example. The GitHub API returns its data in JSON format. </p> <p>Note: If you run these same examples, you may get slightly different results because of updates to Dyalog's content on GitHub.</p> <pre><code>      c \u2190 HttpCommand.New 'get' 'https://api.github.com/orgs/Dyalog'\n\n      \u22a2r \u2190 c.Run \u235d send the request\n[rc: 0 | msg:  | HTTP Status: 200 \"OK\" | \u2374Data: 1101]\n\n      r.Headers c.Lookup 'content-type' \u235d check the content-type\napplication/json; charset=utf-8\n\n      d\u2190\u2395JSON r.Data \u235d convert the JSON \n\n      d.(name public_repos) \n Dyalog  48\n\n      html \u2190 'HTML' ('&lt;img src=\"',d.avatar_url,'\"/&gt;')\n      coord \u2190 'coord' 'pixel' \u22c4 size \u2190 'size' (250 250)\n      'h' \u2395WC 'HTMLRenderer' html coord size\n</code></pre> <p></p>"},{"location":"examples/#authenticationauthorization","title":"Authentication/Authorization","text":"<p>The example above uses no authentication and therefore returns only publicly-available information. Many web services require some form of authentication to provide authorization to access private resources or functionality. Two common authentication schemes are \"token-based\" and \"HTTP Basic\".  </p>"},{"location":"examples/#http-basic-authentication","title":"HTTP Basic Authentication","text":"<p>Some web services allow you to use HTTP Basic authentication using userid and password credentials. Any request that includes authentication data should be sent using HTTPS if possible. <code>HttpCommand</code> allows you to specify these credentials in a few ways:</p> <ul> <li>in the <code>URL</code> by including <code>userid:password@</code> before the domain name</li> <li>by setting <code>AuthType</code> to <code>'Basic'</code> and <code>Auth</code> to <code>HttpCommand.Base64Encode 'userid:password'</code></li> <li>by including an \"Authorization\" header in the format<code>'Basic ',HttpCommand.Base64Encode 'userid:password'</code></li> </ul> <p>The following examples use the \"basic-auth\" endpoint of the website http://httpbin.org. httpbin.org provides many useful endpoints for testing HTTP requests. In this case, the userid and password are concatenated to the URL so the endpoint can validate the credentials.</p> <p>First, let's try using credentials in the URL...</p> <pre><code>      u \u2190 'userid'\n      p \u2190 'password'\n      endpoint \u2190 'httpbin.org/basic-auth/userid/password'\n\n      \u22a2url \u2190 'https://',u,':',p,'@',endpoint\nhttps://userid:password@httpbin.org/basic-auth/userid/password\n\n      \u22a2r \u2190 HttpCommand.Get url \n[rc: 0 | msg:  | HTTP Status: 200 \"OK\" | \u2374Data: 49]\n      r.Data\n{\n  \"authenticated\": true, \n  \"user\": \"user\"\n}\n</code></pre> <p>If we alter the URL so that the credentials don't match, we'll get a <code>401 \"UNAUTHORIZED\"</code> HTTP status.</p> <pre><code>      HttpCommand.Get url,'1'\n[rc: 0 | msg:  | HTTP Status: 401 \"UNAUTHORIZED\" | \u2374Data: 0]\n</code></pre> <p>Now, let's try setting the \"Authorization\" header...</p> <pre><code>      \u22a2credentials \u2190 HttpCommand.Base64Encode u,':',p\ndXNlcmlkOnBhc3N3b3Jk\n      hdrs \u2190 'Authorization' ('Basic ',credentials)\n      url \u2190 'https://',endpoint\n      HttpCommand.Get url '' hdrs\n[rc: 0 | msg:  | HTTP Status: 200 \"OK\" | \u2374Data: 49]\n</code></pre> <p>Finally, let's use the <code>AuthType</code> and <code>Auth</code> settings...</p> <pre><code>      h \u2190 HttpCommand.New 'get' url \u235d create an instance\n      h.Auth \u2190 credentials\n      h.AuthType \u2190 'Basic'\n      h.Run\n[rc: 0 | msg:  | HTTP Status: 200 \"OK\" | \u2374Data: 49]\n</code></pre>"},{"location":"examples/#token-based-authentication","title":"Token-based Authentication","text":"<p>One common authentication method uses tokens which are issued by the web service provider. Tokens should be protected just as you would protect your password. A token may have an expiration date after which you'll need to get a new token. Any request that includes authentication data should be sent using HTTPS if possible.</p> <p>For this next example we'll use a GitHub Personal Access Token which happens to provide more access to Dyalog's information on GitHub.</p> <p>The API documentation for the web service you are using should provide information about the use of tokens. In GitHub's case, the token is passed in the HTTP request's \"Authorization\" header. <code>HttpCommand</code> allows you to specify the token either by creating an \"Authorization\" header or by setting the <code>Auth</code> configuration setting. If you set the <code>Auth</code> setting, <code>HttpCommand</code> will add the \"Authorization\" header automatically.</p> <p>Let's assume that the token we're using in this example is in a variable named <code>token</code>. (Obviously, we are not going to publish the actual token here.) Also note if you plan on making several requests to the same web service, it's easier to create an instance of <code>HttpCommand</code>, set the <code>Auth</code> configuration setting, then set any other configuration settings and run the <code>Run</code> method for each request.</p> <p>First, let's compare the difference between an authorized and a non-authorized request...</p> <pre><code>      \u22a2HttpCommand.Get 'https://api.github.com/orgs/Dyalog'\n[rc: 0 | msg:  | HTTP Status: 200 \"OK\" | \u2374Data: 1101]\n\n      hdr\u2190'authorization' ('Token ',token)\n\n      \u22a2HttpCommand.Get 'https://api.github.com/orgs/Dyalog' '' hdr\n[rc: 0 | msg:  | HTTP Status: 200 \"OK\" | \u2374Data: 1804]\n</code></pre> <p>Note more data is returned for the authorized request. This additional data will include things like organizational and administrative information.</p>"},{"location":"examples/#interacting-with-json-based-web-services","title":"Interacting with JSON-based Web Services","text":"<p>Many web services including those based on Jarvis, Dyalog's web service framework, use JSON to format their request and response payloads. Normally, to interact with a JSON-based web service, you would set the \"content-type\" header of the request to \"application/json\" if the request has a payload; then you would process the response's JSON payload, possibly with <code>\u2395JSON</code>.  </p> <p><code>HttpCommand</code>'s <code>GetJSON</code> method is designed to make it easy to to interact with such services.  <code>GetJSON</code> will convert an APL array request payload to JSON format and conversely convert a JSON response payload to APL. We saw in the Interacting with Web Services example above that GitHub returns its result as JSON.</p>"},{"location":"examples/#posting-data-to-a-web-service","title":"Posting Data to a Web Service","text":"<p>So far we've only read data from GitHub using the HTTP GET method. The GitHub API also allows authenticated users to create and update information. In this example we will create a new repository using the HTTP POST method and our GitHub Personal Access Token. For security reasons, we will use the same <code>token</code> variable from the previous example. At the time of this writing, we are using the GitHub API documentation for creating a repository for an authenticated user as a guide. </p> <p>For this example, we'll use a namespace, <code>args</code>, to specify all the settings for our request...  </p> <pre><code>      args\u2190\u2395NS ''\n      args.Command            \u2190 'post'\n      args.URL                \u2190 'https://api.github.com/user/repos'\n      args.Params             \u2190 \u2395NS ''\n      args.Params.name        \u2190 'TestRepository'\n      args.Params.description \u2190 'HttpCommand Example'\n      args.Params.auto_init   \u2190 \u2282'true' \u235d APL's equivalent to JSON true\n      \u22a2r \u2190 HttpCommand.GetJSON args\n[rc: 0 | msg:  | HTTP Status: 401 \"Unauthorized\" | \u2374Data: \u236c]\n</code></pre> <p>Oops!  We didn't use our token for authentication and so the request was rejected as unauthorized. We also specify the authentication scheme as <code>'token'</code>, which is what the GitHub API uses.</p> <pre><code>      args.(AuthType Auth) \u2190 'Token' token\n      \u22a2r \u2190 HttpCommand.GetJSON args\n[rc: 0 | msg:  | HTTP Status: 201 \"Created\" | \u2374Data: \u236c]\n</code></pre> <p>Notice that the shape of the response's payload (Data) is <code>\u236c</code>. This is because we used the <code>GetJSON</code> method and <code>HttpCommand</code> automatically converted the response's JSON payload into a Dyalog JSON object which contains all the information about the newly created repository...</p> <pre><code>      ]Box on\n      r.Data.(name created_at)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502TestRepository\u25022022-08-01T21:23:08Z\u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"examples/#downloading-a-file","title":"Downloading a File","text":"<p>If you want to download a file you can simply use <code>HttpCommand.Get</code> with the URL of the file and then write the response's payload to a local file.  Or, you can set the <code>OutFile</code> setting to the local file name and have <code>HttpCommand</code> write the file for you. This is especially advantageous for large files if the server uses \"chunked\" transfer encoding to send the payload in chunks. In that case, rather than buffering the entire payload in the workspace and then writing to the local file, <code>HttpCommand</code> will write each chunk out as it is received. </p> <pre><code>      args\u2190\u2395NS '' \n      args.OutFile \u2190 '/tmp/test.pdf'\n      args.Command \u2190 'get' \n      args.URL     \u2190 'https://www.dyalog.com/uploads/files/student_competition/2021_problems_phase1.pdf'\n      \u22a2r \u2190 HttpCommand.Do args\n[rc: 0 | msg:  | HTTP Status: 200 \"OK\" | 179723 bytes written to c:/tmp/test.pdf]\n</code></pre>"},{"location":"examples/#twitter-example","title":"Twitter Example","text":"<p>The GitHub examples above used the default <code>AuthType</code> of <code>'Token'</code>. Twitter's v2 REST API uses OAuth 2.0's <code>'bearer'</code> authentication scheme.  In this example our super secret bearer token is stored in a variable named <code>bearerToken</code>. </p> <pre><code>      apiURL \u2190 'https://api.twitter.com/2/' \u235d set the base URL for each request\n      c \u2190 HttpCommand.New ''\n      c.(AuthType Auth) \u2190 'bearer' bearerToken\n</code></pre> <p>First we need to get the id for the Twitter account we want to look at. Twitter returns its response payload in JSON, so we can have <code>HttpCommand</code> automatically convert the JSON into an APL object by setting <code>TranslateData</code> to 1. If there are no errors in the request, Twitter will put the response's data in an object called <code>'data'</code>. </p> <pre><code>      c.TranslateData \u2190 1 \u235d have HttpCommand translate known data types\n      c.URL \u2190 apiURL,'users/by?usernames=dyalogapl'\n      \u22a2id \u2190 \u2283(c.Run).Data.data.id \u235d get the id for user \"dyalogapl\"\n36050079\n      c.URL \u2190 apiURL,'users/',id,'/tweets?tweet.fields=created_at'\n      \u22a2 r \u2190 c.Run\n[rc: 0 | msg:  | HTTP Status: 200 \"OK\" | \u2374Data: \u236c]\n      \u2262 tweets \u2190 r.Data.data \u235d how many tweets were returned?      \n10\n      \u2191(4\u2191tweets).((10\u2191created_at) (50\u2191text))\n 2022-07-26  Remember to submit your solutions to the annual AP \n 2022-07-25  Dyalog \u201922 \u2013 make sure you register for Dyalog \u201922 \n 2022-07-20  The APL practice problems site https://t.co/1SEoa5 \n 2022-07-15  There are only two weeks until the 10% Early Bird  \n</code></pre>"},{"location":"instance-methods/","title":"Instance Methods","text":"<p>The methods documented in this section are instance methods and may be called from an instance of <code>HttpCommand</code>. In the documentation below, we will use the name <code>instance</code> to represent an instance of <code>HttpCommand</code>. </p>"},{"location":"instance-methods/#run","title":"<code>Run</code>","text":"<p><code>Run</code> \"runs\" the HTTP request defined by the instance's settings. <code>Run</code> is called internally by the shared \"shortcut\" methods <code>Get</code>, <code>GetJSON</code>, and <code>Do</code>. </p> Syntax <code>result\u2190instance.Run</code> <code>result</code> <code>result</code> depends on the <code>RequestOnly</code> setting.If <code>RequestOnly=1</code>, <code>Run</code> will return, if possible, the HTTP request that would be sent if <code>RequestOnly</code> was set to <code>0</code>. If <code>HttpCommand</code> cannot form a proper HTTP request, <code>Run</code> will return a result namespace with pertinent information.If <code>RequestOnly=0</code>, <code>Run</code> will return a result namespace containing the result of attempting to build and send the HTTP request specified by the instance's settings. Examples <pre>      instance\u2190HttpCommand.New ''      instance.RequestOnly\u21901</pre>There isn't sufficient information for <code>HttpCommand</code> to build a proper HTTP request.<pre>      \u22a2result \u2190 instance.Run[rc: \u00af1 | msg: No URL specified | HTTP Status:  \"\" | \u2374Data: 0]      instance.URL\u2190'dyalog.com'</pre>Now, there's enough information to form a proper HTTP request.<pre>      \u22a2result \u2190 instance.RunGET / HTTP/1.1Host: dyalog.comUser-Agent: Dyalog-HttpCommand/5.0.3Accept: /      instance.RequestOnly\u21900      \u22a2result \u2190 instance.Run[rc: 0 | msg:  | HTTP Status: 200 \"OK\" | \u2374Data: 23127]"},{"location":"instance-methods/#show","title":"<code>Show</code>","text":"<p>Returns the HTTP request that <code>HttpCommand</code> would send when <code>Run</code> is executed and <code>RequestOnly</code> is <code>0</code>.  <code>Show</code> is equivalent to setting <code>RequestOnly</code> to <code>1</code> and running <code>Run</code>.</p>\n\n\n\nSyntax\n<code>r\u2190instance.Show</code>\n\n\n<code>r</code>\nThe result <code>r</code> is a character vector representing a properly formatted HTTP request if such a request can be formatted from the instance's settings.If the request cannot be formatted, <code>r</code> is  a namespace containing a non-0 return code, <code>rc</code>, and an explanatory message, <code>msg</code>.\n\n\nExample\n<pre>      instance \u2190 HttpCommand.New 'get' 'dyalog.com'      instance.ShowGET / HTTP/1.1Host: dyalog.comUser-Agent: Dyalog-HttpCommand/5.0.3Accept: /</pre>"},{"location":"instance-methods/#config","title":"<code>Config</code>","text":"<p><code>Config</code> returns the current state of all <code>HttpCommand</code> settings.</p>\n\n\n\nSyntax\n<code>r\u2190instance.Config</code>\n\n\n<code>r</code>\nA 2-column matrix where<code>[;1]</code>contains the setting names<code>[;2]</code>contains the corresponding setting values\n\n\nExample\n<pre>      instance\u2190HttpCommand.New 'get' 'dyalog.com'      instance.Config Auth AuthType BufferSize                      200000 Cert Command                            get CongaPath CongaRef CongaVersion ContentType Cookies Debug                                0 Headers KeepAlive                            1 LDRC                           not set MaxPayloadSize                      \u00af1 MaxRedirections                     10 OutFile Params Priority         NORMAL:!CTYPE-OPENPGP PrivateKeyFile PublicCertFile RequestOnly                          0 Secret                               1 SSLFlags                            32 SuppressHeaders                      0 Timeout                             10 TranslateData                        0 URL                         dyalog.com WaitTime                          5000</pre>"},{"location":"instance-methods/#init","title":"<code>Init</code>","text":"<p><code>Init</code> initializes Conga, Dyalog's TCP/IP utility library. Normally, <code>HttpCommand</code> will initialize Conga when <code>Run</code> is first  called. <code>Init</code> is intended to be used when the user wants to \"tweak\" Conga prior to <code>Run</code> being executed. It's very unlikely that you'll ever need to use <code>Init</code>.</p>\n\n\n\nSyntax\n<code>r\u2190instance.Init</code>\n\n\n<code>r</code>\na 2-element vector of<ul><li><code>[1]</code> the return code. <code>0</code> means Conga is initialized. Non-<code>0</code> indicates some error occurred in Conga initialization.</li><li><code>[2]</code> a message describing what went wrong if the return code is not <code>0</code></li></ul>\n\n\nExample\n<pre>      instance\u2190HttpCommand.New ''      instance.CongaPath\u2190'/doesnotexist'      instance.Init\u00af1  CongaPath \"c:/doesnotexist/\" does not exist</pre>"},{"location":"instance-methods/#header-related-methods","title":"Header-related Methods","text":"<p>There are two sets of headers associated with an HTTP request - the request headers and the response headers. The methods described here deal with request headers.</p>\n<p><code>HttpCommand</code>'s request headers are stored in the <code>Headers</code> setting which is a 2-column matrix of name/value pairs. Header names are case-insensitive; header values are not. While you can manipulate the <code>Headers</code> array directly, <code>HttpCommand</code> has three methods to manage <code>Headers</code> that accommodate the case-insensitive nature of header names.</p>\n<p>By default, <code>HttpCommand</code> will automatically generate several request headers if you haven't specified values for them.  See <code>SuppressHeaders</code> for the list of these headers.  To suppress the generation of specific headers, you can set its value to <code>''</code>.</p>\n<p>Note: The examples below were run using <code>]boxing on</code>.</p>"},{"location":"instance-methods/#addheader","title":"<code>AddHeader</code>","text":"<p><code>AddHeader</code> will add a header if a user-defined header with that name does not already exist. Use <code>SetHeader</code> to set a header regardless if one with the same name already exists.</p>\n\n\n\nSyntax\n<code>{hdrs}\u2190name instance.AddHeader value</code>\n\n\n<code>value</code>\nthe value for the header\n\n\n<code>name</code>\nthe name for the header\n\n\n<code>hdrs</code>\nthe updated matrix of user-specified headers\n\n\nExample\n<pre>      instance\u2190HttpCommand.New ''      'My-Header' instance.AddHeader 'Drake Mallard'      instance.Headers\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502My-Header\u2502Drake Mallard\u2502\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</pre><code>AddHeader</code> will not replace an existing header with the same case-insensitive name.<pre>      'my-header' instance.AddHeader 'Daffy Duck'      instance.Headers\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502My-Header\u2502Drake Mallard\u2502\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</pre>Setting the value of an <code>HttpCommand</code>-generated header that to <code>''</code> will suppress that header from being sent in the request.<pre>      'accept-encoding' instance.SetHeader ''</pre>"},{"location":"instance-methods/#setheader","title":"<code>SetHeader</code>","text":"<p><code>SetHeader</code> will set a header, replacing one of the same name if it already exists.</p>\n\n\n\nSyntax\n<code>{hdrs}\u2190name instance.SetHeader value</code>\n\n\n<code>value</code>\nthe value for the header\n\n\n<code>name</code>\nthe name for the header\n\n\n<code>hdrs</code>\nthe updated matrix of user-specified headers\n\n\nExample\n<pre>      instance\u2190HttpCommand.New ''      \u22a2'My-Header' instance.SetHeader 'Drake Mallard'\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502My-Header\u2502Drake Mallard\u2502\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</pre><code>SetHeader</code> will replace an existing header with the same case-insensitive name<pre>       \u22a2'my-header' instance.SetHeader 'Daffy Duck'\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502My-Header\u2502Daffy Duck\u2502\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</pre>Setting the value of an <code>HttpCommand</code>-generated header that to <code>''</code> will suppress that header from being sent in the request.<pre>      'accept-encoding' instance.SetHeader ''</pre>"},{"location":"instance-methods/#removeheader","title":"<code>RemoveHeader</code>","text":"<p><code>RemoveHeader</code> removes a user-specified header. If the header does not exist, <code>RemoveHeader</code> has no effect. <code>RemoveHeader</code> does not affect the <code>HttpCommand</code>-generated headers.</p>\n\n\n\nSyntax\n<code>{hdrs}\u2190instance.RemoveHeader name</code>\n\n\n<code>name</code>\nthe case-insensitive name of the header to remove&lt;/td\n\n\n<code>hdrs</code>\nthe updated matrix of user-specified headers\n\n\nExample\n<pre>      'My-Header' instance.SetHeader 'Daffy Duck'      'another' instance.SetHeader 'some value'      instance.Headers\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502My-Header\u2502Daffy Duck\u2502\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\u2502another  \u2502some value\u2502\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      instance.RemoveHeader 'my-header'      instance.Headers\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502another\u2502some value\u2502\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</pre>"},{"location":"integrating/","title":"Integrating HttpCommand","text":""},{"location":"integrating/#considerations","title":"Considerations","text":"<p>Two aspects that need to be considered when integrating <code>HttpCommand</code> into your application.</p> <ul> <li>Are there other components in your application that also use Conga?</li> <li>How will your application be deployed? </li> </ul>"},{"location":"integrating/#use-of-conga","title":"Use of Conga","text":"<p>If your application has other components that also use Conga, it's advisable that each component have its own Conga \"root\" created by <code>Conga.Init</code>. This requires the <code>Conga</code> namespace from the <code>conga</code> workspace. The recommended setup is:</p> <ul> <li>Copy the <code>Conga</code> namespace into your workspace. For this example, we will assume you've copied <code>Conga</code> into the root (<code>#</code>) namespace.</li> <li>Explicitly point <code>HttpCommand</code> at this <code>Conga</code> namespace by setting <code>HttpCommand.CongaRef\u2190#.Conga</code> (or wherever you've copied <code>Conga</code>).</li> <li>All other Conga-using components should be similarly pointed at this <code>Conga</code> namespace.</li> </ul> <p>When <code>HttpCommand</code> is initialized it will create a root named <code>'HttpCommand'</code> when <code>Conga.Init</code> is called. Your other components will create their own Conga roots when they also call <code>Conga.Init</code>. This will ensure that the Conga shared libraries are loaded only once.</p>"},{"location":"integrating/#deployment","title":"Deployment","text":"<p>In addition to the presence of other Conga-using components in your application, you need to consider how your application is deployed.  </p>"},{"location":"integrating/#dyalog-installation-folder-is-available","title":"Dyalog Installation Folder is Available","text":"<p>If the Dyalog installation folder is available, and there are no other components that use Conga, you can use <code>HttpCommand</code> without any additional configuration. <code>HttpCommand</code> will copy the <code>Conga</code> namespace from the <code>conga</code> workspace in the Dyalog installation and find the shared libraries in the Dyalog APL installation folder.</p>"},{"location":"integrating/#dyalog-installation-folder-is-not-available","title":"Dyalog Installation Folder is Not Available","text":"<p>If the Dyalog installation folder is not available, for instance in the case of a runtime application, or a bound or stand-alone executable, then you will need to have a copy of the <code>Conga</code> namespace in your workspace and either put the Conga shared libraries in the same folder as your executable or set <code>CongaPath</code> to the location of the shared libraries. </p>"},{"location":"misc-methods/","title":"Miscellaneous Methods","text":"<p>This section describes <code>HttpCommand</code> shared methods that don't conveniently fit into other categories.</p>"},{"location":"misc-methods/#version","title":"<code>Version</code>","text":"<p>Returns <code>HttpCommand</code> version information.</p> Syntax <code>r\u2190HttpCommand.Version</code> Result A 3-element vector of:<ul><li><code>'HttpCommand'</code></li><li>The version number</li><li>The version date</li> Example <pre>      HttpCommand.Version HttpCommand  5.0.2  2022-08-03</pre>"},{"location":"misc-methods/#documentation","title":"<code>Documentation</code>","text":"<p>Returns a link to the documentation for <code>HttpCommand</code> that you can click on to navigate to this documentation.</p> Syntax <code>r\u2190HttpCommand.Documentation</code> Example <pre>      HttpCommand.DocumentationSee https://dyalog.github.io/HttpCommand/</pre>"},{"location":"misc-methods/#upgrade","title":"<code>Upgrade</code>","text":"<p><code>Upgrade</code> checks GitHub for a newer version of <code>HttpCommand</code> and if one is found it will be <code>\u2395FIX</code>ed in the workspace.</p> <p><code>Upgrade</code> will not work on Classic interpreters. To manually upgrade <code>HttpCommand</code>:</p> <ul> <li>Open a browser to https://www.github.com/Dyalog/HttpCommand/releases/latest</li> <li>Click on the <code>HttpCommand.dyalog</code> file in the list of assets for the release.  This will download the file.</li> <li>From APL, do <code>2 \u2395FIX 'filename'</code> where filename is the full pathname of the downloaded file. </li> </ul> <p>Note: <code>Upgrade</code> will only update the in-workspace copy of <code>HttpCommand</code> and will not update the version of <code>HttpCommand</code> found in the Dyalog installation folder. The installed version of <code>HttpCommand</code> is upgraded when updates to Dyalog APL are installed.</p> Syntax <code>r\u2190HttpCommand.Upgrade</code> <code>r</code> a 2-element vector of:<ul><li>the return code which is <code>1</code> if <code>HttpCommand</code> was upgraded to a newer version, <code>0</code> if <code>HttpCommand</code> on GitHub is not newer than the current version, or <code>\u00af1</code> if there was an error <code>\u2395FIX</code>ing <code>HttpCommand</code> from GitHub.</li><li>character vector message describing the result</li></ul> Example <pre>      HttpCommand.Upgrade 0  Already using the most current version: HttpCommand 5.0.2 2022-08-03</pre>"},{"location":"msgs/","title":"Messages and Return Codes","text":""},{"location":"msgs/#rc-values","title":"<code>rc</code> Values","text":"<p>The value of <code>rc</code> may be interpreted as follows:</p> Error Type <code>rc</code> Value Description No error <code>0</code> <code>HttpCommand</code> was able to format and send the request and receive a response without error. Conga error <code>&gt;0</code> If <code>rc</code> is a positive integer, it is a return code that is signalled by Conga when sending the request and receiving the response. If Conga detects an error at the operating system level, it will return the operating system return code. For instance, 10013 is the Microsoft Windows return code for \"port in use\". Translation Error <code>\u00af2</code> You specified <code>TranslateData\u21901</code> and <code>HttpCommand</code> was unable to translate an XML or JSON response payload using <code>\u2395XML</code> or <code>\u2395JSON</code> respectively or you used <code>GetJSON</code> and response content-type header was not <code>'application/json'</code>. Everything else <code>\u00af1</code> This is the generic return code for any error condition that is not signalled by Conga. <p>In general if <code>rc=0</code> then <code>msg</code> will be empty. There are circumstances where <code>msg</code> will contain an informational message even if <code>rc=0</code>.  These messages are included below.   </p> <p>In the following message descriptions, items that are enclosed in {} represent the value of that named item.  For instance, {BufferSize} represents the value of the <code>BufferSize</code> setting. In many cases, the message text itself is sufficient to explain the condition and its resolution, but we document them nonetheless for completeness. </p>"},{"location":"msgs/#request-related-messages","title":"Request-related Messages","text":""},{"location":"msgs/#catch-all-messages","title":"\"Catch All\" Messages","text":"Message <code>Unexpected {ERROR} at {location}</code> Description You should rarely, if ever, see this message.  It is returned when an error occurred that wasn't anticipated or otherwise handled. Resolution Try to find a consistently reproducible example and contact Dyalog support. Message <code>Invalid HttpCommand setting(s): {setting name(s)}</code> Description You passed a namespace argument <code>New</code>, <code>Get</code>, <code>GetJSON</code>, or <code>Do</code> or as a constructor argument to <code>\u2395NEW</code> and that namespace contained named elements that are not valid <code>HttpCommand</code> setting names. Resolution Remove the named elements that are not <code>HttpCommand</code> setting names. Message <code>Stopped for debugging... (Press Ctrl-Enter)</code> Description This message is not returned in the result namespace, but is displayed when you have set <code>Debug\u21902</code> and <code>HttpCommand</code> has stopped intentionally just prior to establishing the connection to the host. Resolution Pressing Ctrl-Enter will open the debugger and trace into <code>HttpCommand</code>. Entering <code>\u2192\u2395LC+1</code> will resume execution."},{"location":"msgs/#non-conga-setting-messages","title":"Non-Conga Setting Messages","text":"<p>These messages report problems with settings that prevent <code>HttpCommand</code> from creating a proper HTTP request to send to the host. </p> Message <code>No URL specified</code> Description You didn't specify a <code>URL</code> setting. Resolution Specify a valid <code>URL</code>. Message <code>URL is not a simple character vector</code> Description The <code>URL</code> setting isn't a simple character vector. Resolution Make sure <code>URL</code> isn't nested or non-character. Message <code>Invalid host/port: {host}</code> Description You specified a URL that has a hostname followed by a colon (<code>':'</code>) followed by something that does not parse as an integer.  For example: <code>'dyalog.com:ducky'</code> Resolution Correct (or omit) the bad port specification. Message <code>No host specified</code> Description <code>HttpCommand</code> couldn't find a host in the <code>URL</code> setting. Resolution Ensure your <code>URL</code> conforms to the specification. Message <code>Invalid port: {port}</code> Description The port you specified is not in the range 1-63535. Resolution Specify an integer port number in the range 1-65535. Message <code>Invalid protocol: {protocol}</code> Description <code>HttpCommand</code> thinks you've specified a protocol other than <code>'http://'</code> or <code>'https://</code>. Resolution <code>HttpCommand</code> supports only the HTTP and HTTPS protocols. If you have not specified the protocol in your <code>URL</code> setting, <code>HttpCommand</code> will default to use HTTP. HTTPS will be used if you've specified either the default secure port (443) or supplied certificate information. Message <code>Cookies are not character</code> Description <code>Cookies</code> are specified as name/value pairs. All of the names and values need to be character. Resolution Make sure <code>Cookies</code> names and values are character. Message <code>Headers are not character</code> Description <code>Headers</code> may be specified as name/value pairs. All of the names and values need to be character. Resolution Make sure <code>Headers</code> names and values are character. Message <code>Improper header format</code> Description You used a value for <code>Headers</code> that did not conform to one of the formats described in the <code>Headers</code> specification. Resolution Ensure that <code>Headers</code> conforms to the specification Message <code>Output file folder {foldername} does not exist.</code> Description The folder in your {OutFile} setting does not exist. <code>HttpCommand</code> will create the output file, if necessary, in an existing folder but <code>HttpCommand</code> will not create a new folder. Resolution Either create the folder or change the <code>OutFile</code> setting. Message <code>No filename specified in OutFile or URL</code> Description If you do not specify a file name in <code>OutFile</code>, <code>HttpCommand</code> will attempt to use the file name specified in <code>URL</code>. However, if there is also no file name in <code>URL</code>, you will receive this message. Resolution Specify a file name in either <code>OutFile</code> or <code>URL</code>. Message <code>Output file \"{OutFile}\" is not empty</code> Description You specified the name of an existing, non-empty, file in <code>OutFile</code> but did not specify to overwrite or append to the file. Resolution Either specify a filename of a file that doesn't exist or is empty, or specify that the file is to be overwritten or appended to."},{"location":"msgs/#conga-setting-messages","title":"Conga Setting Messages","text":"<p>The messages in this section are related to the Conga settings in <code>HttpCommand</code>, not the actual execution of Conga code whose messages  are described in \"Conga Execution\"-Related Messages.</p> Message <code>CongaRef {CongaRef} does not point to a valid instance of Conga</code> Description You specified a <code>CongaRef</code> setting that is not the name of, or a reference to, the <code>Conga</code> or the <code>DRC</code>namespace. Resolution Check that <code>CongaRef</code> is actually the name of, or a reference to, the <code>Conga</code> or the <code>DRC</code>namespace. Message <code>{location}.{namespace} does not point to a valid instance of Conga</code> Description <code>HttpCommand</code> searches for the Conga API according to these rules and found a namespace named either <code>Conga</code> or <code>DRC</code>, but that namespace is not a valid Conga namespace. Resolution Either set <code>CongaRef</code> to point to a proper <code>Conga</code> or <code>DRC</code> namespace, or remove/rename the offending namespace. Message <code>CongaPath \"{CongaPath}\" does not exist</code> Description You specified a <code>CongaPath</code> that could not be found. Resolution Set <code>CongaPath</code> to the name of an existing folder containing the Conga shared libraries, or do not set <code>CongaPath</code> and let <code>HttpCommand</code> use the Dyalog installation folder. Message <code>CongaPath \"{CongaPath}\" is not a folder</code> Description You specified a <code>CongaPath</code> that exists, but is not a folder. Resolution Set <code>CongaPath</code> to the name of an existing folder containing the Conga shared libraries, or do not set <code>CongaPath</code> and let <code>HttpCommand</code> use the Dyalog installation folder. Message <code>{Conga API} was copied from {path}, but is not valid</code> Description <code>HttpCommand</code> was able to copy either the <code>Conga</code> or the <code>DRC</code> namespace according to the procedure described in Conga Default Behavior, but the namespace was not a valid Conga API. Resolution Ensure that conga workspace from which <code>HttpCommand</code> attempted to copy the Conga API is proper and the same version as the shared libraries.  See Integrating <code>HttpCommand</code>. Message <code>Neither Conga nor DRC were successfully copied</code> Description <code>HttpCommand</code> was unable to copy either the <code>Conga</code> or the <code>DRC</code> namespace according to the procedure described in Conga Default Behavior. Resolution The most likely cause is that there is no conga workspace in the paths from which <code>HttpCommand</code> tried to copy. See Integrating <code>HttpCommand</code>. Message <code>Not found PublicCertFile \"{PublicCertFile}\"</code><code>Not found PrivateKeyFile \"{PrivateKeyFile}\"</code><code>Not found PublicCertFile \"{PublicCertFile}\" and PrivateKeyFile \"{PrivateKeyFile}\"</code> Description One or both of the file names you specified for <code>PublicCertFile</code> and <code>PrivateKeyFile</code> does not exist. Resolution Set <code>PublicCertFile</code> and <code>PrivateKeyFile</code> to the names of certificate files that actually exist. Message <code>PublicCertFile is empty</code><code>PrivateKeyFile is empty</code> Description You have specified one of <code>PublicCertFile</code> or <code>PrivateKeyFile</code>, but not the other. Resolution Be sure to set both <code>PublicCertFile</code> and <code>PrivateKeyFile</code>. Message <code>Invalid certificate parameter</code> Description You specified a value for <code>Cert</code> that is not a valid instance of Conga's <code>X509</code> class. Resolution Make sure that <code>Cert&lt;/cert&gt; is a valid instance of the</code>X509` class. Message <code>Unable to decode PublicCertFile \"{PublicCertFile}\" as certificate</code> Description An error occurred when Conga attempted to use <code>X509Cert.ReadCertFromFile</code> with the value you specified for <code>PublicCertFile</code>. Resolution Make sure <code>PublicCertFile</code> contains a valid certificate. See the Conga User Guide for more information."},{"location":"msgs/#conga-execution-messages","title":"Conga Execution Messages","text":"<p>The messages in this section are returned when Conga returns a non-zero return code, or an unexpected Conga event occurs. If there is a non-zero return code from Conga, it is returned in <code>rc</code>.</p> <p><code>HttpCommand</code> uses Conga's \"HTTP\" mode, where Conga will parse the response from the host.  Some of the messages occur when the host sends an ill-formed response and Conga cannot parse it as HTTP. The ill-formed data is returned in the <code>Data</code> element of <code>HttpCommand</code>'s result namespace.</p> Message <code>Could not initialize Conga due to...</code> Description Conga could not be initialized for one of many reasons. The remainder of the message should give some indication as to what the problem was. Examples of problems include:<ul><li>the <code>Conga</code> or <code>DRC</code> namespace that <code>HttpCommand</code> found is not a valid Conga interface.</li><li>the <code>CongaPath</code> setting does not point to an existing folder containing the Conga shared libraries.</li><li><code>HttpCommand</code> was unable to find a valid <code>Conga</code> or <code>DRC</code> namespace and could not copy either from the <code>conga</code> workspace.</li></ul> Resolution The resolution will depend on the circumstances described in the message. The Conga User Guide and/or the Integrating <code>HttpCommand</code>section could be helpful here. Message <code>Conga client creation failed...</code> Description This will occur if Conga is not able to create a client connection to the host. The remainder of the message will indicate the specific Conga error message. Resolution The resolution will depend on the circumstances described in the message. See the Conga User Guide. Message <code>Conga could not parse the HTTP response</code> Description The response from the host is not a properly formatted HTTP message. Resolution Inspect the data returned by the host in the <code>Data</code> element of the result. Message <code>Response payload not completely received</code> Description This occurs when <code>HttpCommand</code> was able to receive and parse the HTTP headers from the host but, during the receipt of the response payload, an error occurred. Resolution Attempt the request again. If the error persists, examine the headers and payload data, if any, returned by the host. Message <code>Conga error processing your request: {Conga return code}</code> Description Conga encountered some error that wasn't otherwise diagnosed or trapped. Resolution See the Conga User Guide for guidance. Message <code>Socket closed by server</code> Description During processing of the request, the server unexpectedly closed the connection to <code>HttpCommand</code>. Resolution Check that your request is proper for the host. See the Troubleshooting guide. Message <code>Unhandled Conga event type: {Conga event}</code> Description This should never occur, but for the sake of paranoia, we coded for the possibility of a Conga event that we didn't anticipate. Resolution Try to find a consistently reproducible example and contact Dyalog support. Message <code>Conga wait error: {Conga return code}</code> Description An error occurred while Conga was waiting for a response from the host. Resolution Re-attempt the request. Examine any data or headers that may have been received for clues. Message <code>Could not set DecodeBuffers on Conga client \"{Conga client name}\": {Conga return code}</code> Description This is another error that should never occur. Resolution Try to find a consistently reproducible example and contact Dyalog support. Message <code>Conga failed to parse the response HTTP header</code> Description Conga received an HTTPHeader event but was unable to parse the received data as HTTP headers. Resolution The unparsable data is returned in the <code>Data</code> element of the result namespace and may provide insight as to the problem. Message <code>Conga failed to parse the response HTTP chunk</code> Description Conga received an HTTPChunk event but was unable to parse the received data as an HTTP chunk. Resolution The unparsable data is returned in the <code>Data</code> element of the result namespace and may provide insight as to the problem. Message <code>Conga failed to parse the response HTTP trailer</code> Description Conga received an HTTPTrailer event but was unable to parse the received data as an HTTP trailer. Resolution The unparsable data is returned in the <code>Data</code> element of the result namespace and may provide insight as to the problem. Message <code>Conga error while attempting to send request: {Conga return code}</code> Description Conga was able to establish a connection to the host, but encountered an error when attempting to send the HTTP request. Resolution Examine the request being sent as described in the Troubleshooting guide. The Conga User Guide may also be helpful. Message <code>Unable to set EventMode on Conga root</code> Description This is another message that should never occur. Resolution Try to find a consistently reproducible example and contact Dyalog support."},{"location":"msgs/#operational-messages","title":"Operational Messages","text":"Message <code>{ERROR} while trying to initialize output file \"{OutFile}\"</code> Description You specified an <code>OutFile</code> setting and an error occurred while trying to initialize the file. Resolution {ERROR} should provide information that will help determine the resolution. Message <code>Response header size exceeds BufferSize {BufferSize}</code> Description The size of the response's HTTPHeader message exceeded the value set for <code>BufferSize</code>. Resolution <code>BufferSize</code> is intended to help counteract maliciously large message headers. If the response headers are expected to be very large, increase the value of <code>BufferSize</code>. Message <code>Payload length exceeds MaxPayloadSize</code> Description The <code>content-length</code> header in the response had a value that exceeded the <code>MaxPayload</code> setting. Resolution <code>MaxPayloadSize</code> is intended to help counteract maliciously large messages. If the response payload is expected to be very large, increase the value of <code>MaxPayloadSize</code> Message <code>Request timed out before server responded</code> Description The host did not respond within the number of seconds specified in the <code>Timeout</code> setting. Resolution If you expect the host to be slow in responding, increase the magnitude of the <code>Timeout</code> setting. Message <code>Redirection detected, but no \"location\" header supplied.</code> Description The host responded with a 3XX HTTP status (redirection), but the response did not contain a <code>location</code> header indicating where to redirect the request. Resolution This is a server-side problem. Message <code>Too many redirections ({MaxRedirections})</code> Description The host sent more 3XX HTTP status responses (redirections) than <code>MaxRedirections</code> specified. Resolution <code>MaxRedirections</code> is intended to prevent redirection loops or too many redirection hops. If the redirections are legitimate, increase the value of <code>MaxRedirections</code>. Message <code>TRANSLATION ERROR occurred during response payload conversion (Data was not converted)</code> Description This will occur if the response payload contains an invalid UTF-8 sequence or if you are using a Classic interpreter and the response payload contains characters not found in <code>\u2395AVU</code>. <code>Data</code> will contain the response payload as an unconverted vector of single-byte integers. Resolution If you're using a Classic interpreter, consider using a Unicode interpreter.  Otherwise try to identify the offending characters/sequences and take appropriate action to remove or amend them. Message <code>Could not translate XML payload</code> Description If you specify <code>TranslateData\u21901</code> and the response content-type header contains <code>'text/xml'</code> or <code>'application/xml'</code>, <code>HttpCommand</code> will attempt to use <code>\u2395XML</code> to translate the payload.  If <code>\u2395XML</code> fails, this message is returned and <code>rc</code> is set to <code>\u00af2</code>. Resolution This is probably due to the response payload containing incorrectly formatted XML. The untranslated payload is returned in the <code>Data</code> element of the response namespace. Message <code>Could not translate JSON payload</code> Description If you specify <code>TranslateData\u21901</code> or use the <code>GetJSON</code> shared method and the response content-type header contains <code>'application/json'</code>, <code>HttpCommand</code> will attempt to use <code>\u2395JSON</code> to translate the payload.  If <code>\u2395JSON</code> fails, this message is returned and <code>rc</code> is set to <code>\u00af2</code>. Resolution This is probably due to the response payload containing incorrectly formatted JSON. The untranslated payload is returned in the <code>Data</code> element of the response namespace. Message <code>Response content-type is not application/json</code> Description You used <code>GetJSON</code> and the response content-type header is not <code>'application/json'</code>. <code>rc</code> is set to <code>\u00af2</code> and <code>Data</code> contains the response payload. Resolution <code>GetJSON</code> expects the response content-type to be <code>'application/json'</code>.  If the host is expected to return some other content-type, consider using a method other than <code>GetJSON</code>."},{"location":"msgs/#informational-messages","title":"Informational Messages","text":"<p>These messages are issued to inform you that, while there was no actual error, </p> Message <code>Connection properties changed, connection reset</code> Description Unless otherwise specified, an instance of <code>HttpCommand</code> will attempt to keep the connection for the last request open. If any of the connection properties change on a subsequent request, the old connection closed and a new connection is established. Resolution No resolution necessary. Message <code>Unhandled content-encoding: {content-encoding}</code> Description This message occurs if the response's content-encoding header is something other than <code>'gzip'</code> or <code>'deflate'</code>.It is intended to inform you that <code>HttpCommand</code> did not automatically decode the payload. Resolution Your application will need to decode the payload."},{"location":"msgs/#other-messages","title":"Other Messages","text":"<p>These messages are not found in the <code>msg</code> element of result namespace, but are issued when using other features of <code>HttpCommand</code>.</p> Message <code>Could not \u2395FIX file: {ERROR}{: Message}</code> Description The <code>Fix</code> method was not able to <code>\u2395FIX</code> the file content returned as the response payload. Resolution Ensure that the requested file contains <code>\u2395FIX</code>-able contents. Message <code>Could not \u2395FIX new HttpCommand: {ERROR}{: Message}</code> Description The <code>Upgrade</code> method was not able to <code>\u2395FIX</code> a newer <code>HttpCommand</code>. Resolution See <code>Upgrade</code>.  If the problem persists, contact Dyalog support. Message <code>Upgraded to {new-version} from {old-version}</code> Description The <code>Upgrade</code> method was able to <code>\u2395FIX</code> a newer version of <code>HttpCommand</code>. Resolution See <code>Upgrade</code>. Message <code>Already using the most current version {version}</code> Description The <code>Upgrade</code> method did not find a newer version of <code>HttpCommand</code>. Resolution See <code>Upgrade</code>."},{"location":"operational-settings/","title":"Operational Settings","text":"<p>Operational settings affect how <code>HttpCommand</code> behaves.</p>"},{"location":"operational-settings/#instance-settings","title":"Instance settings","text":""},{"location":"operational-settings/#keepalive","title":"<code>KeepAlive</code>","text":"Description A Boolean which indicates whether <code>HttpCommand</code> close the client connection after receiving the response from the host.<ul><li><code>1</code> = keep connection alive</li><li><code>0</code> = close connection</li></ul> Default <code>1</code> Example(s) <code>h.KeepAlive\u21900 \u235d close the connection</code> Details <code>KeepAlive</code> is only applicable when you persist an instance of <code>HttpCommand</code> and has no effect when you use the shortcut methods <code>Get</code>, <code>GetJSON</code>, or <code>Do</code> as these methods destroy the <code>HttpCommand</code> instance they create when they finish execution. HTTP version 1.1 specifies that connections should be kept alive to improve throughput. Nevertheless, a host may close the connection after sending the response or after a period of inactivity from the client (<code>HttpCommand</code>). If the connection is closed, <code>HttpCommand</code> will open a new connection on a subsequent request."},{"location":"operational-settings/#maxpayloadsize","title":"<code>MaxPayloadSize</code>","text":"Description The maximum response payload size that <code>HttpCommand</code> will accept.<ul><li><code>\u00af1</code> = no maximum</li><li><code>\u22650</code> = maximum size</li></ul> Default <code>\u00af1</code> Example(s) <code>h.MaxPayloadSize\u2190100000 \u235d set a 100,000 byte limit</code> Details If <code>MaxPayloadSize</code> is set to a value <code>\u22650</code> and the response contains a payload, <code>HttpCommand</code> checks the payload size as follows: <ul><li>If the response contains a `content-length` header, its value is compared to `MaxPayloadSize`. If exceeded, `HttpCommand` will return with a return code of `\u00af1` and no payload.</li><li>Otherwise, the response payload is sent in chunks and `HttpCommand` will accumulate each chunk and compare the total payload size to `MaxPayloadSize`. If exceeded, `HttpCommand` will return with a return code of `\u00af1` and whatever payload has been accumulated.</li></ul> <p>In either case, if <code>MaxPayloadSize</code> is exceeded, the client connection will be closed.|</p>"},{"location":"operational-settings/#maxredirections","title":"<code>MaxRedirections</code>","text":"Description The maximum number of redirections that <code>HttpCommand</code> will follow.A setting of <code>\u00af1</code> means there is no limit to the number of redirections followed; exposing the possibility of an infinite redirection loop and eventually a <code>WS FULL</code> error. A setting of <code>0</code> means no redirections will be followed. Default <code>10</code> Example(s) <code>h.MaxRedirections\u21900 \u235d do not follow any redirections</code> Details If the response HTTP status indicates a redirection (3XX) to another URL, <code>HttpCommand</code> will retain information about the current request in the <code>Redirections</code> element of the result namespace and issue a new request to the new URL. <code>HttpCommand</code> will do this up to <code>MaxRedirections</code> times."},{"location":"operational-settings/#outfile","title":"<code>OutFile</code>","text":"Description <code>OutFile</code> has up to 2 elements:<ul><li><code>[1]</code>The name of the file or folder to which <code>HttpCommand</code> will write the response payload.  If a folder is specified, the file name will be the same as the resource specified in <code>URL</code>. </li><li><code>[2]</code>an optional flag indicating:<ul><li><code>0</code> - do not write to an existing, non-empty file (the default)</li><li><code>1</code> - replace the contents, if any, if the file exists</li><li><code>2</code> - append to the file, if it exists</li></ul></li></ul> Default <code>'' 0</code> Example(s) <pre>      c \u2190 HttpCommand.New ''      c.URL\u2190'https://www.dyalog.com/uploads/files/student_competition/2022_problems_phase2.pdf'      c.OutFile\u2190'/tmp/'      c.Run[rc: 0 | msg:  | HTTP Status: 200 \"OK\" | 399766 bytes written to c:/tmp/2022_problems_phase2.pdf]      c.OutFile\u2190'/tmp/problems.pdf' 1 \u235d overwrite existing file      c.Run[rc: 0  | msg:  | HTTP Status: 200 \"OK\" | 399766 bytes written to c:/tmp/problems.pdf]</pre> Details Output to file is subject to <code>MaxPayloadSize</code>."},{"location":"operational-settings/#requestonly","title":"<code>RequestOnly</code>","text":"Description If set to 1, <code>HttpCommand</code> will return the character vector HTTP request that would be sent, instead of actually sending the request. Default <code>0</code> Example(s) <code>h.RequestOnly\u21901</code> Details This setting is useful for debugging a request that isn't behaving as you expect.Setting the optional left argument of shared methods <code>Get</code>, <code>GetJSON</code>, <code>Do</code>, or <code>New</code> to <code>1</code> will have the same effect as setting <code>RequestOnly</code> as will the instance method <code>Show</code>."},{"location":"operational-settings/#secret","title":"<code>Secret</code>","text":"Description If set to 1 (the default), <code>HttpCommand</code> will suppress the display of credentials in the Authorization header, instead replacing them with <code>&amp;gt;&amp;gt;&amp;gt; Secret setting is 1 &amp;lt;&amp;lt;&amp;lt;</code>. This applies when using the <code>Show</code> or <code>Config</code> methods or setting <code>RequestOnly</code> to 1. <code>Secret</code> will not affect the request that is actually sent to the host. Default <code>1</code> Example(s) <pre>      h\u2190HttpCommand.New 'get' 'userid:password@someurl.com'      h.ShowGET / HTTP/1.1Host: someurl.comUser-Agent: Dyalog-HttpCommand/5.5.0Accept: /Accept-Encoding: gzip, deflateAuthorization: &gt;&gt;&gt; Secret setting is 1 &lt;&lt;&lt;      h.Secret\u21900      h.ShowGET / HTTP/1.1Host: someurl.comUser-Agent: Dyalog-HttpCommand/5.5.0Accept: /Accept-Encoding: gzip, deflateAuthorization: Basic dXNlcmlkOnBhc3N3b3Jk</pre> Details This setting is useful when doing an <code>HttpCommand</code> demonstration as it will avoid inadvertently displaying credentials in the APL session."},{"location":"operational-settings/#suppressheaders","title":"<code>SuppressHeaders</code>","text":"Description <code>SuppressHeaders</code> is a Boolean setting indicating whether <code>HttpCommand</code> should suppress the generation of its default HTTP headers for the request.<ul><li><code>1</code> - suppress the default headers</li><li><code>0</code> - generate the default headers Default <code>0</code> which means <code>HttpCommand</code> will generate its default headers Example(s) <code>h.SuppressHeaders\u21901</code> Details <code>HttpCommand</code> will only generate headers that you have not specified yourself. <code>HttpCommand</code> generates the following default headers:<ul><li><code>Host</code> - the host name in the URL. This header must be supplied.</li><li><code>User-Agent: Dyalog-HttpCommand/&amp;lt;version&amp;gt;</code></li><li><code>Accept: */*</code> By default, <code>HttpCommand</code> will accept any response type</li><li><code>Accept-Encoding: gzip, deflate</code> By default, <code>HttpCommand</code> will accept compressed response payloads</li><li><code>Authorization</code> set only if you provide HTTP Basic authentication credentials, or set <code>Auth</code> and  <code>AuthType</code></li><li><code>Cookie</code> - any saved cookies applicable to the request.</li><li><code>Content-Type</code> is conditionally set as described here</li></ul>Setting <code>SuppressHeaders\u21901</code> will suppress ALL <code>HttpCommand</code>-generated headers which means you will need to specify any necessary request headers yourself.  Individual headers can be suppressed by using the <code>SetHeader</code> instance method and assigning the header a value of <code>''</code>.Note: Conga will always insert a <code>Content-Length</code> header for any request that has a payload."},{"location":"operational-settings/#timeout","title":"<code>Timeout</code>","text":"Description The number of seconds that <code>HttpCommand</code> will count down to wait for a response from the host. If <code>Timeout</code> is positive, <code>HttpCommand</code> will exit with a return code of 100 (Timeout) if it has not received the complete response from the host before the countdown reaches 0.If <code>Timeout</code> is negative, <code>HttpCommand</code> will check if Conga has received any data and if so, will reset the countdown to <code>|Timeout</code>. Default <code>10</code> Example(s) <code>h.Timeout\u219030 \u235d wait up to 30 seconds before timing out</code><code>h.Timeout\u2190\u00af30 \u235d keep waiting as long as any data has arrived in a 30-second window</code> Details This is the setting to adjust if your request is timing out. <code>WaitTime</code> is an internal setting to adjust how long Conga will wait for a response. See Timeout and WaitTime for more information on the relationship between the <code>Timeout</code> and <code>WaitTime</code> settings."},{"location":"operational-settings/#translatedata","title":"<code>TranslateData</code>","text":"Description Set this to <code>1</code> to have <code>HttpCommand</code> attempt to convert the response payload for the following content types.<ul><li><code>'application/json'</code> - <code>HttpCommand</code> will use <code>\u2395JSON</code></li><li><code>'text/xml'</code> or <code>'application/xml'</code> - <code>HttpCommand</code> will use <code>\u2395XML</code></li></ul> Default <code>0</code> Example(s) <pre>      c\u2190HttpCommand.New 'get' 'https://api.github.com/users/dyalog'      c.TranslateData\u21900      50\u2191(\u2395\u2190c.Run).Data[rc: 0 | msg:  | HTTP Status: 200 \"OK\" | \u2374Data: 1306]{\"login\":\"Dyalog\",\"id\":4189495,\"node_id\":\"MDEyOk9y      c.TranslateData\u21901      (\u2395\u2190c.Run).Data[rc: 0 | msg:  | HTTP Status: 200 \"OK\" | \u2374Data: \u236c]#.[JSON object]</pre>"},{"location":"operational-settings/#shared-settings","title":"Shared Settings","text":"<p>Shared settings are set in the <code>HttpCommand</code> class and are used by all instances of <code>HttpCommand</code>.</p>"},{"location":"operational-settings/#debug","title":"<code>Debug</code>","text":"Description Set <code>Debug</code> to 1 to turn off <code>HttpCommand</code>'s error trapping. In this case if an error occurs, execution of <code>HttpCommand</code> will be suspended.  Set <code>Debug</code> to 2 to have <code>HttpCommand</code> stop just before sending the request to the host so that you can examine the request and <code>HttpCommand</code>'s current state.  Both of these settings can be useful for debugging. Default <code>0</code> Example(s) <pre>      c\u2190HttpCommand.New 'get' 'https://api.github.com/users/dyalog'      c.OutFile\u21900 \u235d invalid setting for OutFile      c.Debug\u21901      c.RunDOMAIN ERROR: Invalid file or directory nameHttpCmd[130] outFile\u2190\u220a1 \u2395NPARTS outFile                        \u2227      c.Debug\u21900      c.Run[rc: \u00af1 | msg: DOMAIN ERROR while trying to initialize output file '0' | HTTP Status:  \"\" | \u2374Data: 0]</pre>"},{"location":"proxy-settings/","title":"Proxy-related Settings","text":"<p>Proxy-related settings are settings you use to specify attributes in order to use a proxy server for your request. See Using a Proxy Server for more information on how to use a proxy server with <code>HttpCommand</code>.</p>"},{"location":"proxy-settings/#settings","title":"Settings","text":""},{"location":"proxy-settings/#proxyurl","title":"<code>ProxyURL</code>","text":"Description The URL for the proxy server which will relay the request. Default <code>''</code> Example(s) <code>h.ProxyURL\u2190'http://someproxyserver.com'</code> Details The format for <code>ProxyURL</code> is the same as <code>URL</code>."},{"location":"proxy-settings/#proxyheaders","title":"<code>ProxyHeaders</code>","text":"Description The HTTP headers, if any, specifically for the proxy server's <code>CONNECT</code> request to the host. Default <code>0 2\u2374\u2282''</code> Details The format for <code>ProxyHeaders</code> is the same as <code>Headers</code>.If you specify proxy authentication either as a part of <code>ProxyURL</code> or by setting <code>ProxyAuth</code> and <code>ProxyAuthType</code>, <code>HttpCommand</code> will create a <code>Proxy-Authorization</code> header."},{"location":"proxy-settings/#proxyauth","title":"<code>ProxyAuth</code>","text":"Description This setting is the authentication/authorization string appropriate for the authentication scheme specified in <code>ProxyAuthType</code>. Used along with <code>ProxyAuthType</code>, <code>ProxyAuth</code> is a shortcut for setting the proxy-authorization HTTP header for requests that require proxy authentication.  If <code>ProxyAuth</code> is non-empty, <code>HttpCommand</code> will create a <code>'proxy-authorization'</code> header and and set its value to <code>ProxyAuthType,' ',ProxyAuth</code>. If you happen set both <code>ProxyAuth</code> and a <code>proxy-authorization</code> header, <code>ProxyAuth</code> takes precedence. Default <code>''</code> Example(s) <code>h.ProxyAuth\u2190'id' 'password' \u235d HTTP Basic Authentication</code><code>h.ProxyAuth\u2190h.Base64Encode 'id:password' \u235d HTTP Basic Authentication</code> Details For HTTP Basic Authentication, <code>ProxyAuth</code> can be set to any of<ul><li> <code>HttpCommand.Base64Encode 'userid:password'</code></li><li><code>'userid' 'password'</code></li><li><code>'userid:password'</code></li></ul>For the latter two items above:<ul><li>it is permissible to not set <code>ProxyAuthType</code> as <code>HttpCommand</code> will infer the authorization scheme is HTTP Basic.</li><li><code>HttpCommand</code> will properly format and <code>Base64Encode</code> the header value.</li></ul>Alternatively, if you provide HTTP Basic credentials in <code>ProxyURL</code> as in <code>'http://username:password@someproxy.com'</code>, <code>HttpCommand</code> will automatically generate a proper <code>'proxy-authorization'</code> header."},{"location":"proxy-settings/#proxyauthtype","title":"<code>ProxyAuthType</code>","text":"Description This setting is used in conjunction with ProxyAuth and is a character vector indicating the authentication scheme. Three common authentication schemes are:<ul><li><code>'Basic'</code> for HTTP Basic Authentication</li><li><code>'Bearer'</code> for OAuth 2.0 token authentication</li><li><code>'Token'</code> for other token-based authentication schemes such as GitHub's Personal Access Token scheme</li></ul>Other values may be used as necessary for your particular HTTP request. Default <code>''</code> Example(s) <code>h.ProxyAuthType\u2190'Basic'</code> Details If <code>ProxyAuthType</code> is not set and <code>ProxyAuth</code> is set to either a character vector in the form <code>'userid:password'</code> or a 2-element vector of character vectors as in <code>('userid' 'password')</code> <code>HttpCommand</code> will infer the <code>ProxyAuthType</code> to be <code>'Basic'</code>."},{"location":"proxy/","title":"Using a Proxy Server","text":"<p>A proxy server is a server that acts as an intermediary between <code>HttpCommand</code> (which makes requests for resources) and the host server that provides those resources. Proxy servers can be used for a number of purposes including load balancing, privacy, and security.</p> <p>To use a proxy server with <code>HttpCommand</code>:</p> <ul> <li>Set <code>URL</code> to the address of the host server. Be sure to include the proper scheme (either <code>http://</code> or <code>https://</code>).  </li> <li>Set any other settings, for example <code>Headers</code>, <code>Params</code>, <code>Auth</code>/<code>AuthType</code>, etc., required for the host server.</li> <li>Set <code>ProxyURL</code> to the address of the proxy server.</li> <li>If the proxy server requires headers of its own, specify them in <code>ProxyHeaders</code>.</li> <li>If the proxy server itself requires authentication to connect to the host server, specify <code>ProxyAuth</code> and <code>ProxyAuthType</code> as appropriate.</li> </ul> <p>See Proxy-related Settings for more information on proxy settings.</p>"},{"location":"proxy/#examples","title":"Examples","text":"<p>The examples here were developed using a Squid proxy server running in a Docker container on a machine in the author's home network. Squid is a popular proxy server available as free software released under the GNU General Public License.</p> <p>This particular Squid server is configured to serve only HTTPS requests, such that even though the connection to the proxy server is initialized using HTTP, the connection to the host server is \"upgraded\" to use HTTPS. <code>HttpCommand</code> takes care of upgrading the connection. </p> <p>First, create a new instance of <code>HttpCommand</code> and, in this case, specify the <code>Command</code> as <code>'get'</code> and the <code>URL</code> as <code>'dyalog.com'</code>. Note that we did not specify a scheme in <code>URL</code>.</p> <pre><code>      h\u2190HttpCommand.New 'get' 'dyalog.com'\n</code></pre> <p>Now specify the URL for the proxy server. In this case, it's the IP address of the machine on the author's network and the default Squid port of 3128. Then run the request.</p> <pre><code>      h.ProxyURL\u2190'192.168.1.123:3128' \u235d set the proxy server address\n      \u22a2r\u2190h.Run\n[rc: 0 | msg: Proxy CONNECT response failed | HTTP Status: 403 \"Forbidden\" | \u2374Data: 3372]\n</code></pre> <p>The request failed when the proxy server tried to connect to dyalog.com.  Notice that there is some <code>Data</code> in the response; it turns out that Squid returns some HTML when something fails.  We can examine it using HTMLRenderer.</p> <pre><code>      'hr' \u2395WC 'HTMLRenderer' ('HTML' r.Data)\n</code></pre> <p> What went wrong? We didn't specify the scheme for dyalog.com. Let's try again...</p> <pre><code>      h.URL\u2190'https://dyalog.com'\n      h.Run\n[rc: 0 | msg:  | HTTP Status: 200 \"OK\" | \u2374Data: 23043]\n</code></pre> <p>With the proper scheme specified, the request succeeds.</p>"},{"location":"quickstart/","title":"Quick Start","text":""},{"location":"quickstart/#shortcut-methods","title":"Shortcut Methods","text":"<p><code>HttpCommand</code> has several shared \"shortcut\" methods to perform common operations. An overview of these methods is presented here. See the Reference section of the documentation for detailed information on all features of HttpCommand.</p> <p><code>HttpCommand</code>'s <code>Get</code>, <code>GetJSON</code>, <code>Do</code>, and <code>New</code> methods each accept a right argument which is one of:</p> <ul> <li>a vector of positional arguments</li> <li>a namespace containing named arguments. </li> </ul> <p>Positional arguments must be supplied in the position and order shown.  If you do not need to use an intermediate argument, you should supply <code>''</code>. For instance, a request that needs a <code>Headers</code> setting, but does not use a <code>Params</code> setting would be:</p> <pre><code>      HttpCommand.Get 'www.someurl.com' '' ('accept' 'image/png')\n</code></pre> <p>To use a namespace argument, create a namespace and assign the appropriate parameters for the request.  For example:</p> <pre><code>      ns\u2190\u2395NS ''\n      ns.(Command URL)\u2190'post' 'www.someurl.com'\n      ns.Params\u2190\u2395JSON \u237310\n      ns.Headers\u2190'Content-Type' 'application/json'\n      r\u2190HttpCommand.Do ns\n</code></pre>"},{"location":"quickstart/#get","title":"<code>Get</code>","text":"<p>Sends an HTTP request using the HTTP GET method. <code>r\u2190 [ro] HttpCommand.Get URL [Params [Headers]]</code> <code>r\u2190 [ro] HttpCommand.Get namespace</code></p>"},{"location":"quickstart/#getjson","title":"<code>GetJSON</code>","text":"<p>Sends an HTTP request to a JSON-based web service using the HTTP method you specify. Unless otherwise specified, request parameters and response payload are automatically converted between APL and JSON. <code>r\u2190 [ro] HttpCommand.GetJSON Command URL [Params [Headers]]</code> <code>r\u2190 [ro] HttpCommand.GetJSON namespace</code></p>"},{"location":"quickstart/#do","title":"<code>Do</code>","text":"<p>Sends an HTTP request using the HTTP method you specify. <code>r\u2190 [ro] HttpCommand.Do Command URL [Params [Headers]]</code> <code>r\u2190 [ro] HttpCommand.Do namespace</code></p>"},{"location":"quickstart/#new","title":"<code>New</code>","text":"<p>Creates a new instance of <code>HttpCommand</code>. <code>h\u2190 [ro] HttpCommand.New Command URL [Params [Headers]]</code> <code>h\u2190 [ro] HttpCommand.New namespace</code> Once the instance is created, additional settings can be assigned directly if necessary. Then use the <code>Run</code> method to send the request. <code>r\u2190 h.Run</code></p>"},{"location":"quickstart/#arguments","title":"Arguments","text":"Name Description Default Value <code>Command</code> The HTTP method to use <code>'GET'</code> <code>URL</code> The URL to which the request will be sent. If <code>URL</code> begins with <code>'https://'</code> <code>HttpCommand</code> will attempt create a secure connection to the host using either an anonymou)s certificate it creates or <code>Cert</code> if it is supplied <code>''</code> <code>Params</code> Any parameters that are to be sent with the request. <code>''</code> <code>Headers</code> Any HTTP headers (name/value pairs) to send with the request <code>''</code> <code>ro</code> \"Request Only\" - when set to 1, <code>HttpCommand</code> will compose and return the HTTP request that it would send to the host, but not actually send it.  This is useful for debugging to ensure your request is properly formed. <code>0</code> <p>See the Request-related Settings section for more detail on the arguments. </p> <p>Each of the above methods also accept 3 additional positional arguments, <code>[Cert [SSLFlags [Priority]]]</code>.  These arguments are used to specify settings for secure connections but are seldom used in practice because <code>HttpCommand</code> automatically supplies an anonymous certificate when using a secure connection. See Secure Connections and Conga-related Settings for more information.</p>"},{"location":"release-notes/","title":"Release Notes","text":""},{"location":"release-notes/#version-59","title":"Version 5.9","text":"<ul> <li>Allow <code>GetJSON</code> to take a simple character vector URL.</li> <li>Enable uploading of file by specifying using the content of the file and its intended name, rather than reading a file from disk.</li> <li>Create \"Method\" synonym for \"Command\"</li> </ul>"},{"location":"release-notes/#version-58","title":"Version 5.8","text":"<ul> <li>Added configuration setting <code>ChunkSize</code> to enable sending request payloads using \"chunked\" transfer-encoding.</li> </ul>"},{"location":"release-notes/#version-57","title":"Version 5.7","text":"<ul> <li>Added shared setting HeaderSubstitution to control if and how environment variables are injected into header names and/or values.</li> </ul>"},{"location":"release-notes/#version-56","title":"Version 5.6","text":"<ul> <li>Added support for content type \"multipart/form-data\". See Content Types.</li> </ul>"},{"location":"release-notes/#version-55","title":"Version 5.5","text":"<ul> <li>Added configuration setting <code>Secret</code> which will suppress the display of credentials in the authorization header. This is primarily so that one can demo using authenticated requests without having their credentials displayed in the session.</li> <li>Added ability for HTTP header names and values to reference environment variables by enclosing the environment variable name in % (e.g. <code>%MyPassword%</code>). This provides additional security by reducing the need to store sensitive or variable information inline. This is particularly useful when setting <code>Auth</code>.  </li> </ul>"},{"location":"release-notes/#version-54","title":"Version 5.4","text":"<ul> <li>Added function <code>IsOK</code> to result namespace.</li> </ul>"},{"location":"release-notes/#version-53","title":"Version 5.3","text":"<ul> <li>Added <code>BaseURL</code> to make it easier to issue multiple requests to a common host.</li> <li>Request header functions return shy result of new Headers array</li> <li>Better error trapping for invalidly formatted headers</li> </ul>"},{"location":"release-notes/#version-52","title":"Version 5.2","text":"<ul> <li>Added support to send zipped request payloads. See <code>UseZip</code> and <code>ZipLevel</code> for more information.</li> </ul>"},{"location":"release-notes/#version-51","title":"Version 5.1","text":"<ul> <li>Added proxy server support. See Proxy-related Settings and Using a Proxy Server.</li> <li> <p>Changed how <code>HttpCommand</code> attempts to determine payload Content-Type if the user has not specified it. Prior behavior was to always treat it as <code>x-www-form-urlencoded</code>. Now, <code>HttpCommand</code> will use a Content-Type of <code>application/json;charset=utf-8</code> if the payload either:</p> <ul> <li>is simple and looks like JSON</li> <li>is a set of name/value pairs</li> </ul> <p>To avoid having <code>HttpCommand</code> \"guess\" improperly, set <code>Content-Type</code> explicitly.</p> </li> <li> <p>If <code>Auth</code> is either a vector in form <code>'userid:password'</code> or a 2-element vector <code>('userid' 'password')</code> and <code>AuthType</code> is either unspecified or <code>'basic'</code>, <code>HttpCommand</code> will properly <code>Base64Encode</code> the credentials for HTTP Basic authentication.</p> </li> </ul>"},{"location":"release-notes/#version-50","title":"Version 5.0","text":"<ul> <li>The major version bump from 4 to 5 was due to:<ul> <li>swapping the meaning for the <code>Timeout</code> and <code>WaitTime</code> settings. Previously <code>Timeout</code> was used to indicate how long Conga's <code>Wait</code> function would wait for a response and <code>WaitTime</code> was how long <code>HttpCommand</code> would wait for a complete response before timing out.</li> <li>return codes and messages were normalized </li> </ul> </li> <li>Added new <code>Auth</code> and <code>AuthType</code> settings to more easily support token-based authentication.</li> <li>Removed half-implemented support for streaming</li> <li>Added <code>GetHeader</code> function to result namespace</li> <li>More complete setting checking</li> <li>Better handling of relative redirections</li> <li>New documentation</li> </ul>"},{"location":"request-settings/","title":"Request-related Settings","text":"<p>Request-related settings are settings you use to specify attributes of the HTTP request that <code>HttpCommand</code> will process.</p>"},{"location":"request-settings/#instance-settings","title":"Instance Settings","text":""},{"location":"request-settings/#command-or-method","title":"<code>Command</code> or <code>Method</code>","text":"Description The case-insensitive HTTP command (method) for the request. <code>Command</code> and <code>Method</code> are synonyms and either may be used. This setting is not limited to standard HTTP methods like GET, POST, PUT, HEAD, OPTIONS, and DELETE, but can be any string provided that the host has implemented support for it. Default <code>'GET'</code> Example(s) <code>h.Command\u2190'POST'</code><code>h.Method\u2190'delete'</code> Details <ul><li>The HTTP specification specifies that the HTTP method should be uppercase - <code>HttpCommand</code> will convert the method to uppercase prior to sending the request</li><li><code>Command</code> is the original setting used by <code>HttpCommand</code>. The <code>Method</code> synonym was introduced because \"method\" is the more common term in HTTP parlance</li><li><code>Command</code> and <code>Method</code> are kept in sync by <code>HttpCommand</code>; if you set both, the last one set will be what is used in the HTTP request.</li></ul>"},{"location":"request-settings/#url","title":"<code>URL</code>","text":"Description The URL for the request.The general format for <code>URL</code> is: <code>[scheme://][userinfo@]host[:port][/path][?query]</code>At a minimum the <code>URL</code> must specify the host. Default <code>''</code> Example(s) <code>h.URL\u2190'dyalog.com'</code><code>h.URL\u2190'https://user:pwd@adomain.com:8080/apath/endpoint?name=Drake</code> Details A URL has the general format:<code>[scheme://][userinfo@]host[:port][/path][?query]</code>So, a URL can be as simple as just a host name like <code>'dyalog.com'</code> or as complex as <code>'https://username:password@ducky.com:1234/?id=myid&amp;time=1200'</code>The only mandatory segment is the <code>host</code>; <code>HttpCommand</code> will infer or use default information when it builds the HTTP request to be sent.<ul><li>scheme - if supplied, it must be either <code>'http'</code>, or <code>'https'</code> for a secure connection.  If not supplied, <code>HttpCommand</code> will use <code>'http'</code> unless you have specified the default HTTPS port (443) or provided SSL certificate parameters.</li><li>userinfo - used for HTTP Basic authentication. HTTP Basic authentication has generally been deprecated, but may still be supported by some hosts. If userinfo is supplied, <code>HttpCommand</code> will create a proper Base64-encoded <code>authorization</code> header.</li><li>host - the host/domain for the request</li><li>port - if not supplied, <code>HttpCommand</code> will use the default HTTP port (80) unless the HTTPS scheme is used or certificate parameters are specified in which case the default HTTPS port (443) is used.</li><li>path - the location of the resource within the domain. If not supplied, it's up to the domain's server to determine the default path.</li><li>query - the query string for the request. If the HTTP method for the request is <code>'GET'</code> or <code>'HEAD'</code> and request parameters are specified in <code>Params</code>, <code>HttpCommand</code> will properly format them and append them to the query string. If you choose to supply query string parameters directly, they should be properly URLencoded. (see <code>URLEncode</code>).</li></ul>"},{"location":"request-settings/#params","title":"<code>Params</code>","text":"Description The parameters or payload, if any, for the request. <code>Params</code> can be a set of name/value pairs or a character vector that is properly formatted for the <code>ContentType</code> or <code>Command</code> of the request. See details for more information. Default <code>''</code> Example(s) The following examples are equivalent:<code>h.Params\u2190(('name' 'dyalog') ('age' 39))</code><code>ns\u2190\u2395NS '' \u22c4 ns.(name age)\u2190'dyalog' 39 \u22c4 h.Params\u2190ns</code> Details If <code>Params</code> is not empty, its interpretation is dependent on <code>Command</code> and the content type of the request. The content type is determined by the <code>ContentType</code> setting or the presence of a <code>content-type</code> header.If <code>Command</code> is <code>'GET'</code> or <code>'HEAD'</code>, the request will generally not have a payload in the message body (and hence no specified content type) and <code>Params</code> will be URLEncoded if necessary and appended to the query string of <code>URL</code>.If <code>Command</code> is neither <code>'GET'</code> nor <code>'HEAD'</code> and no content type has been specified, <code>HttpCommand</code> will attempt to infer the content type as follows:<ul><li>If <code>Params</code> is a simple character vector and looks like JSON <code>HttpCommand</code> will set the content type as <code>'application/json'</code>; otherwise it will set the content type to <code>`application/x-www-form-urlencoded'</code>. <code>Params</code> will then be processed as described below.</li><li>Otherwise <code>HttpCommand</code> will set the content type to <code>'application/json'</code> and <code>Params</code> will be processed as described below.</li></ul>If the content type is specified, <code>Params</code> is processed based on the content type and inserted as the payload of the request.  If the content type is:<ul><li><code>'x-www-form-urlencoded'</code>: <code>Params</code> will be formatted using <code>URLEncode</code> unless it already composed completely of valid URLEncoding characters.</li><li><code>'application/json'</code>:<ul><li>If <code>Params</code> is a character vector that is a valid JSON representation, it is left unaltered.</li><li>Otherwise <code>Params</code> will be converted to JSON format using <code>1 \u2395JSON</code>.</li><li>In the case where <code>Params</code> is an APL character vector that is also valid JSON, you should convert it to JSON prior to setting <code>Params</code>. For example, if you have the character vector <code>'[1,2,3]'</code> and you want it treated as a string in JSON and not the numeric array <code>[1,2,3]</code>, you should process it yourself using <code>1 \u2395JSON</code>.</li></ul></li><li>For any other content type, it is the responsibility of the user to format <code>Params</code> appropriately for that content type.</li></ul>"},{"location":"request-settings/#headers","title":"<code>Headers</code>","text":"Description The HTTP headers for the request. Specified as one of:<ul><li>a set of name/value pairs</li><li>a character vector of of one or more name/value pairs in the form <code>'name:value'</code> separated by CRLF  (<code>\u2395UCS 13 10</code>).</li><li>a vector of character vectors, each in the form <code>'name:value'</code></li> Default By default, <code>HttpCommand</code> will create the following headers if you have not supplied them yourself:<code>Host:</code>the host specified in <code>URL</code><code>User-Agent: Dyalog/HttpCommand</code> HttpCommandVersionNumber<code>Accept: */*</code>If the request content type has been specified, <code>HttpCommand</code> will insert an appropriate <code>content-type</code> header. If the request has content in the request payload, Conga will automatically supply a <code>content-length</code> header. Example(s) The following examples are equivalent:<code>h.Headers\u2190'accept' 'text/html' 'content-type' 'test/plain'</code><code>h.Headers\u2190('accept' 'text/html')('content-type' 'test/plain')</code><code>h.Headers\u2190'accept:text/html',(\u2395UCS 13 10),'content-type:text/plain'</code><code>h.Headers\u2190('accept:text/html')('content-type:text/plain')</code>"},{"location":"request-settings/#contenttype","title":"<code>ContentType</code>","text":"Description This setting is a convenient shortcut for setting the <code>content-type</code> HTTP header of the request. If you happen set both <code>ContentType</code> and a <code>content-type</code> header, <code>ContentType</code> takes precedence. Default <code>''</code> Example(s) <code>h.ContentType\u2190'application/json; charset=UTF-8'</code> Details See Content Types for additional information."},{"location":"request-settings/#auth","title":"<code>Auth</code>","text":"Description This setting is the authentication/authorization string appropriate for the authentication scheme specified in <code>AuthType</code>. Used along with <code>AuthType</code>, <code>Auth</code> is a shortcut for setting the authorization HTTP header for requests that require authentication.  If <code>Auth</code> is non-empty, <code>HttpCommand</code> will create an <code>'authorization'</code> header and and set its value to <code>AuthType: Auth</code>. If you happen set both <code>Auth</code> and an <code>'authorization'</code> header, <code>Auth</code> takes precedence.You may specify an environment variable whose value is to be used for <code>Auth</code> by enclosing the environment variable name according to the <code>HeaderSubstitution</code> setting.. This helps avoid the need to hardcode credentials in your code. Default <code>''</code> Example(s) <code>h.Auth\u2190'my-secret-token'</code><code>h.Auth\u2190h.Base64Encode 'userid:password' \u235d HTTP Basic Authentication</code><code>h.Auth\u2190'userid' 'password' \u235d HTTP Basic Authentication</code> Details For HTTP Basic Authentication, <code>Auth</code> can be set to any of<ul><li> <code>HttpCommand.Base64Encode 'userid:password'</code></li><li><code>'userid' 'password'</code></li><li><code>'userid:password'</code></li></ul>For the latter two items above:<ul><li>it is permissible to not set <code>AuthType</code> as <code>HttpCommand</code> will infer the authorization scheme is HTTP Basic.</li><li><code>HttpCommand</code> will properly format and <code>Base64Encode</code> the header value.</li></ul>Alternatively, if you provide HTTP Basic credentials in the <code>URL</code> as in <code>'https://username:password@someurl.com'</code>, <code>HttpCommand</code> will automatically generate a proper <code>'authorization'</code> header."},{"location":"request-settings/#authtype","title":"<code>AuthType</code>","text":"Description This setting is used in conjunction with <code>Auth</code>) and is a character vector indicating the authentication scheme. Three common authentication schemes are:<ul><li><code>'Basic'</code> for HTTP Basic Authentication</li><li><code>'Bearer'</code> for OAuth 2.0 token authentication</li><li><code>'Token'</code> for other token-based authentication schemes such as GitHub's Personal Access Token scheme</li></ul>Other values may be used as necessary for your particular HTTP request. Default <code>''</code> Example(s) <code>h.AuthType\u2190'Bearer'</code> Details If <code>AuthType</code> is not set and <code>Auth</code> is set to either a character vector in the form <code>'userid:password'</code> or a 2-element vector of character vectors as in <code>('userid' 'password')</code> <code>HttpCommand</code> will infer the <code>AuthType</code> to be <code>'Basic'</code>.Note: While authentication schemes are supposed to be case insensitive, some servers are not so forgiving and require the authentication scheme to be appropriately cased."},{"location":"request-settings/#usezip","title":"<code>UseZip</code>","text":"Description <code>UseZip</code> controls whether the request payload is zipped. Valid values are:<ul><li><code>0</code> = do not zip the request payload.</li><li><code>1</code> = use gzip encoding</li><li><code>2</code> = use deflate encoding</li></ul> Default <code>0</code> Details The <code>ZipLevel</code> setting controls the level of compression when using gzip or deflate encoding."},{"location":"request-settings/#ziplevel","title":"<code>ZipLevel</code>","text":"Description <code>ZipLevel</code> controls the level of compression when using gzip or deflate encoding. Valid values are <code>0</code> through <code>9</code>. Higher values use a higher degree of compression but also consume more CPU. Default <code>1</code> Details The <code>UseZip</code> setting controls which compression algorithm, if any, is used."},{"location":"request-settings/#baseurl","title":"<code>BaseURL</code>","text":"Description <code>BaseURL</code> can be used when making multiple requests to similar-named endpoints. Set <code>BaseURL</code> to the common root of the URLs that you will be using and then set <code>URL</code> to the remaining portion of the specific URL. <code>BaseURL</code> will be prepended to <code>URL</code> to form the complete URL for the request.  Subsequent calls to other endpoints can be made by setting <code>URL</code>. Default <code>''</code> Example(s) <pre>      h.BaseURL\u2190'https://api.github.com/'      h.URL\u2190'orgs/Dyalog/repos'      h.Run[rc: 0 | msg:  | HTTP Status: 200 \"OK\" | \u2262Data: 153884]      h.URL\u2190'orgs/Dyalog/members'      h.Run[rc: 0 | msg:  | HTTP Status: 200 \"OK\" | \u2262Data: 1911]      h.BaseURL\u2190'https://api.github.com/repos/Dyalog/HttpCommand/'      h.URL\u2190'commits'      h.Run[rc: 0 | msg:  | HTTP Status: 200 \"OK\" | \u2262Data: 98869]      h.URL\u2190'branches'      h.Run[rc: 0 |  msg:  | HTTP Status: 200 \"OK\" | \u2262Data: 867]</pre> Details If <code>URL</code> begins with <code>'http://'</code> or <code>'https://'</code>, <code>BaseURL</code> will not be prepended to <code>URL</code>."},{"location":"request-settings/#cookies","title":"<code>Cookies</code>","text":"Description <code>Cookies</code> is a vector of namespaces, each containing a representation of an HTTP cookie. It contains cookies sent by the host that may be used in a series of requests to the same host. This setting should be considered read-only. Default <code>''</code> Example(s) <pre>      (c \u2190 HttpCommand.New 'get' 'github.com').Run[rc: 0 | msg:  | HTTP Status: 200 \"OK\" | \u2374Data: 299959]      \u2262 c.Cookies3      \u2191c.Cookies.(Name Host ('DD-MMM-YYYY'(1200\u2336)Creation)) _gh_sess   github.com   05-AUG-2022 _octo      github.com   05-AUG-2022 logged_in  github.com   05-AUG-2022</pre>"},{"location":"request-settings/#chunksize","title":"<code>ChunkSize</code>","text":"Description A non-zero <code>ChunkSize</code> will make <code>HttpCommand</code> use \"chunked\" transfer-encoding and send the payload of the request in chunks of <code>ChunkSize</code> bytes. Default <code>0</code> meaning do not use \"chunked\" transfer-encoding Details Using a non-zero <code>ChunkSize</code> will cause <code>HttpCommand</code> to format the payload of the request according to the specification for \"chunked\" transfer-encoding. This involves breaking the payload into <code>ChunkSize</code>-sized chunks each preceded by the hexadecimal length of the chunk. Note: In the current implementation, the entire, reformatted, payload is sent in a single request to the host."},{"location":"request-settings/#shared-settings","title":"Shared Settings","text":""},{"location":"request-settings/#headersubstitution","title":"<code>HeaderSubstitution</code>","text":"Description In the following text, the phrase \"environment variable\" is taken to mean either an environment variable or a Dyalog configuration setting as both of these are retrieved using the same technique (<code>2 \u2395NQ # 'GetEnvironment')</code>.<code>HeaderSubstitution</code> provides a shorthand technique to inject environment variable values into the request's HTTP header names and values. If <code>HeaderSubstitution</code> is <code>''</code> (the default), no substitution is done. When <code>HeaderSubstitution</code> has a non-empty value, it denotes the beginning and ending delimiteres between which you may use the name of an environment variable. If <code>HeaderSubstitution</code> is a single character, that character is used as both the beginning and ending delimiter. You may also use the delimiters in the <code>Auth</code> setting as <code>Auth</code> is used to format the HTTP Authorization header. Default <code>''</code> Example(s) For these examples, assume we have an environment variable named \"MyVariable\" which has a value of <code>'0123456789'</code>.<pre>      HttpCommand.HeaderSubstitution\u2190'' \u235d no substitutions done      h\u2190HttpCommand.New 'get' 'someurl.com'      'name' h.SetHeader '%MyVariable%'      h.ShowGET / HTTP/1.1name: %MyVariable%Host: someurl.comUser-Agent: Dyalog-HttpCommand/5.7.0Accept: /Accept-Encoding: gzip, deflate</pre>Now let's specify a delimiter...<pre>      HttpCommand.HeaderSubstitution\u2190'%' \u235d specify a delimiter      h.ShowGET / HTTP/1.1name: 0123456789Host: someurl.comUser-Agent: Dyalog-HttpCommand/5.7.0Accept: /Accept-Encoding: gzip, deflate</pre>The delimiters do not have to be single characters...<pre>      HttpCommand.HeaderSubstitution\u2190'env:[' ']'      'name' h.SetHeader 'env:[MyVariable]'      h.ShowGET / HTTP/1.1name: 0123456789Host: someurl.comUser-Agent: Dyalog-HttpCommand/5.7.0Accept: /Accept-Encoding: gzip, deflate</pre>Alternatively, you can use the <code>GetEnv</code> method to retrieve environment variables and/or Dyalog configuration settings.<pre>      'name' h.SetHeader GetEnv 'MyAPIKey'</pre> Details Many web services require an API key. It is generally considered bad practice to hard-code such API keys in your application code. Storing the keys as environment variables allows them to be retrieved more securely.If no environment variable matches the name between the delimiters, no substitution is performed."},{"location":"request-settings/#namevalue-pairs","title":"Name/Value Pairs","text":"<p><code>Params</code>, for an appropriate content type, and <code>Headers</code> can be specified as name/value pairs. <code>HttpCommand</code> gives you some flexibility in how you specify name/value pairs. You may use:</p> <ul> <li>A vector of depth <code>2</code> or <code>\u00af2</code> with an even number of elements. <code>('name' 'dyalog' 'age' 39)</code></li> <li>A vector of 2-element vectors, <code>HttpCommand</code> will treat each sub-vector as a name/value pair. <code>(('name' 'dyalog') ('age' 39))</code></li> <li>A 2-column matrix where each row represents a name/value pair. <code>2 2\u2374'name' 'dyalog' 'age' 39</code></li> <li>A reference to a namespace, <code>HttpCommand</code> will treat the variables and their values in the namespace as name/value pairs. <code>ns\u2190\u2395NS '' \u22c4 ns.(name age)\u2190'dyalog' 39</code>Note that the names will be alphabetical in the formatted output.</li> </ul>"},{"location":"result-operational/","title":"Operational Elements","text":"<p>For the purposes of this document, we will refer to <code>result</code> as the result namespace returned by <code>Run</code> when <code>RequestOnly=0</code>. <code>result</code> contains information about the request and the response, if any, from the host. Some settings from the request are copied into <code>result</code>.</p>"},{"location":"result-operational/#rc","title":"<code>rc</code>","text":"<p>The operational return code. This indicates if <code>HttpCommand</code> was able to form and send an HTTP request and process the response from the host. The sign of <code>rc</code> indicates:</p> <ul> <li><code>rc=0</code> no operational error occurred.</li> <li><code>rc&lt;0</code> an operational error occurred.</li> <li><code>rc&gt;0</code> a Conga error occurred.</li> </ul> <p><code>rc</code> is further described in Messages and Return Codes. To verify that an HTTP request was successful, first check that <code>result.rc=0</code> and then that <code>result.HttpStatus</code> is a HTTP status code you would expect from the host.</p>"},{"location":"result-operational/#msg","title":"<code>msg</code>","text":"<p>The operational status message. If <code>rc=0</code>, <code>msg</code> will generally be empty (<code>''</code>).  <code>msg</code> will contain (hopefully) helpful information as to the nature of the error or condition. <code>msg</code> is further described in Messages and Return Codes.</p>"},{"location":"result-operational/#isok","title":"<code>\u2207IsOK</code>","text":"<p><code>IsOK</code> is a function included in the result namespace that makes it easier to check if the HTTP request was successful by checking both that <code>rc=0</code> and <code>HttpStatus</code> is a 200-series value. If the request was successful, <code>IsOK</code> will return <code>1</code>, otherwise it will return <code>0</code>.</p> Syntax <code>bool \u2190 IsOK</code> Example(s) <pre>      result\u2190HttpCommand.Get 'dyalog.com'      result.IsOK1      result\u2190HttpCommand.Get 'blooofo.com' \u235d domain does not exist      result.IsOK0"},{"location":"result-operational/#elapsed","title":"<code>Elapsed</code>","text":"<p>The number of millseconds that the request took to process.</p>"},{"location":"result-operational/#outfile","title":"<code>OutFile</code>","text":"<p><code>OutFile</code> is copied from the <code>OutFile</code> setting so that, if the response payload is written to file, the result namespace has a record of the file name.</p>"},{"location":"result-operational/#byteswritten","title":"<code>BytesWritten</code>","text":"<p>If <code>OutFile</code> is non-empty, and the HTTP request was successful, <code>BytesWritten</code> is the number of bytes written to that file named by <code>OutFile</code>.  Otherwise, <code>BytesWritten</code> is set to <code>\u00af1</code>. </p>"},{"location":"result-request/","title":"Request Elements","text":"<p>For the purposes of this document, we will refer to <code>result</code> as the result namespace returned by <code>Run</code> when <code>RequestOnly=0</code>. <code>result</code> contains information about the request and the response, if any, from the host.</p> <p>Request-related elements in the result namespace are either copied or derived from certain request settings. Not all request settings are included in the result namespace, but they are retained in the <code>HttpCommand</code> instance. </p>"},{"location":"result-request/#command","title":"<code>Command</code>","text":"<p>The case-insensitive HTTP command (method) for the request.</p>"},{"location":"result-request/#host","title":"<code>Host</code>","text":"<p>The final host to which the HTTP request was sent.  This may be different from the host specified in the <code>URL</code> setting if the request was redirected.</p>"},{"location":"result-request/#path","title":"<code>Path</code>","text":"<p>The final path for the requested resource.  This may be different from the resource specified in the <code>URL</code> setting if the request was redirected.</p>"},{"location":"result-request/#port","title":"<code>Port</code>","text":"<p>The port that the request was sent to. If the request was redirected, this may be different from the port specified in the <code>URL</code> setting or the original default port if no port was specified in <code>URL</code>.</p>"},{"location":"result-request/#secure","title":"<code>Secure</code>","text":"<p>A Boolean indicating whether the final request was sent using HTTPS. If the request was redirected, this may be reflect a different secure state from the original request. </p>"},{"location":"result-request/#url","title":"<code>URL</code>","text":"<p>The final URL of the HTTP request.  If the request was redirected, this may be different from the <code>URL</code> setting.</p>"},{"location":"result-response/","title":"Response Elements","text":"<p>For the purposes of this document, we will refer to <code>result</code> as the result namespace returned by <code>Run</code> when <code>RequestOnly=0</code>. <code>result</code> contains information about the request and the response, if any, from the host. Some settings from the request are copied into <code>result</code>.</p>"},{"location":"result-response/#httpstatus","title":"<code>HttpStatus</code>","text":"<p>The integer HTTP response status code returned by the host. Status codes are split into specific ranges:</p> <ul> <li>1xx: Informational - Request received, continuing process</li> <li>2xx: Success - The action was successfully received, understood, and accepted</li> <li>3xx: Redirection - Further action must be taken in order to complete the request</li> <li>4xx: Client Error - The request contains bad syntax or cannot be fulfilled</li> <li>5xx: Server Error - The server failed to fulfill an apparently valid request</li> </ul>"},{"location":"result-response/#httpmessage","title":"<code>HttpMessage</code>","text":"<p>A character vector indicating the HTTP message coresponding to the HTTP status code.   </p>"},{"location":"result-response/#httpversion","title":"<code>HttpVersion</code>","text":"<p>A character vector indicating the HTTP version used by the host. </p>"},{"location":"result-response/#data","title":"<code>Data</code>","text":"<p>In most cases <code>Data</code> will be the response's character vector payload. <code>Data</code> is not populated if the <code>OutFile</code> setting is set - the payload is instead written, as received, to file.</p> <p>The <code>Content-Type</code> response header will indicate the type of data in the payload and the <code>Content-Encoding</code> header, if present, will indicate the compression scheme used if the payload is compressed.</p> <p>If the response payload is compressed using 'deflate' or 'gzip' encoding <code>HttpCommand</code> will uncompress the payload.</p> <p>If the <code>Content-Type</code> header indicates that the UTF-8 character set is used, <code>HttpCommand</code> will convert the payload to UTF-8. </p> <p><code>HttpCommand</code> can translate certain content types into a format that may be more useful in the APL environment.  If the TranslateData is set to <code>1</code>, <code>HttpCommand</code> will attempt to translate <code>application/json</code> content using <code>\u2395JSON</code>, and  <code>text/xml</code> and <code>application/xml</code> using <code>\u2395XML</code>.</p>"},{"location":"result-response/#headers","title":"<code>Headers</code>","text":"<p><code>Headers</code> is the 2-column matrix of response header name/value pairs.</p> <p>Note: There are two sets of headers in an HTTP request/response transaction - the request headers that are sent to the host, and the response headers that are sent back from the host.</p>"},{"location":"result-response/#getheader","title":"<code>\u2207GetHeader</code>","text":"<p><code>GetHeader</code> is a utility function included in the result namespace that makes it easier to extract response header values. <code>GetHeader</code> accommodates the case-insensitive nature of header names. If the header does not exist, <code>GetHeader</code> returns <code>''</code>.</p> Syntax <code>value \u2190 {headers} result.GetHeader name</code> <code>name</code> A character vector header name, or vector of header names <code>headers</code> The optional header array to extract from. By default, <code>GetHeader</code> will use the response's <code>Headers</code> array. You may also pass the <code>Headers</code> element of a redirection (see Redirections. <code>value</code> The header value(s) corresponding to the header names specified in <code>name</code>, or the empty vector <code>''</code> for header name(s) that don't exist. Example(s) <pre>      result.GetHeader 'content-type'text/html; charset=utf-8      \u235d Note: there is no 'fred' header      result.GetHeader 'content-type' 'fred' 'server'\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502text/html; charset=utf-8\u2502\u2502Apache/2.4.18 (Ubuntu)\u2502\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518"},{"location":"result-response/#cookies","title":"<code>Cookies</code>","text":"<p><code>Cookies</code> is a vector of namespaces, one per cookie set by the host. <code>Cookies</code> are frequently used to maintain a state between the client (<code>HttpCommand</code>) and the host. When using an instance of <code>HttpCommand</code>, the instance will retain a copy of <code>Cookies</code> and apply appropriate cookies to subsequent requests.</p>\n<p>The sample below shows the names and first 50 characters of the values of 3 cookies returned by GitHub.com. The first cookie holds the session ID.</p>\n<pre><code>      'Name' 'Value'\u236a\u2191(HttpCommand.Get'github.com').Cookies.(Name((50\u2218\u230a\u2218\u2262\u2191\u22a2)Value))\n Name       Value                                              \n _gh_sess   A0ZezbnUgtkiq1lBubH7mrXclGhvhcCFKRUbAb045wGNT2Hlma \n _octo      GH1.1.809596667.1660313286                         \n logged_in  no                                                 \n\n</code></pre>"},{"location":"result-response/#peercert","title":"<code>PeerCert</code>","text":"<p>If the connection to the host uses HTTPS as its protocol which means it is a secure connection, then <code>PeerCert</code> contains the X509 certificate of the host.</p>\n<pre><code>      \u2283(HttpCommand.Get 'dyalog.com').PeerCert.Formatted.(Issuer Subject)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502C=US,O=Let's Encrypt,CN=R3\u2502CN=*.dyalog.com\u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"result-response/#redirections","title":"<code>Redirections</code>","text":"<p><code>Redirections</code> is a vector of namespaces, one per HTTP redirect response from the host. An HTTP redirect is a special kind of response from the host that directs the client to another location for the resource that's being requested. When a web browser like Google Chrome or Mozilla Firefox receives a redirect response, they automatically reissue the request for the resource at the new location. The new location is specified in the response's <code>Location</code> header.  A redirection can itself be redirected and can even result in an infinite redirection loop. <code>HttpCommand</code> will also follow the redirections, but it also retains information about each redirection in <code>Redirections</code>. The <code>MaxRedirections</code> setting can limit the number of redirections that <code>HttpCommand</code> will follow.</p>\n<p>Each namespace in <code>Redirections</code> has the following elements:</p>\n\n\n\n<code>HttpStatus</code>\nThe HTTP status for the request.\n\n\n<code>HttpMessage</code>\nThe corresponding HTTP status message for the request.\n\n\n<code>HttpVersion</code>\nThe HTTP version that was used in sending the response.\n\n\n<code>Headers</code>\nThe headers that were sent by the host. There should be a <code>'Location'</code> header that indicates the redirection location for the requested resource.\n\n\n<code>URL</code>\nThe URL that was used and produced this redirection.\n\n\n\n<p>The example below uses <code>https://httpbin.org/relative-redirect/2</code>](https://httpbin.org/relative-redirect/2) to redirect the request twice.</p>\n<pre><code>      \u22a2result \u2190 HttpCommand.Get 'https://httpbin.org/relative-redirect/2'\n[rc: 0 | msg:  | HTTP Status: 200 \"OK\" | \u2374Data: 266]\n</code></pre>\n<p>Examining the information in the 2 redirections shows that our original <code>URL</code>, <code>'httpbin.org/relative-redirect/2'</code>, was redirected to <code>/relative-redirect/1</code> which was subsequently redirected to <code>/get</code>.</p>\n<pre><code>      'URL' 'Was redirected to'\u236aresult.(Redirections.URL,\u236aRedirections.Headers GetHeader\u00a8\u2282'location')\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502URL                                    \u2502Was redirected to   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502https://httpbin.org/relative-redirect/2\u2502/relative-redirect/1\u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502httpbin.org/relative-redirect/1        \u2502/get                \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"secure/","title":"Secure Communications","text":""},{"location":"secure/#https","title":"HTTPS","text":"<p>In the HTTP world, secure communications is accomplished by using the HTTPS protocol which uses Transport Layer Security (TLS) or Secure Sockets Layer (SSL) to encrypt communications. Both the client (<code>HttpCommand</code>) and the server use certificates for secure communications. The certificates serve a couple of purposes:</p> <ul> <li>They provide bi-directional encryption of the data sent across the link.</li> <li>They can help provide authentication of the client and/or the server. </li> </ul>"},{"location":"secure/#httpcommand-behavior","title":"<code>HttpCommand</code> Behavior","text":"<p><code>HttpCommand</code> attempts to figure out if the connection is going to use HTTPS and what port to use based on:</p> <ul> <li>The protocol, if any, that you specify in <code>URL</code>.</li> <li>The port, if any, that you specify in <code>URL</code>.    </li> <li>Whether you have provided certificate information for the request.</li> </ul> <p><code>HttpCommand</code> will use HTTPS if</p> <ul> <li>You provide certificate information by using the <code>Cert</code> or <code>PublicCertFile</code> and <code>PrivateKeyFile</code> settings.  </li> <li>You specify <code>'https'</code> as the protocol.</li> <li>You don't specify a protocol, but do specify a port in <code>URL</code> of 443. </li> </ul> <p><code>HttpCommand</code> will use port 443 if you do not specify a port in <code>URL</code> and <code>HttpCommand</code> has otherwise determined from the above criteria that the connection should use HTTPS.</p>"},{"location":"secure/#encrypted-communications","title":"Encrypted Communications","text":"<p>In most cases, the use of certificates is hidden when using the HTTPS protocol because <code>HttpCommand</code> will automatically generate an \"anonymous\" certificate.  This is sufficient to provide secure, encrypted, communications.</p>"},{"location":"secure/#authentication","title":"Authentication","text":"<p>Certificates can provide information about the identity of what is at the other end of the communications link. </p>"},{"location":"secure/#server-identity","title":"Server Identity","text":"<p>When <code>HttpCommand</code> uses HTTPS, the <code>PeerCert</code> element of the result namespace contains the server's certificate.  This can be used to validate the server is what you think it is. Most certificates will have a \"chain\" of parent certificates that show who issued the peer's certificate and any intermediate certificates.  If the final certificate in the chain is issued by a Trusted Root Certificate Authority the domain listed in the certificate has undergone validation by an entity that you can trust. </p> <p>Dyalog.com provides us with an example of a certificate chain:</p> <pre><code>      \u22a2 r \u2190 HttpCommand.Get 'https://dyalog.com'\n[rc: 0 | msg:  | HTTP Status: 200 \"OK\" | \u2374Data: 23127]\n      r.PeerCert  \u235d Dyalog.com's certificate\n #.HttpCommand.[X509Cert]\n\n      r.PeerCert.Chain\n  #.HttpCommand.[X509Cert]  #.HttpCommand.[X509Cert]  #.HttpCommand.[X509Cert]  \n\n     \u236a\u2283r.PeerCert.Chain.Formatted.(Subject,' from ',Issuer)\n CN=*.dyalog.com from C=US,O=Let's Encrypt,CN=R3                                                              \n C=US,O=Let's Encrypt,CN=R3 from C=US,O=Internet Security Research Group,CN=ISRG Root X1                      \n C=US,O=Internet Security Research Group,CN=ISRG Root X1 from O=Digital Signature Trust Co.,CN=DST Root CA X3 \n</code></pre> <p>This shows that the certificate for <code>'*.dyalog.com'</code> was issued by Let's Encrypt whose certificate was issued by Internet Security Research Group whose certificate was issued by Digital Signature Trust Co and Digital Signature Trust Co is a Trusted Root Certificate Authority.</p> <p>The good news is that in most cases you'll never need to look at the certificate chain, but it is available in the rare event that you need to verify the server you're connecting to.</p>"},{"location":"secure/#client-identity","title":"Client Identity","text":"<p>If the service you connect to uses client certificate authentication, you will need to use a certificate when sending your HTTP request. Generally this certificate will be issued by the service provider.  A certificate consists of two parts - a public certificate file and a private key file. <code>HttpCommand</code> allows you to specify the certificate in two ways:</p> <ul> <li>provide the file names for the public certificate file and private key file in the <code>PublicCertFile</code> and <code>PrivateKeyFile</code> settings respectively.</li> <li>specify the <code>Cert</code> setting as either:<ul> <li>An instance of Conga's <code>X509Cert</code> class</li> <li>a 2-element vector of the names of the public certificate and private key files  </li> </ul> </li> </ul>"},{"location":"secure/#other-https-settings","title":"Other HTTPS Settings","text":"<p><code>HttpCommand</code> has two more settings <code>SSLFlags</code> and <code>Priority</code>. The default values for these settings will suffice in almost all cases.  If you need to use something other than the default, refer to the Conga User Guide.</p>"},{"location":"secure/#further-reading","title":"Further Reading","text":"<p>See the Conga User Guide Chapter 5 for more information on Conga's secure communications and <code>X509Cert</code>. </p>"},{"location":"shortcut-methods/","title":"Shortcut Methods","text":"<p>These \"shortcut\" methods make it easier to issue HTTP requests or create an instance of <code>HttpCommand</code>.</p>"},{"location":"shortcut-methods/#get-issue-an-http-get-request","title":"<code>Get</code> - issue an HTTP GET request","text":"<p><code>Get</code> is probably <code>HttpCommand</code>'s most-used feature.  It issues an HTTP GET request and returns the response from the server. It can be used for many purposes including interacting with web services, downloading files, and returning the contents of web pages.</p> Syntax <code>r \u2190{RequestOnly} HttpCommand.Get args</code> <code>args</code> Either<ul><li>a vector of positional settings (only <code>URL</code> is required)<code>URL</code><code>Params</code><code>Headers</code><code>Cert</code><code>SSLFlags</code><code>Priority</code>Intermediate positional parameters that are not used should be set to <code>''</code></li><li>A namespace containing named variables for the settings for the request.<code>(args \u2190 \u2395NS '').(URL Headers) \u2190 'someurl.com' ('header1' 'value1')</code></li></ul> <code>RequestOnly</code> (optional) A Boolean indicating:<ul><li><code>0</code> - (default) send the HTTP request and return the response result.<li><code>1</code> - return the formatted HTTP request that HttpCommand would send if <code>RequestOnly</code> was <code>0</code></li> <code>r</code> If <code>RequestOnly</code> is<ul><li><code>0</code> - a namespace containing the request response.</li><li><code>1</code> - the formatted HTTP request that <code>HttpCommand</code> would send if <code>RequestOnly</code> was <code>0</code>. Example(s) <pre>      args \u2190 \u2395NS ''      args.URL \u2190 'httpbin.org'      args.Params \u2190 ('name' 'Donald')('species' 'duck')      HttpCommand.Get args[rc: 0 | msg:  | HTTP Status: 200 \"OK\" | \u2374Data: 339]      HttpCommand.Get 'httpbin.org/get' (('name' 'Donald')('species' 'duck'))[rc: 0 | msg:  | HTTP Status: 200 \"OK\" | \u2374Data: 339]      1 HttpCommand.Get argsGET /get?name=Donald&amp;species=duck HTTP/1.1Host: httpbin.orgUser-Agent: Dyalog-HttpCommand/5.0.2Accept: /"},{"location":"shortcut-methods/#getjson-issue-a-request-to-a-json-based-web-service","title":"<code>GetJSON</code> - issue a request to a JSON-based web service","text":"<p><code>GetJSON</code> is used to interact with web services that use JSON for their request and response payloads. It was originally developed as a convenient way to interact with Jarvis, Dyalog's JSON and REST Service framework. Conveniently, it turns out that there are many web services, including GitHub and Twitter, that use JSON as well. </p>\n<p>When <code>Command</code> is something other than <code>GET</code> or <code>HEAD</code>, <code>GetJSON</code> will automatically convert APL <code>Params</code> into JSON format. For <code>GET</code> and <code>HEAD</code>, <code>HttpCommand</code> will URLEncode <code>Params</code> in the query string of the <code>URL</code>. The rationale behind this is that <code>GET</code> and <code>HEAD</code> requests should not have content; therefore <code>Params</code> should be included in the query string of <code>URL</code> and it doesn't make a lot of sense to include JSON in the query string.  If you really need JSON in the query string, you can use <code>\u2395JSON</code> to convert <code>Params</code>.</p>\n<p><code>GetJSON</code> will attempt to convert any JSON response payload into its equivalent APL representation. </p>\n\n\n\nSyntax\n<code>r \u2190{RequestOnly} HttpCommand.GetJSON args</code>\n\n\n<code>args</code>\nOne of:<ul><li>a simple character vector <code>URL</code></li><li>a vector of positional settings (<code>Command</code> and <code>URL</code> are required.)<code>Command</code><code>URL</code> <code>Params</code> <code>Headers</code> <code>Cert</code><code>SSLFlags</code><code>Priority</code>Intermediate positional parameters that are not used should be set to <code>''</code></li><li>A namespace containing named variables for the settings for the request.</li></ul>\n\n\n<code>RequestOnly</code>\n(optional) A Boolean indicating:<ul><li><code>0</code> - (default) send the HTTP request and return the response result.<li><code>1</code> - return the formatted HTTP request that HttpCommand would send if <code>RequestOnly</code> was <code>0</code>.</li>\n\n\n<code>r</code>\nIf <code>RequestOnly</code> is<ul><li><code>0</code> - a namespace containing the request response.</li><li><code>1</code> - the formatted HTTP request that <code>HttpCommand</code> would send if <code>RequestOnly</code> was <code>0</code>.</li></ul>\n\n\nExample(s)\nThese examples assume you have a <code>Jarvis</code> service running at <code>http://localhost:8080</code> and a endpoint of <code>#.sum \u2190 {+/\u2375}</code>.<pre>      args \u2190 \u2395NS ''      args.Command \u2190 'post'      args.URL \u2190 'localhost:8080/sum'      args.Params \u2190 \u23731000      \u22a2r \u2190 HttpCommand.GetJSON args[rc: 0 | msg:  | HTTP Status: 200 \"OK\" | \u2374Data: \u236c]      r.Data500500      Params \u2190 ('per_page' '3')('page' '1')('sort' 'full_name')      URL \u2190 'https://api.github.com/orgs/dyalog/repos'      \u22a2r \u2190 HttpCommand.GetJSON 'get' URL Params[rc: 0 | msg:  | HTTP Status: 200 \"OK\" | \u2374Data: 3]      r.Data.full_name Dyalog/a3s-Linux  Dyalog/APLCourse  Dyalog/aplssh`</pre>"},{"location":"shortcut-methods/#do-issue-a-generic-http-request","title":"<code>Do</code> - issue a generic HTTP request","text":"<p><code>Do</code> is essentially the same as <code>Get</code> except that you specify the HTTP method (<code>Command</code>) to use.</p>\n\n\n\nSyntax\n<code>r \u2190{RequestOnly} HttpCommand.Do args</code>\n\n\n<code>args</code>\nEither<ul><li>a vector of positional settings (<code>Command</code> and <code>URL</code> are required)<code>Command</code><code>URL</code><code>Params</code><code>Headers</code><code>Cert</code><code>SSLFlags</code><code>Priority</code>Intermediate positional parameters that are not used should be set to <code>''</code></li><li>A namespace containing named variables for the settings for the request.<code>(args \u2190 \u2395NS '').(Command URL Headers) \u2190 'post' 'someurl.com' ('header1' 'value1')</code></li></ul>\n\n\n<code>RequestOnly</code>\n(optional) A Boolean indicating:<ul><li><code>0</code> - (default) send the HTTP request and return the response result.</li><li><code>1</code> - return the formatted HTTP request that HttpCommand would send if <code>RequestOnly</code> was <code>0</code>.</li></ul>\n\n\n<code>r</code>\nIf <code>RequestOnly</code> is<ul><li><code>0</code> - a namespace containing the request response.</li><li><code>1</code> - the formatted HTTP request that <code>HttpCommand</code> would send if <code>RequestOnly</code> was <code>0</code>.\n\n\nExample(s)\n<pre>      args \u2190 \u2395NS ''      args.(Command URL) \u2190 'post' 'httpbin.org/post'      args.Params \u2190 ('name' 'Donald')('species' 'duck')      HttpCommand.Do args[rc: 0 | msg:  | HTTP Status: 200 \"OK\" | \u2374Data: 465]"},{"location":"shortcut-methods/#new-create-a-new-instance-of-httpcommand","title":"<code>New</code> - create a new instance of <code>HttpCommand</code>","text":"<p><code>New</code> is different than the other shortcut methods in that it returns an instance of <code>HttpCommand</code>.  <code>Get</code>, <code>GetJSON</code>, and <code>Do</code> all create an instance, run it, return the response namespace, and upon exit the instance is destroyed.</p>\n<p><code>New</code> can be useful for maintaining state information, like HTTP cookies across multiple requests or keeping the connection to the host open so that subsequent requests to the host are processed without the overhead of re-establishing the connection.</p>\n<p>After specifying the settings in the instance, run the <code>Run</code> instance method to execute the request. </p>\n\n\n\nSyntax\n<code>instance \u2190{RequestOnly} HttpCommand.New args</code>\n\n\n<code>args</code>\nEither<ul><li>a vector of positional settings (<code>Command</code> and <code>URL</code> are required)<code>Command</code><code>URL</code><code>Params</code><code>Headers</code><code>Cert</code><code>SSLFlags</code><code>Priority</code>Intermediate positional parameters that are not used should be set to <code>''</code></li><li>A namespace containing named variables for the settings for the request.<code>(args \u2190 \u2395NS '').(Command URL Headers) \u2190 'post' 'someurl.com' ('header1' 'value1')</code></li></ul>\n\n\n<code>RequestOnly</code>\n(optional) A Boolean indicating:<ul><li><code>0</code> - (default) send the HTTP request and return the response result.</li><li><code>1</code> - return the formatted HTTP request that HttpCommand would send if <code>RequestOnly</code> was <code>0</code>.</li></ul>\n\n\n<code>instance</code>\nAn instance of <code>HttpCommmand</code>\n\n\nExample(s)\nUse a namespace for the request settings:<pre>      args \u2190 \u2395NS ''      args.(Command URL) \u2190 'post' 'httpbin.org/post'      args.Params \u2190 ('name' 'Donald')('species' 'duck')      cmd \u2190 HttpCommand.New args      cmd.Run[rc: 0 | msg:  | HTTP Status: 200 \"OK\" | \u2374Data: 465]</pre>Create an instance of <code>HttpCommand</code> and set the settings directly:<pre>      cmd \u2190 HttpCommand.New '' \u235d synonym for cmd \u2190 \u2395NEW HttpCommand      cmd.(Command URL) \u2190 'post' 'httpbin.org/post'      cmd.Params \u2190 ('name' 'Donald')('species' 'duck')      cmd.Run[rc: 0 | msg:  | HTTP Status: 200 \"OK\" | \u2374Data: 465]</pre>Set RequestOnly, display the request that would be sent, then send it<pre>      cmd \u2190 1 HttpCommand.New 'get' 'dyalog.com'      cmd.RunGET / HTTP/1.1Host: dyalog.comUser-Agent: Dyalog-HttpCommand/5.0.4Accept: /      cmd.RequestOnly\u21900      cmd.Run[rc: 0 | msg:  | HTTP Status: 200 \"OK\" | \u2374Data: 23127]</pre>"},{"location":"trouble/","title":"Troubleshooting","text":"<p>In a perfect world, all HTTP requests would be well-formed, target hosts would be available, and APIs well-documented.  Unfortunately, we don't live in a perfect world and so, in this section, we attempt to provide you with some guidance for troubleshooting requests that aren't working as you expect.</p> <p>The result namespace returned by <code>HttpCommand.Run</code> contains information that may help in troubleshooting. The display format of the result contains some useful information: * <code>rc</code> is the <code>HttpCommand</code>'s return code * <code>msg</code> is a diagnostic message if <code>rc\u22600</code> * <code>HTTP Status</code> indicates the host's HTTP return code and status message * <code>\u2374Data</code> indicates the shape of the payload, if any, received in the response. This is the shape of the payload data after any automatic conversion done by <code>HttpCommand</code>.   </p>"},{"location":"trouble/#first-check-rc-and-msg","title":"First check <code>rc</code> and <code>msg</code>","text":"<p>If <code>rc</code> is not 0, <code>msg</code> should have relevant information about what went wrong. <code>rc</code> values less than 0 indicate a problem that wasn't Conga-related. <code>rc</code> values greater than 0 are the Conga return code if there was a Conga-related error.</p> <pre><code>      HttpCommand.Get ''\n[rc: \u00af1 | msg: No URL specified | HTTP Status:  \"\" | \u2374Data: 0]\n\n      HttpCommand.Get 'non_existent_url'\n[rc: 1106 | msg: Conga client creation failed  ERR_INVALID_HOST  Host \nidentification not resolved  | HTTP Status:  \"\" | \u2374Data: 0]\n</code></pre>"},{"location":"trouble/#check-httpmessage-and-data","title":"Check <code>HttpMessage</code> and <code>Data</code>","text":"<p>If <code>rc=0</code>, but <code>HttpStatus</code> is not what you expect, examine both <code>HttpMessage</code> and <code>Data</code>.  In the example below, GitHub returns a URL pointing to their API documentation for getting information about an organization.</p> <pre><code>      \u22a2r \u2190 HttpCommand.Get 'https://api.github.com/orgs/bloofo'\n[rc: 0 | msg:  | HTTP Status: 404 \"Not Found\" | \u2374Data: 109]\n      r.HttpMessage\nNot Found\n      r.Data\n{\"message\":\"Not Found\",\"documentation_url\":\"https://docs.github.com/rest/reference/orgs#get-an-organization\"}\n</code></pre>"},{"location":"trouble/#examine-the-request-that-httpcommand-will-send","title":"Examine the request that <code>HttpCommand</code> will send","text":"<p>It can be useful to examine the actual request that <code>HttpCommand</code> will send to the host. Many web services will publish sample requests that you can use for comparison. Check that the headers, particularly <code>content-type</code>, are correct.</p> <p>The instance setting <code>RequestOnly</code> controls whether <code>HttpCommand</code> will send the request to the host or simply return the request that would be sent to the host. You can set <code>RequestOnly</code> in several ways: * Pass 1 as the optional left argument to the shortcut methods <code>Get</code>, <code>GetJSON</code>, or <code>Do</code>.</p> <pre><code>       method \u2190 'post'\n       url \u2190 'www.someurl.net'\n       payload \u2190 \u237310\n       headers \u2190 'a-header' 'some value'\n       1 HttpCommand.GetJSON method url payload headers\nPOST / HTTP/1.1\na-header: some value\nHost: www.someurl.net\nUser-Agent: Dyalog/HttpCommand\nAccept: */*\nContent-Type: application/json;charset=utf-8\nContent-Length: 22\n\n[1,2,3,4,5,6,7,8,9,10]\n</code></pre> <ul> <li>Pass 1 as the optional left argument to the <code>New</code> shortcut method and then run the <code>Run</code> method. Be sure to set <code>RequestOnly</code> back to 0 before sending the request to the host.</li> </ul> <pre><code>      c \u2190 1 HttpCommand.New 'get' 'dyalog.com'\n      c.Run\nGET / HTTP/1.1\nHost: dyalog.com\nUser-Agent: Dyalog/HttpCommand\nAccept: */*\n      c.RequestOnly\u21900\n      c.Run\n[rc: 0 | msg:  | HTTP Status: 200 \"OK\" | \u2374Data: 20684]\n</code></pre> <ul> <li>Use the <code>Show</code> instance method. </li> </ul> <pre><code>      c \u2190 HttpCommand.New ''\n      c.URL \u2190 'someurl.com/stuff'\n      c.Command \u2190 'get'\n      c.Params \u2190 'name' 'Drake Mallard'\n      'header-name' c.AddHeader 'header value'\n      c.Show\nGET /stuff?name=Drake%20Mallard HTTP/1.1\nheader-name: header value\nHost: someurl.com\nUser-Agent: Dyalog/HttpCommand\nAccept: */*\n</code></pre>"},{"location":"trouble/#debug-mode","title":"Debug Mode","text":"<p>Setting <code>HttpCommand.Debug\u21901</code> will disable <code>HttpCommand</code>'s error checking and cause <code>HttpCommand</code> to suspend if and where an error occurs.</p> <p>Setting <code>HttpCommand.Debug\u21902</code> will cause <code>HttpCommand</code> to suspend just before it attempts to create the client connection to the host.  This will give you the opportunity to examine the request's state and step through the code.</p> <p>Note: <code>HttpCommand.Debug</code> is a shared setting and will affect all instances of <code>HttpCommand</code>.</p>"},{"location":"userguide/","title":"Usage Guide","text":""},{"location":"userguide/#shortcut-or-instance","title":"Shortcut or Instance?","text":"<p>There are two ways to use <code>HttpCommand</code>. </p> <ul> <li>Use one of its shortcut methods (<code>Get</code>, <code>Do</code>, <code>GetJSON</code>) to execute a single HTTP request and examine the response from the host. When you use a shortcut method, <code>HttpCommand</code> will create a new, local, instance of itself and then use the instance's <code>Run</code> method to send the request and receive the response, then exit thereby destroying the local instance. This is generally fine when your requests are independent of one another and do not require any state to be maintained across requests.</li> <li>Create an instance of <code>HttpCommand</code> using <code>\u2395NEW</code> or the <code>New</code> shared method, set whatever parameters are necessary, execute the <code>Run</code> method, and examine the response from the host. Creating an instance of <code>HttpCommand</code> and using the <code>Run</code> method to send the request and receive the response will persist the instance such that state information like connection information and HTTP cookies will be retained across requests.</li> </ul>"},{"location":"userguide/#httpcommands-result","title":"<code>HttpCommand</code>'s Result","text":"<p>The result of the <code>Run</code> method is a namespace containing information related to the result of the request. The display format (<code>\u2395DF</code>) of the result presents some useful information.</p> <pre><code>      \u22a2r \u2190 HttpCommand.Get 'https://www.dyalog.com'\n[rc: 0 | msg:  | HTTP Status: 200 \"OK\" | \u2374Data: 20571]\n</code></pre> <ul> <li><code>r</code> is the namespace result</li> <li><code>r.rc</code> is <code>HttpCommand</code>'s numeric return code. 0 means <code>HttpCommand</code> was able to create and send the request to the host, send it, and receive and process the response.If <code>rc</code> is less than 0, it means there was some problem either composing/sending the request or processing the response.If <code>rc</code> is greater than 0, it is the Conga return code and generally means that Conga encountered something unexpected. More information about <code>rc</code> can be found here. </li> <li><code>r.msg</code> is a (hopefully meaningful) message describing whatever the issue was if <code>r.rc</code> is non-zero.</li> <li><code>r.HttpStatus</code> is the numeric HTTP status code returned by the host. A status code in the range 200-299 indicates a successful HTTP response with 200 being the most common code.</li> <li><code>r.HttpMessage</code> is the HTTP status message returned by the host.</li> <li><code>r.Data</code> is the payload of the response, if any, returned by the host.  The result namespace contains other elements which are described in detail on the Request Results, Operational Results, and Response Results pages.</li> </ul>"},{"location":"userguide/#typical-use-in-code","title":"Typical Use in Code","text":"<p>Typical use of <code>HttpCommand</code> might follow this pattern.</p> <pre><code> resp \u2190 HttpCommand.Get 'some-url'\n:If resp.IsOK \u235d use the IsOK function from the result namespace\n    \u235d code to process the response \n:Else\n    \u235d code to handle bad request\n:EndIf\n</code></pre> <p>If you expect to make several <code>HttpCommand</code> calls, you may want to create an instance and then update the necessary settings and execute the <code>Run</code> method for each call.  This can be useful when the requests are made to the same host as the connection to the host will be kept open, unless the host itself closes it.</p> <pre><code> hc\u2190HttpCommand.New 'get'  \u235d here we expect all requests to be HTTP GET\n urls\u2190'url1' 'url2' 'url3'\n\n:For url :In urls \u235d loop over the URLs\n  hc.URL\u2190url \u235d set this URL\n  resp\u2190hc.Run\n  :If resp.IsOK\n    \u235d process the response\n  :Else\n    \u235d process the exception/error\n  :EndIf\n:EndFor \n</code></pre>"},{"location":"userguide/#timeout-and-long-running-requests","title":"<code>Timeout</code> and Long-running Requests","text":"<p>The default <code>Timeout</code> setting (10 seconds) is adequate for most requests. There are a couple of patterns of long running requests.  <code>Timeout</code> can be set to a positive or negative number.</p> <ul> <li>Setting <code>Timeout</code> to a positive number means that <code>HttpCommand</code> will time out after <code>Timeout</code> seconds with a return code (<code>rc</code>) of 100.  Any partial payload received will returned in <code>Data</code> element of the result. </li> <li>Setting <code>Timeout</code> to a negative number means that <code>HttpCommand</code> will not time out as long as data is being received.  This is useful in the case where a large payload may be received but you are uncertain of how long it will take to receive. If no data is received within a period of <code>|Timeout</code> seconds, <code>HttpCommand</code> will time out with a return code (<code>rc</code>) of 100. Any partial payload received will be returned in the <code>Data</code> element of the result. Using a negative <code>Timeout</code> value is useful in the case where a large payload is being received in chunks but has no benefit if the entire payload is sent in one chunk or if the host takes more than <code>|Timeout</code> seconds to begin sending its response. In that case, you'll need to set <code>|Timeout</code> to a larger value.</li> </ul>"},{"location":"userguide/#compressing-response-payload","title":"Compressing Response Payload","text":"<p><code>HttpCommand</code> can accept and process response payloads that are compressed using either the gzip or deflate compression schemes. To accomplish this, you need to set the <code>accept-encoding</code> header to <code>'gzip, deflate'</code>.</p>"}]}