
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../img/favicon-32.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.2.1">
    
    
      
        <title>Print - HttpCommand</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.e8d9bf0c.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/print-site-enum-headings2.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings3.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings4.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings5.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings6.css">
    
      <link rel="stylesheet" href="../css/print-site.css">
    
      <link rel="stylesheet" href="../css/print-site-material.css">
    
      <link rel="stylesheet" href="../css/main.css">
    
    <script>__md_scope=new URL("/",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  
        <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function () {
            remove_material_navigation();remove_mkdocs_theme_navigation();
        })
        </script>
        </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="HttpCommand" class="md-header__button md-logo" aria-label="HttpCommand" data-md-component="logo">
      
  <img src="../img/dyalog-white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            HttpCommand
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Print
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/dyalog/httpcommand/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Dyalog/HttpCommand
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="HttpCommand" class="md-nav__button md-logo" aria-label="HttpCommand" data-md-component="logo">
      
  <img src="../img/dyalog-white.svg" alt="logo">

    </a>
    HttpCommand
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/dyalog/httpcommand/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Dyalog/HttpCommand
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Usage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Usage" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Usage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart/" class="md-nav__link">
        Quick Start
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../userguide/" class="md-nav__link">
        User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/" class="md-nav__link">
        Examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trouble/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1">
          Settings
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Settings" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          Settings
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../request-settings/" class="md-nav__link">
        Request-related Settings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../conga-settings/" class="md-nav__link">
        Conga-related Settings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../operational-settings/" class="md-nav__link">
        Operational Settings
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2">
          Shared Methods
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Shared Methods" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Shared Methods
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../shortcut-methods/" class="md-nav__link">
        Shortcut Methods
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../encode-methods/" class="md-nav__link">
        Encode/Decode Methods
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../misc-methods/" class="md-nav__link">
        Miscellaneous Methods
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../instance-methods/" class="md-nav__link">
        Instance Methods
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4" type="checkbox" id="__nav_3_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_4">
          Result Namespace
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Result Namespace" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Result Namespace
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../result-operational/" class="md-nav__link">
        Operational Elements
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../result-request/" class="md-nav__link">
        Request Elements
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../result-response/" class="md-nav__link">
        Response Elements
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../msgs/" class="md-nav__link">
        Messages and Return Codes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Advanced Topics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Advanced Topics" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Advanced Topics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../conga/" class="md-nav__link">
        HttpCommand and Conga
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../secure/" class="md-nav__link">
        Secure Communications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrating/" class="md-nav__link">
        Integrating HttpCommand
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          About
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="About" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          About
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../LICENSE/" class="md-nav__link">
        License
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/" class="md-nav__link">
        Release Notes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Print
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Print
      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-usage" class="md-nav__link">
    Usage
  </a>
  
    <nav class="md-nav" aria-label="Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#quickstart" class="md-nav__link">
    Quick Start
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#userguide" class="md-nav__link">
    User Guide
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    Examples
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trouble" class="md-nav__link">
    Troubleshooting
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-reference" class="md-nav__link">
    Reference
  </a>
  
    <nav class="md-nav" aria-label="Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instance-methods" class="md-nav__link">
    Instance Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#msgs" class="md-nav__link">
    Messages and Return Codes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-advanced-topics" class="md-nav__link">
    Advanced Topics
  </a>
  
    <nav class="md-nav" aria-label="Advanced Topics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#conga" class="md-nav__link">
    HttpCommand and Conga
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secure" class="md-nav__link">
    Secure Communications
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integrating" class="md-nav__link">
    Integrating HttpCommand
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-about" class="md-nav__link">
    About
  </a>
  
    <nav class="md-nav" aria-label="About">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#license" class="md-nav__link">
    License
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#release-notes" class="md-nav__link">
    Release Notes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-usage" class="md-nav__link">
    Usage
  </a>
  
    <nav class="md-nav" aria-label="Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#quickstart" class="md-nav__link">
    Quick Start
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#userguide" class="md-nav__link">
    User Guide
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    Examples
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trouble" class="md-nav__link">
    Troubleshooting
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-reference" class="md-nav__link">
    Reference
  </a>
  
    <nav class="md-nav" aria-label="Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instance-methods" class="md-nav__link">
    Instance Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#msgs" class="md-nav__link">
    Messages and Return Codes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-advanced-topics" class="md-nav__link">
    Advanced Topics
  </a>
  
    <nav class="md-nav" aria-label="Advanced Topics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#conga" class="md-nav__link">
    HttpCommand and Conga
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secure" class="md-nav__link">
    Secure Communications
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integrating" class="md-nav__link">
    Integrating HttpCommand
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-about" class="md-nav__link">
    About
  </a>
  
    <nav class="md-nav" aria-label="About">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#license" class="md-nav__link">
    License
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#release-notes" class="md-nav__link">
    Release Notes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<div id="print-site-page" class="">
        <section id="print-site-cover-page">
            
<div>

    
        <h1>HttpCommand</h1>
    

</div>


<table>

    

    

    
    <tr>
        <td>Repository</td>
        <td><a href="https://github.com/dyalog/httpcommand/">https://github.com/dyalog/httpcommand/</a></td>
    </tr>
    

    
    <tr>
        <td>Copyright</td>
        <td>Copyright &copy; 2015-2022 <strong><a href="https://dyalog.com">Dyalog, LTD</a></strong></td>
    </tr>
    

</table>





        </section>
        <section class="print-page" id="index"><p><strong>Note</strong>: While <code>HttpCommand</code> itself is <code>⎕IO</code> and <code>⎕ML</code> insensitive, the examples in this documentation assume an environment of <code>(⎕IO ⎕ML)←1</code>.</p>
<p><code>HttpCommand</code> is a utility is designed to make it easy for the APL user to send requests to and receive responses from HTTP servers like web servers and web services. <code>HttpCommand</code> is included with Dyalog APL as a loadable utility. To bring it into your workspace, simply do:</p>
<pre><code class="language-APL">      ]Load HttpCommand
</code></pre>
<p>or, under program control, do:</p>
<pre><code class="language-APL">     ⎕SE.SALT.Load 'HttpCommand' 
</code></pre>
<p>Beginning with Dyalog v18.2, you can also use the <code>]get</code> user command:</p>
<pre><code class="language-APL">      ]Get HttpCommand
</code></pre>
<p><code>HttpCommand</code> is implemented as a Dyalog class and its typical usage pattern is:</p>
<ol>
<li>Create an instance of <code>HttpCommand</code></li>
<li>Set fields appropriate to describe the request</li>
<li>Send the request</li>
<li>Examine the response result</li>
</ol>
<p>For example:</p>
<pre><code class="language-APL">      cmd←HttpCommand.New ''   ⍝ create an instance
      cmd.Command←'get'        ⍝ specify the HTTP method 
      cmd.URL←'www.dyalog.com' ⍝ specify the URL

      ⊢response←cmd.Run        ⍝ send the request
[rc: 0 | msg: &quot;&quot; | HTTP Status: 200 &quot;OK&quot; | ⍴Data: 21060]

      50↑response.Data         ⍝ examine the response payload
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Trans      
</code></pre>
<p>The result of <code>HttpCommand.Run</code> is a namespace containing information about the response from server.  The display format for the namespace gives some useful information about the success of the request.  The server's response data, also known as the content or payload, is found in the <code>Data</code> element of the namespace.</p>
<p><code>HttpCommand</code> has several "shortcut" shared methods to perform common operations. For instance, the above example can be accomplished by using <code>HttpCommand.Get</code>.</p>
<pre><code class="language-APL">      50↑(HttpCommand.Get 'www.dyalog.com').Data
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Trans      
</code></pre>
<h2 id="index-dyalog-classes">Dyalog Classes</h2>
<p><code>HttpCommand</code> is implemented as a Dyalog class. While it's not necessary to have an in-depth knowledge of Dyalog classes, it is useful to understand a couple basic concepts. A class can have "shared" methods and settings (known as fields) and "instance" methods and settings. For instance, the "shortcut" methods like <code>Get</code>, <code>GetJSON</code>, <code>Do</code> and <code>New</code> are shared methods whereas the instance methods like <code>Show</code> and <code>Run</code> are only available in an <code>HttpCommand</code> instance. Similarly, <code>Debug</code> and <code>CongaPath</code> are shared settings whereas <code>URL</code> and <code>Command</code> are instance settings. We will attempt to make the distinction between shared and instance references throughout this documentation.</p>
<h2 id="index-philosophy">Philosophy</h2>
<p><code>HttpCommand</code> has been designed to be easy to integrate into your application by having a small footprint (it's a single class) and making almost no assumptions about the environment in which you'll use it. <code>HttpComand</code> attempts to use sensible default values for request settings while still giving you full control should you need it.  <code>HttpCommand</code>'s feature set has expanded over time as new use cases and feature requests have arisen. We expect this trend to continue and encourage you to submit feature requests or report any bugs via <a href="https://github.com/Dyalog/HttpCommand/issues">GitHub</a>.</p>
<p>This documentation should provide sufficient information to use <code>HttpCommand</code> to make most HTTP requests. In some cases, some further knowledge of HTTP may be necessary. This documentation does not attempt to be an exhaustive HTTP reference.</p>
<h2 id="index-use-of-conga">Use of Conga</h2>
<p><code>HttpCommand</code> uses Conga, Dyalog's TCP/IP utility library, for communication. Conga consists of two parts:</p>
<ul>
<li>Two shared library files that are specific to the operating system and implement the low-level communications and security interfaces.</li>
<li>An APL object that implements a cross-platform interface to the shared libraries.  The object will be either the <code>DRC</code> namespace or an instance of the <code>Conga.LIB</code> class. For the purposes of this document we will refer to this object as the <strong>Conga API</strong>.</li>
</ul>
<h2 id="index-further-reading">Further Reading</h2>
<ul>
<li>This documentation does not attempt to be an in-depth examination of either Conga or the HTTP protocol. For more information on Conga, see the <a href="https://docs.dyalog.com/latest/Conga%20User%20Guide.pdf">Conga User Guide</a></li>
<li>There are many resources available to learn about HTTP; a good one may be found on the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP">Mozilla Developer Network</a></li>
<li>For more information on Dyalog classes, please refer to the Object Oriented Programming chapter in the <a href="https://docs.dyalog.com/latest/Dyalog%20Programming%20Reference%20Guide.pdf">Dyalog Programming Reference Guide</a>. </li>
</ul></section>
                        <h1 class='nav-section-title' id='section-usage'>
                            Usage <a class='headerlink' href='#section-usage' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="quickstart"><h2 id="quickstart-shortcut-methods">Shortcut Methods</h2>
<p><code>HttpCommand</code> has several shared "shortcut" methods to perform common operations. An overview of these methods is presented here. See the <strong>Reference</strong> section of the documentation for detailed information on all features of HttpCommand.</p>
<p><code>HttpCommand</code>'s <code>Get</code>, <code>GetJSON</code>, <code>Do</code>, and <code>New</code> methods each accept a right argument which is one of:</p>
<ul>
<li>a vector of positional arguments</li>
<li>a namespace containing named arguments. </li>
</ul>
<p>Positional arguments must be supplied in the position and order shown.  If you do not need to use an intermediate argument, you should supply <code>''</code>. For instance, a request that needs a <code>Headers</code> setting, but does not use a <code>Params</code> setting would be:</p>
<pre><code>      HttpCommand.Get 'www.someurl.com' '' ('accept' 'image/png')
</code></pre>
<p>To use a namespace argument, create a namespace and assign the appropriate parameters for the request.  For example:</p>
<pre><code>      ns←⎕NS ''
      ns.(Command URL)←'post' 'www.someurl.com'
      ns.Params←'&lt;h1&gt;Hello World!&lt;/h1&gt;'
      ns.Headers←'Content-Type' 'text/html'
      r←HttpCommand.Do ns
</code></pre>
<h3 id="quickstart-get"><strong><code>Get</code></strong></h3>
<p>Sends an HTTP request using the HTTP GET method.<br>
<code>r← {ro} HttpCommand.Get URL [Params [Headers]]</code><br>
<code>r← {ro} HttpCommand.Get namespace</code><br></p>
<h3 id="quickstart-getjson"><strong><code>GetJSON</code></strong></h3>
<p>Sends an HTTP request to a JSON-based web service using the HTTP method you specify. Unless otherwise specified, request parameters and response payload are automatically converted between APL and JSON.<br>
<code>r← {ro} HttpCommand.GetJSON Command URL [Params [Headers]]</code><br>
<code>r← {ro} HttpCommand.GetJSON namespace</code><br></p>
<h3 id="quickstart-do"><strong><code>Do</code></strong></h3>
<p>Sends an HTTP request using the HTTP method you specify.<br>
<code>r← {ro} HttpCommand.Do Command URL [Params [Headers]]</code><br>
<code>r← {ro} HttpCommand.Do namespace</code><br></p>
<h3 id="quickstart-new"><strong><code>New</code></strong></h3>
<p>Creates a new instance of <code>HttpCommand</code>.<br>
<code>h← {ro} HttpCommand.New Command URL [Params [Headers]]</code><br>
<code>h← {ro} HttpCommand.New namespace</code><br><br>
Once the instance is created, additional settings can be assigned directly if necessary. Then use the <code>Run</code> method to send the request.<br> 
<code>r← h.Run</code></p>
<h2 id="quickstart-arguments">Arguments</h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Default Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Command</code></td>
<td>The HTTP method to use</td>
<td><code>'GET'</code></td>
</tr>
<tr>
<td><code>URL</code></td>
<td>The URL to which the request will be sent. If <code>URL</code> begins with <code>'https://'</code> <code>HttpCommand</code> will attempt create a secure connection to the host using either an anonymou)s certificate it creates or <code>Cert</code> if it is supplied</td>
<td><code>''</code></td>
</tr>
<tr>
<td><code>Params</code></td>
<td>Any parameters that are to be sent with the request.</td>
<td><code>''</code></td>
</tr>
<tr>
<td><code>Headers</code></td>
<td>Any HTTP headers (name/value pairs) to send with the request</td>
<td><code>''</code></td>
</tr>
<tr>
<td><code>ro</code></td>
<td>"Request Only" - when set to 1, <code>HttpCommand</code> will compose and return the HTTP request that it would send to the host, but not actually send it.  This is useful for debugging to ensure your request is properly formed.</td>
<td><code>0</code></td>
</tr>
</tbody>
</table>
<p>See the <a href="#request-settings">Request-related Settings</a> section for more detail on the arguments. </p>
<p>Each of the above methods also accept 3 additional positional arguments, <code>[Cert [SSLFlags [Priority]]]</code>.  These arguments are used to specify settings for secure connections but are seldom used in practice because <code>HttpCommand</code> automatically supplies an anonymous certificate when using a secure connection. See <a href="#secure">Secure Connections</a> and <a href="#conga-settings">Conga-related Settings</a> for more information.</p></section><section class="print-page" id="userguide"><h2 id="userguide-shortcut-or-instance">Shortcut or Instance?</h2>
<p>There are two ways to use <code>HttpCommand</code>. </p>
<ul>
<li>Use one of its shortcut methods (<code>Get</code>, <code>Do</code>, <code>GetJSON</code>) to execute a single HTTP request and examine the response from the host. When you use a shortcut method, <code>HttpCommand</code> will create a new, local, instance of itself and then use the instance's <code>Run</code> method to send the request and receive the response, then exit thereby destroying the local instance. This is generally fine when your requests are independent of one another and do not require any state to be maintained across requests.</br></li>
<li>Create an instance of <code>HttpCommand</code> using <code>⎕NEW</code> or the <code>New</code> shared method, set whatever parameters are necessary, execute the <code>Run</code> method, and examine the response from the host. Creating an instance of <code>HttpCommand</code> and using the <code>Run</code> method to send the request and receive the response will persist the instance such that state information like connection information and HTTP cookies will be retained across requests.</li>
</ul>
<h2 id="userguide-httpcommands-result"><code>HttpCommand</code>'s Result</h2>
<p>The result of the <code>Run</code> method is a namespace containing information related to the result of the request. The display format (<code>⎕DF</code>) of the result presents some useful information.</p>
<pre><code>      ⊢r ← HttpCommand.Get 'https://www.dyalog.com'
[rc: 0 | msg:  | HTTP Status: 200 &quot;OK&quot; | ⍴Data: 20571]
</code></pre>
<ul>
<li><code>r</code> is the namespace result</li>
<li><code>r.rc</code> is <code>HttpCommand</code>'s numeric return code. 0 means <code>HttpCommand</code> was able to create and send the request to the host, send it, and receive and process the response.</br>If <code>rc</code> is less than 0, it means there was some problem either composing/sending the request or processing the response.</br>If <code>rc</code> is greater than 0, it is the Conga return code and generally means that Conga encountered something unexpected. More information about <code>rc</code> can be found <a href="#msgs">here</a>. </li>
<li><code>r.msg</code> is a (hopefully meaningful) message describing whatever the issue was if <code>r.rc</code> is non-zero.</li>
<li><code>r.HttpStatus</code> is the numeric HTTP status code returned by the host. A status code in the range 200-299 indicates a successful HTTP response with 200 being the most common code.</li>
<li><code>r.HttpMessage</code> is the HTTP status message returned by the host.</li>
<li><code>r.Data</code> is the payload of the response, if any, returned by the host. 
The result namespace contains other elements which are described in detail on the <a href="#result-request">Request Results</a>, <a href="#result-operational">Operational Results</a>, and <a href="#result-response">Response Results</a> pages.</li>
</ul>
<h2 id="userguide-typical-use-in-code">Typical Use in Code</h2>
<p>Typical use of <code>HttpCommand</code> might follow this pattern.</p>
<pre><code> resp ← HttpCommand.Get 'some-url'
:If 0 200 ≢ resp.(rc HttpStatus)
    ⍝ code to handle bad request
:Else
    ⍝ code to process the response 
:EndIf
</code></pre>
<p>If you expect to make several <code>HttpCommand</code> calls, you may want to create an instance and then update the necessary settings and execute the <code>Run</code> method for each call.  This is particularly useful when the requests are made to the same host as the connection to the host will be kept open, unless the host itself closes it.</p>
<pre><code> hc←HttpCommand.New 'get'  ⍝ here we expect all requests to be HTTP GET
 urls←'url1' 'url2' 'url3'

:For url :In urls ⍝ loop over the URLs
  hc.URL←url ⍝ set this URL
  resp←hc.Run
  :If 0 200≡resp.(rc HttpStatus)
    ⍝ process the response
  :Else
    ⍝ process the exception/error
  :EndIf
:EndFor 
</code></pre></section><section class="print-page" id="examples"><h2 id="examples-interacting-with-web-services">Interacting with Web Services</h2>
<p>A web service will generally have a published API which describes how to interact with the service.  This API will be your guide for how to build requests using <code>HttpCommand</code> to access the web service. In many cases, the API will also describe the format of the data it returns in the <code>content-type</code> header.</p>
<p>A web service may require authentication in order to gain access to certain resources or perform certain operations. GitHub is a good example of this - it does not require authentication to perform read-only queries on public resources, but authentication is necessary to perform write operations or to access private repositories.</p>
<p>Let's look at GitHub's <a href="https://docs.github.com/en/rest">REST API</a> as an example. The GitHub API returns its data in JSON format. </p>
<p>Note: If you run these same examples, you may get slightly different results because of updates to Dyalog's content on GitHub.</p>
<pre><code>      c ← HttpCommand.New 'get' 'https://api.github.com/orgs/Dyalog'

      ⊢r ← c.Run ⍝ send the request
[rc: 0 | msg:  | HTTP Status: 200 &quot;OK&quot; | ⍴Data: 1101]

      r.Headers c.Lookup 'content-type' ⍝ check the content-type
application/json; charset=utf-8

      d←⎕JSON r.Data ⍝ convert the JSON 

      d.(name public_repos) 
 Dyalog  48

      html ← 'HTML' ('&lt;img src=&quot;',d.avatar_url,'&quot;/&gt;')
      coord ← 'coord' 'pixel' ⋄ size ← 'size' (250 250)
      'h' ⎕WC 'HTMLRenderer' html coord size
</code></pre>
<p><img alt="Dyalog avatar" src="../img/avatar.png" /></p>
<h2 id="examples-authenticationauthorization">Authentication/Authorization</h2>
<p>The example above uses no authentication and therefore returns only publicly-available information. Many web services require some form of authentication to provide authorization to access private resources or functionality. Two common authentication schemes are "token-based" and "HTTP Basic".  </p>
<h3 id="examples-http-basic-authentication">HTTP Basic Authentication</h3>
<p>Some web services allow you to use HTTP Basic authentication using userid and password credentials. <strong>Any request that includes authentication data should be sent using HTTPS if possible</strong>. <code>HttpCommand</code> allows you to specify these credentials in a few ways:</p>
<ul>
<li>in the <code>URL</code> by including <code>userid:password@</code> before the domain name</li>
<li>by setting <code>AuthType</code> to <code>'basic'</code> and </br><code>Auth</code> to <code>HttpCommand.Base64Encode 'userid:password'</code></li>
<li>by including an "Authorization" header in the format</br><code>'basic ',HttpCommand.Base64Encode 'userid:password'</code></li>
</ul>
<p>The following examples use the "basic-auth" endpoint of the website <a href="http://httpbin.org">http://httpbin.org</a>. httpbin.org provides many useful endpoints for testing HTTP requests. In this case, the userid and password are concatenated to the URL so the endpoint can validate the credentials.</p>
<p>First, let's try using credentials in the URL...</p>
<pre><code>      u ← 'userid'
      p ← 'password'
      endpoint ← 'httpbin.org/basic-auth/userid/password'

      ⊢url ← 'https://',u,':',p,'@',endpoint
https://userid:password@httpbin.org/basic-auth/userid/password

      ⊢r ← HttpCommand.Get url 
[rc: 0 | msg:  | HTTP Status: 200 &quot;OK&quot; | ⍴Data: 49]
      r.Data
{
  &quot;authenticated&quot;: true, 
  &quot;user&quot;: &quot;user&quot;
}
</code></pre>
<p>If we alter the URL so that the credentials don't match, we'll get a <code>401 "UNAUTHORIZED"</code> HTTP status.</p>
<pre><code>      HttpCommand.Get url,'1'
[rc: 0 | msg:  | HTTP Status: 401 &quot;UNAUTHORIZED&quot; | ⍴Data: 0]
</code></pre>
<p>Now, let's try setting the "Authorization" header...</p>
<pre><code>      ⊢credentials ← HttpCommand.Base64Encode u,':',p
dXNlcmlkOnBhc3N3b3Jk
      hdrs ← 'Authorization' ('basic ',credentials)
      url ← 'https://',endpoint
      HttpCommand.Get url '' hdrs
[rc: 0 | msg:  | HTTP Status: 200 &quot;OK&quot; | ⍴Data: 49]
</code></pre>
<p>Finally, let's use the <code>AuthType</code> and <code>Auth</code> settings...</p>
<pre><code>      h ← HttpCommand.New 'get' url ⍝ create an instance
      h.Auth ← credentials
      h.AuthType ← 'basic'
      h.Run
[rc: 0 | msg:  | HTTP Status: 200 &quot;OK&quot; | ⍴Data: 49]
</code></pre>
<h3 id="examples-token-based-authentication">Token-based Authentication</h3>
<p>One common authentication method uses tokens which are issued by the web service provider. Tokens should be protected just as you would protect your password. A token may have an expiration date after which you'll need to get a new token. <strong>Any request that includes authentication data should be sent using HTTPS if possible</strong>.</p>
<p>For this next example we'll use a <a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token">GitHub Personal Access Token</a> which happens to provide more access to Dyalog's information on GitHub.</p>
<p>The API documentation for the web service you are using should provide information about the use of tokens. In GitHub's case, the token is passed in the HTTP request's "Authorization" header. <code>HttpCommand</code> allows you to specify the token either by creating an "Authorization" header or by setting the <code>Auth</code> configuration setting. If you set the <code>Auth</code> setting, <code>HttpCommand</code> will add the "Authorization" header automatically.</p>
<p>Let's assume that the token we're using in this example is in a variable named <code>token</code>. (Obviously, we are not going to publish the <em>actual</em> token here.) Also note if you plan on making several requests to the same web service, it's easier to create an instance of <code>HttpCommand</code>, set the <code>Auth</code> configuration setting, then set any other configuration settings and run the <code>Run</code> method for each request.</p>
<p>First, let's compare the difference between an authorized and a non-authorized request...</p>
<pre><code class="language-APL">      ⊢HttpCommand.Get 'https://api.github.com/orgs/Dyalog'
[rc: 0 | msg:  | HTTP Status: 200 &quot;OK&quot; | ⍴Data: 1101]

      hdr←'authorization' ('token ',token)

      ⊢HttpCommand.Get 'https://api.github.com/orgs/Dyalog' '' hdr
[rc: 0 | msg:  | HTTP Status: 200 &quot;OK&quot; | ⍴Data: 1804]
</code></pre>
<p>Note more data is returned for the authorized request. This additional data will include things like organizational and administrative information.</p>
<h2 id="examples-interacting-with-json-based-web-services">Interacting with JSON-based Web Services</h2>
<p>Many web services including those based on <a href="https://github.com/Dyalog/Jarvis">Jarvis</a>, Dyalog's web service framework, use JSON to format their request and response payloads. Normally, to interact with a JSON-based web service, you would set the "content-type" header of the request to "application/json" if the request has a payload; then you would process the response's JSON payload, possibly with <code>⎕JSON</code>.  </p>
<p><code>HttpCommand</code>'s <code>GetJSON</code> method is designed to make it easy to to interact with such services.  <code>GetJSON</code> will convert an APL array request payload to JSON format and conversely convert a JSON response payload to APL. We saw in the <a href="#examples-interacting-with-web-services">Interacting with Web Services</a> example above that GitHub returns its result as JSON.</p>
<h2 id="examples-posting-data-to-a-web-service">Posting Data to a Web Service</h2>
<p>So far we've only read data from GitHub using the HTTP GET method. The GitHub API also allows authenticated users to create and update information. In this example we will create a new repository using the HTTP POST method and our GitHub Personal Access Token. For security reasons, we will use the same <code>token</code> variable from the previous example. At the time of this writing, we are using the GitHub API documentation for <a href="https://docs.github.com/en/enterprise-server@3.1/rest/repos/repos#create-a-repository-for-the-authenticated-user">creating a repository for an authenticated user</a> as a guide. </p>
<p>For this example, we'll use a namespace, <code>args</code>, to specify all the settings for our request...  </p>
<pre><code>      args←⎕NS ''
      args.Command            ← 'post'
      args.URL                ← 'https://api.github.com/user/repos'
      args.Params             ← ⎕NS ''
      args.Params.name        ← 'TestRepository'
      args.Params.description ← 'HttpCommand Example'
      args.Params.auto_init   ← ⊂'true' ⍝ APL's equivalent to JSON true
      ⊢r ← HttpCommand.GetJSON args
[rc: 0 | msg:  | HTTP Status: 401 &quot;Unauthorized&quot; | ⍴Data: ⍬]
</code></pre>
<p>Oops!  We didn't use our token for authentication and so the request was rejected as unauthorized. We also specify the authentication scheme as <code>'token'</code>, which is what the GitHub API uses.</p>
<pre><code>      args.(AuthType Auth) ← 'token' token
      ⊢r ← HttpCommand.GetJSON args
[rc: 0 | msg:  | HTTP Status: 201 &quot;Created&quot; | ⍴Data: ⍬]
</code></pre>
<p>Notice that the shape of the response's payload (Data) is <code>⍬</code>. This is because we used the <code>GetJSON</code> method and <code>HttpCommand</code> automatically converted the response's JSON payload into a Dyalog JSON object which contains all the information about the newly created repository...</p>
<pre><code>      ]Box on
      r.Data.(name created_at)
┌──────────────┬────────────────────┐
│TestRepository│2022-08-01T21:23:08Z│
└──────────────┴────────────────────┘
</code></pre>
<h2 id="examples-downloading-a-file">Downloading a File</h2>
<p>If you want to download a file you can simply use <code>HttpCommand.Get</code> with the URL of the file and then write the response's payload to a local file.  Or, you can set the <code>OutFile</code> setting to the local file name and have <code>HttpCommand</code> write the file for you. This is especially advantageous for large files if the server uses "chunked" transfer encoding to send the payload in chunks. In that case, rather than buffering the entire payload in the workspace and then writing to the local file, <code>HttpCommand</code> will write each chunk out as it is received. </p>
<pre><code>      args←⎕NS '' 
      args.OutFile ← '/tmp/test.pdf'
      args.Command ← 'get' 
      args.URL     ← 'https://www.dyalog.com/uploads/files/student_competition/2021_problems_phase1.pdf'
      ⊢r ← HttpCommand.Do args
[rc: 0 | msg:  | HTTP Status: 200 &quot;OK&quot; | 179723 bytes written to c:/tmp/test.pdf]
</code></pre>
<h2 id="examples-twitter-example">Twitter Example</h2>
<p>The GitHub examples above used the default <code>AuthType</code> of <code>'token'</code>. <a href="https://developer.twitter.com/en/docs/twitter-api">Twitter's v2 REST API</a> uses OAuth 2.0's <code>'bearer'</code> authentication scheme.  In this example our super secret bearer token is stored in a variable named <code>bearerToken</code>. </p>
<pre><code>      apiURL ← 'https://api.twitter.com/2/' ⍝ set the base URL for each request
      c ← HttpCommand.New ''
      c.(AuthType Auth) ← 'bearer' bearerToken
</code></pre>
<p>First we need to get the id for the Twitter account we want to look at. Twitter returns its response payload in JSON, so we can have <code>HttpCommand</code> automatically convert the JSON into an APL object by setting <code>TranslateData</code> to 1. If there are no errors in the request, Twitter will put the response's data in an object called <code>'data'</code>. </p>
<pre><code>      c.TranslateData ← 1 ⍝ have HttpCommand translate known data types
      c.URL ← apiURL,'users/by?usernames=dyalogapl'
      ⊢id ← ⊃(c.Run).Data.data.id ⍝ get the id for user &quot;dyalogapl&quot;
36050079
      c.URL ← apiURL,'users/',id,'/tweets?tweet.fields=created_at'
      ⊢ r ← c.Run
[rc: 0 | msg:  | HTTP Status: 200 &quot;OK&quot; | ⍴Data: ⍬]
      ≢ tweets ← r.Data.data ⍝ how many tweets were returned?      
10
      ↑(4↑tweets).((10↑created_at) (50↑text))
 2022-07-26  Remember to submit your solutions to the annual AP 
 2022-07-25  Dyalog ’22 – make sure you register for Dyalog ’22 
 2022-07-20  The APL practice problems site https://t.co/1SEoa5 
 2022-07-15  There are only two weeks until the 10% Early Bird  
</code></pre></section><section class="print-page" id="trouble"><p>In a perfect world, all HTTP requests would be well-formed, target hosts would be available, and APIs well-documented.  Unfortunately, we don't live in a perfect world and so, in this section, we attempt to provide you with some guidance for troubleshooting requests that aren't working as you expect.</p>
<p>The result namespace returned by <code>HttpCommand.Run</code> contains information that may help in troubleshooting. The display format of the result contains some useful information:
* <code>rc</code> is the <code>HttpCommand</code>'s return code
* <code>msg</code> is a diagnostic message if <code>rc≠0</code>
* <code>HTTP Status</code> indicates the host's HTTP return code and status message
* <code>⍴Data</code> indicates the shape of the payload, if any, received in the response. This is the shape of the payload data after any automatic conversion done by <code>HttpCommand</code>.   </p>
<h4 id="trouble-first-check-rc-and-msg">First check <code>rc</code> and <code>msg</code></h4>
<p>If <code>rc</code> is not 0, <code>msg</code> should have relevant information about what went wrong. <code>rc</code> values less than 0 indicate a problem that wasn't Conga-related. <code>rc</code> values greater than 0 are the Conga return code if there was a Conga-related error.</p>
<pre><code>      HttpCommand.Get ''
[rc: ¯1 | msg: No URL specified | HTTP Status:  &quot;&quot; | ⍴Data: 0]

      HttpCommand.Get 'non_existent_url'
[rc: 1106 | msg: Conga client creation failed  ERR_INVALID_HOST  Host 
identification not resolved  | HTTP Status:  &quot;&quot; | ⍴Data: 0]
</code></pre>
<h4 id="trouble-check-httpmessage-and-data">Check <code>HttpMessage</code> and <code>Data</code></h4>
<p>If <code>rc=0</code>, but <code>HttpStatus</code> is not what you expect, examine both <code>HttpMessage</code> and <code>Data</code>.  In the example below, GitHub returns a URL pointing to their API documentation for getting information about an organization.</p>
<pre><code>      ⊢r ← HttpCommand.Get 'https://api.github.com/orgs/bloofo'
[rc: 0 | msg:  | HTTP Status: 404 &quot;Not Found&quot; | ⍴Data: 109]
      r.HttpMessage
Not Found
      r.Data
{&quot;message&quot;:&quot;Not Found&quot;,&quot;documentation_url&quot;:&quot;https://docs.github.com/rest/reference/orgs#get-an-organization&quot;}
</code></pre>
<h4 id="trouble-examine-the-request-that-httpcommand-will-send">Examine the request that <code>HttpCommand</code> will send</h4>
<p>It can be useful to examine the actual request that <code>HttpCommand</code> will send to the host. Many web services will publish sample requests that you can use for comparison. Check that the headers, particularly <code>content-type</code>, are correct.</p>
<p>The instance setting <code>RequestOnly</code> controls whether <code>HttpCommand</code> will send the request to the host or simply return the request that <em>would</em> be sent to the host. You can set <code>RequestOnly</code> in several ways:
* Pass 1 as the optional left argument to the shortcut methods <code>Get</code>, <code>GetJSON</code>, or <code>Do</code>.</p>
<pre><code>       method ← 'post'
       url ← 'www.someurl.net'
       payload ← ⍳10
       headers ← 'a-header' 'some value'
       1 HttpCommand.GetJSON method url payload headers
POST / HTTP/1.1
a-header: some value
Host: www.someurl.net
User-Agent: Dyalog/HttpCommand
Accept: */*
Content-Type: application/json;charset=utf-8
Content-Length: 22

[1,2,3,4,5,6,7,8,9,10]
</code></pre>
<ul>
<li>Pass 1 as the optional left argument to the <code>New</code> shortcut method and then run the <code>Run</code> method. Be sure to set <code>RequestOnly</code> back to 0 before sending the request to the host.</li>
</ul>
<pre><code>      c ← 1 HttpCommand.New 'get' 'dyalog.com'
      c.Run
GET / HTTP/1.1
Host: dyalog.com
User-Agent: Dyalog/HttpCommand
Accept: */*
      c.RequestOnly←0
      c.Run
[rc: 0 | msg:  | HTTP Status: 200 &quot;OK&quot; | ⍴Data: 20684]
</code></pre>
<ul>
<li>Use the <code>Show</code> instance method. </li>
</ul>
<pre><code>      c ← HttpCommand.New ''
      c.URL ← 'someurl.com/stuff'
      c.Command ← 'get'
      c.Params ← 'name' 'Drake Mallard'
      'header-name' c.AddHeader 'header value'
      c.Show
GET /stuff?name=Drake%20Mallard HTTP/1.1
header-name: header value
Host: someurl.com
User-Agent: Dyalog/HttpCommand
Accept: */*
</code></pre>
<h4 id="trouble-debug-mode">Debug Mode</h4>
<p>Setting <code>HttpCommand.Debug←1</code> will disable <code>HttpCommand</code>'s error checking and cause <code>HttpCommand</code> to suspend if and where an error occurs.</p>
<p>Setting <code>HttpCommand.Debug←2</code> will cause <code>HttpCommand</code> to suspend just before it attempts to create the client connection to the host.  This will give you the opportunity to examine the request's state and step through the code.</p>
<p><strong>Note:</strong> <code>HttpCommand.Debug</code> is a shared setting and will affect all instances of <code>HttpCommand</code>.</p></section><h1 class='nav-section-title-end'>Ended: Usage</h1>
                        <h1 class='nav-section-title' id='section-reference'>
                            Reference <a class='headerlink' href='#section-reference' title='Permanent link'>↵</a>
                        </h1>
                        
                        <h2 class='nav-section-title' id='section-settings'>
                            Settings <a class='headerlink' href='#section-settings' title='Permanent link'>↵</a>
                        </h2>
                        <section class="print-page" id="request-settings"><p>Request-related settings are settings you use to specify attributes of the HTTP request that <code>HttpCommand</code> will process.</p>
<h2 id="request-settings-settings">Settings</h2>
<h3 id="request-settings-command"><code>Command</code></h3>
<table><tr>
<td>Description</td>
<td>The case-insensitive HTTP command (method) for the request. <code>Command</code> is not limited to standard HTTP methods like GET, POST, PUT, HEAD, OPTIONS, and DELETE, but can be any string provided that the host has implemented support for it.</td></tr>
<tr><td>Default</td><td><code>'GET'</code></td></tr>
<tr><td>Example(s)</td><td><code>h.Command←'POST'</code></td></tr></table>

<h3 id="request-settings-url"><code>URL</code></h3>
<table><tr>
<td>Description</td>
<td>The URL for the request.<br>The general format for <code>URL</code> is: 
<code>[scheme://][userinfo@]host[:port][/path][?query]</code><br>
At a minimum the <code>URL</code> must specify the host.</td></tr>
<tr><td>Default</td><td><code>''</code></td></tr>
<tr><td>Example(s)</td><td><code>h.URL←'dyalog.com'<br>h.URL←'https://user:pwd@adomain.com:8080/apath/endpoint?name=Drake</code></td></tr>
<tr><td>Details</td><td>
A URL has the general format:<br><code>[scheme://][userinfo@]host[:port][/path][?query]</code>
<br><br>
So, a URL can be as simple as just a host name like <code>'dyalog.com'</code> or as complex as <code>'https://username:password@ducky.com:1234/?id=myid&time=1200'</code>
<br><br>
The only mandatory segment is the <code>host</code>; <code>HttpCommand</code> will infer or use default information when it builds the HTTP request to be sent.
<ul>
<li>
scheme - if supplied, it must be either <code>'http'</code>, or <code>'https'</code> for a secure connection.  If not supplied, <code>HttpCommand</code> will use <code>'http'</code> unless you have specified the default HTTPS port (443) or provided SSL certificate parameters.
</li><li>
userinfo - used for HTTP Basic authentication. HTTP Basic authentication has generally been deprecated, but may still be supported by some hosts. If userinfo is supplied, <code>HttpCommand</code> will create a proper Base64-encoded <code>authorization</code> header.
</li><li>
host - the host/domain for the request
</li><li>
port - if not supplied, <code>HttpCommand</code> will use the default HTTP port (80) unless the HTTPS scheme is used or certificate parameters are specified in which case the default HTTPS port (443) is used.
</li><li>
path - the location of the resource within the domain. If not supplied, it's up to the domain's server to determine the default path.
</li><li>
query - the query string for the request. If the HTTP method for the request is <code>'GET'</code> or <code>'HEAD'</code> and request parameters are specified in <code>Params</code>, <code>HttpCommand</code> will properly format them and append them to the query string. If you choose to supply query string parameters directly, they should be properly URLencoded. (see <a href="#request-settings-shared-urlencode"><code>URLencode</code></a>)
</li></ul>
</td></tr></table>

<h3 id="request-settings-params"><code>Params</code></h3>
<table>
    <tr>
        <td>Description</td>
        <td>The parameters or payload, if any, for the request. <code>Params</code> can be a set of <a href="#request-settings-namevalue-pairs">name/value pairs</a> or a character vector that is properly formatted for the <a href="#request-settings-contenttype"><code>ContentType</code></a> or <a href="#request-settings-command"><code>Command</code></a> of the
            request. See <a href="#request-settings-params-details">details</a> for more information.</td>
    </tr>
    <tr>
        <td>Default</td>
        <td><code>''</code></td>
    </tr>
    <tr>
        <td>Example(s)</td>
        <td>The following examples are
            equivalent:<br /><code>h.Params←(('name' 'dyalog') ('age' 39))</code><br /><code>h.Params←'name=dyalog&age=39'</code><br /><code>ns←⎕NS '' ⋄ ns.(name age)←'dyalog' 39 ⋄ h.Params←ns</code>
        </td>
    </tr>
    <tr>
        <td>Details</td>
        <td>The interpretation of <code>Params</code> is dependent on <code>Command</code> and the content type of the
            request. The content type is determined by the <a href="#request-settings-contenttype"><code>ContentType</code></a> setting or
            the presence of a <code>content-type</code> header.<br /><br /><code>Params</code>, if not empty, is processed
            as follows:<ul>
                <li>If <code>Command</code> is neither <code>'GET'</code> nor <code>'HEAD'</code> and no content type has been
                    specified, <code>HttpCommand</code> will specify the default content type
                    of <code>'x-www-form-urlencoded'</code>.</li>
                <li>If the content type of the request is specified, <code>HttpCommand</code> will set the
                    formatted <code>Params</code> as the payload of the request. <code>Params</code> is formatted based on
                    the content type:<ul>
                        <li><code>'x-www-form-urlencoded'</code>: <code>Params</code> will be URLEncoded using <a href="#request-settings-shared-urlencode"><code>UrlEncode</code></a>.</li>
                        <li><code>'application/json'</code>:<ul>
                                <li>If <code>Params</code> is a character vector that is a valid JSON representation,it is
                                    left unaltered.</li>
                                <li>Otherwise <code>Params</code> will be converted to JSON format
                                    using <code>1 ⎕JSON</code>.</li>
                                <li>In the case where <code>Params</code> is an APL character vector that is also valid
                                    JSON, you should JSON encode it prior to setting <code>Params</code>. For example, if
                                    you have the character vector <code>'[1,2,3]'</code> and you want it treated as a
                                    string in JSON and not thenumeric array <code>[1,2,3]</code>, you should process it
                                    yourself using <code>1 ⎕JSON</code>.</li>
                            </ul>
                        </li>
                        <li>For any other content type, it is the responsibility of theuser to
                            format <code>Params</code> appropriately for the content type.</li>
                    </ul>
                </li>
                <li>If <code>Command</code> is either <code>'GET'</code> or <code>'HEAD'</code> (and no content type has been
                    specified), <code>HttpCommand</code> will append the formatted <code>Params</code> to the query string
                    of <code>URL</code>. In this case, <code>Params</code> is formatted as follows:<ul>
                        <li>If <code>Params</code> is a simple array:<ul>
                                <li>If <code>P←(∊⍕Params)</code> consists entirely of valid URLEncoded characters, <code>P</code> is
                                    appended to the query string. (see <a href="#request-settings-shared-ValidFormUrlEncodedChars"><code>ValidFormUrlEncodedChars</code></a>)</li>
                                <li>Otherwise <code>HttpCommand</code> will URLEncode <code>P</code> and append the result
                                    to the query string.</li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </td>
    </tr>
</table>

<h3 id="request-settings-headers"><code>Headers</code></h3>
<table><tr>
<td>Description</td>
<td>The HTTP headers for the request. Specified as one of:
<ul><li>a set of <a href="#request-settings-namevalue-pairs">name/value pairs</a>.</li>
<li>a character vector of of one or more name/value pairs in the form <code>'name:value'</code> separated by CRLF  (<code>⎕UCS 13 10</code>).</li>
<li>a vector of character vectors, each in the form <code>'name:value'</code></li>
</td></tr>
<tr><td>Default</td><td>By default, <code>HttpCommand</code> will create the following headers if you have not supplied them yourself:<br/>
<code>Host: </code>the host specified in <code>URL</code><br/>
<code>User-Agent: 'Dyalog/HttpCommand 5.0.1'</code> or whatever the version happens to be</code><br/>
<code>Accept: '*/*'</code><br/><br/>
If the request content type has been specified, <code>HttpCommand</code> will insert an appropriate <code>content-type</code> header.
If the request has content in the request payload, Conga will automatically supply a <code>content-length</code> header.
</td></tr>
<tr><td>Example(s)</td><td>The following examples are equivalent:<br/>
<code>h.Headers←'accept' 'text/html' 'content-type' 'test/plain'</code>
<br/>
<code>h.Headers←('accept' 'text/html')('content-type' 'test/plain')</code>
<br/>
<code>h.Headers←'accept:text/html',(⎕UCS 13 10),'content-type:text/plain'</code>
<br/>
<code>h.Headers←('accept:text/html')('content-type:text/plain')</code></td></tr></table>

<h3 id="request-settings-contenttype"><code>ContentType</code></h3>
<table><tr>
<td>Description</td>
<td>This setting is a convenient shortcut for setting the <code>content-type</code> HTTP header of the request. If you happen set both <code>ContentType</code> and a <code>content-type</code> header, <code>ContentType</code> takes precedence.
</td></tr>
<tr><td>Default</td><td><code>''</code></td></tr>
<tr><td>Example(s)</td><td><code>h.ContentType←'application/json; charset=UTF-8'</code></td></tr></table>

<h3 id="request-settings-auth"><code>Auth</code></h3>
<table><tr>
<td>Description</td>
<td>This setting is the authentication/authorization string appropriate for the authentication scheme specified in <code>AuthType</code>. Used along with <a href="#request-settings-authtype">AuthType</a>, is a shortcut for setting the authorization HTTP header for requests that require authentication.  If <code>Auth</code> is non-empty, <code>HttpCommand</code> will create an <code>'authorization'</code> header and and set its value to <code>AuthType,' ',Auth</code>. If you happen set both <code>Auth</code> and an <code>authorization</code> header, <code>Auth</code> takes precedence.
</td></tr>
<tr><td>Default</td><td><code>''</code></td></tr>
<tr><td>Example(s)</td><td><code>h.Auth←'my-secret-token'</code>
<br/>
<code>h.Auth←h.Base64Encode 'userid:password' ⍝ HTTP Basic Authentication</code></td></tr>
<tr><td>Details</td>
<td>For HTTP Basic Authentication, <code>Auth</code> should be set to <code>HttpCommand.Base64Encode 'userid:password'</code>.<br/><br/>Alternatively, if you provide HTTP Basic credentials in the <code>URL</code> as in <code>'https://username:password@someurl.com'</code>, <code>HttpCommand</code> will automatically generate a proper <code>'authorization'</code> header.  
</td></tr></table>

<h3 id="request-settings-authtype"><code>AuthType</code></h3>
<table><tr>
<td>Description</td>
<td>This setting is used in conjunction with <a href="#request-settings-auth">Auth</a> and is a character vector indicating the authentication scheme. Three common authentication schemes are:
<ul><li><code>'basic'</code> for HTTP Basic Authentication</li><li><code>'bearer'</code> for OAuth 2.0 token authentication</li><li><code>'token'</code> for other token-based authentication schemes such as GitHub's Personal Access Token scheme</li></ul>
Other values may be used as necessary for your particular HTTP request.</td></tr>
<tr><td>Default</td><td><code>''</code></td></tr>
<tr><td>Example(s)</td><td><code>h.AuthType←'bearer'</code><br/>
<code>h.(AuthType Auth)←'basic' (h.Base64Encode 'userid:password')</code></td></tr></table>

<h3 id="request-settings-cookies"><code>Cookies</code></h3>
<table><tr>
<td>Description</td>
<td><code>Cookies</code> is a vector of namespaces, each containing a representation of an HTTP cookie. It contains cookies sent by the host that may be used in a series of requests to the same host. This setting should be considered read-only.</td></tr>
<tr><td>Default</td><td><code>''</code></td></tr>
<tr><td>Example(s)</td><td><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(c ← HttpCommand.New 'get' 'github.com').Run</code><br/>
<code>[rc: 0 | msg:  | HTTP Status: 200 "OK" | ⍴Data: 299959]
</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;≢ c.Cookies</code><br/>
<code>3</code><br/>

<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;↑c.Cookies.(Name Host ('DD-MMM-YYYY'(1200⌶)Creation))</code><br/>
<code>&nbsp;_gh_sess   github.com   05-AUG-2022</code><br/>  
<code>&nbsp;_octo      github.com   05-AUG-2022</code><br/>  
<code>&nbsp;logged_in  github.com   05-AUG-2022</code><br/>  
</td></tr></table>

<h2 id="request-settings-namevalue-pairs">Name/Value Pairs</h2>
<p><code>Params</code>, for an appropriate content type, and <code>Headers</code> can be specified as name/value pairs. <code>HttpCommand</code> gives you some flexibility in how you specify name/value pairs. You may use:</p>
<ul>
<li>A vector of depth <code>2</code> or <code>¯2</code> with an even number of elements.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>('name' 'dyalog' 'age' 39)</code></li>
<li>A vector of 2-element vectors, <code>HttpCommand</code> will treat each sub-vector as a name/value pair.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>(('name' 'dyalog') ('age' 39))</code></li>
<li>A 2-column matrix where each row represents a name/value pair.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>2 2⍴'name' 'dyalog' 'age' 39</code></li>
<li>A reference to a namespace, <code>HttpCommand</code> will treat the variables and their values in the namespace as name/value pairs.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>ns←⎕NS '' ⋄ ns.(name age)←'dyalog' 39</code><br>Note that the names will be alphabetical in the formatted output.</li>
</ul></section><section class="print-page" id="conga-settings"><p>In general, you will not need to set any of the Conga-related settings since the <code>HttpCommand</code>'s defaults will suffice for almost all requests. For more information on Conga, please refer to the <a href="https://docs.dyalog.com/latest/Conga%20User%20Guide.pdf" target="_blank">Conga User Guide</a>.</p>
<h2 id="conga-settings-instance-settings">Instance Settings</h2>
<h3 id="conga-settings-buffersize"><code>BufferSize</code></h3>
<table><tr>
<td>Description</td>
<td>The maximum number of bytes that <code>HttpCommand</code> will accept for the HTTP status and headers received from the host.</td></tr>
<tr><td>Default</td>
<td><code>200000</code></td></tr>
<tr><td>Example(s)</td>
<td><code>h.BufferSize←50000 ⍝ set a lower threshold</code></td></tr>
<tr><td>Details</td>
<td>By default, when using Conga's HTTP mode, as <code>HttpCommand</code> does, <code>BufferSize</code> applies only to the data received by the <code>HTTPHeader</code> event. The intent is to protect against a maliciously large response from the host.  If the data received by the <code>HTTPHeader</code> event exceeds <code>BufferSize</code>, <code>HttpCommand</code> will exit with a return code of 1135.</td></tr></table>

<h3 id="conga-settings-waittime"><code>WaitTime</code></h3>
<table><tr>
<td>Description</td>
<td>The number of milliseconds that Conga will wait (listen) for a response before timing out.</td></tr>
<tr><td>Default</td>
<td><code>5000</code></td></tr>
<tr><td>Example(s)</td>
<td><code>h.WaitTime←10000 ⍝ wait 10 seconds</code></td></tr>
<tr><td>Details</td>
<td>Applies only to the time Conga will wait for a response, not how long <code>HttpCommand</code> will wait which is controlled by the <a href="#conga-settings-operational-settings.md-timeout"><code>Timeout</code></a> setting. In general, this setting should be set to an acceptable amount of time for the host to respond to the HTTP request.</td></tr></table>

<h3 id="conga-settings-cert"><code>Cert</code></h3>
<table><tr>
<td>Description</td>
<td>The certificate specification to be used for secure communications over SSL/TLS. If set, <code>Cert</code> can be either:
<ul><li>an instance of the Conga <code>X509Cert</code> class</li>
<li>a 2-element vector of character vectors representing the full path names to a public certificate file and a private key file. This is a shortcut that can be used instead of specifying both the <code>PrivateKeyFile</code> and <code>PublicCertFile</code> settings.</li>
</ul></td></tr>
<tr><td>Default</td>
<td><code>''</code></td></tr>
<tr><td>Example(s)</td>
<td><code>h.Init ⍝ initialize the local instance of Conga</code>
<br/>
<code>h.Cert← 1⊃h.LDRC.X509Cert.ReadCertUrls ⍝ use the first MS certificate store cert</code>
<br/><br/>
<code>h.Cert← 'path-to-certfile.pem' 'path-to-keyfile.pem'</code></td></tr>
<tr><td>Details</td>
<td>In most cases when using HTTPS for secure communications, the anonymous certificate that <code>HttpCommand</code> will create for you will suffice and you need not set <code>Cert</code>. It should only be necessary to assign <code>Cert</code> in those cases where you need to specify a certificate for authentication purposes.<br/><br/>
Note: <code>Cert</code> is also a positional argument for the shortcut methods (<code>Get</code>, <code>GetJSON</code>, <code>Do</code>, and <code>New</code>) as well as the <code>HttpCommand</code> constructor. <code>Cert</code> appears after the <code>Headers</code> positional argument.  For example:<br/>
<code>h← HttpCommand.Get 'someurl.com' '' '' ('certfile.pem' 'keyfile.pem')</code></td></tr></table>

<h3 id="conga-settings-publiccertfile"><code>PublicCertFile</code></h3>
<table><tr>
<td>Description</td>
<td><code>PublicCertFile</code> is a character vector containing the full path to a public certificate file when using HTTPS for secure communications. <code>PublicCertFile</code> is used in conjunction with <a href="#conga-settings-privatekeyfile"><code>PrivateKeyFile</code></a></td></tr>
<tr><td>Default</td>
<td><code>''</code></td></tr>
<tr><td>Example(s)</td>
<td><code>h.PublicCertFile←'path-to-certfile.pem'</code></td></tr>
<tr><td>Details</td>
<td>The use of <code>Cert</code> and <code>PublicCertFile</code>/<code>PrivateKeyFile</code> are mutually exclusive and you should only one or the other. If both <code>Cert</code> and <code>PublicCertFile</code>/<code>PrivateKeyFile</code> are specified, <code>Cert</code> takes priority.</td></tr></table>

<h3 id="conga-settings-privatekeyfile"><code>PrivateKeyFile</code></h3>
<table><tr>
<td>Description</td>
<td><code>PrivateKeyFile</code> is a character vector containing the full path to a private key file when using HTTPS for secure communications. <code>PrivateKeyFile</code> is used in conjunction with <a href="#conga-settings-publiccertfile"><code>PublicCertFile</code></a></td></tr>
<tr><td>Default</td>
<td><code>''</code></td></tr>
<tr><td>Example(s)</td>
<td><code>h.PrivateKeyFile←'path-to-keyfile.pem'</code></td></tr>
<tr><td>Details</td>
<td>The use of <code>Cert</code> and <code>PublicCertFile</code>/<code>PrivateKeyFile</code> are mutually exclusive and you should only one or the other. If both <code>Cert</code> and <code>PublicCertFile</code>/<code>PrivateKeyFile</code> are specified, <code>Cert</code> takes priority.</td></tr></table>

<h3 id="conga-settings-sslflags"><code>SSLFlags</code></h3>
<table><tr>
<td>Description</td>
<td><code>SSLFlags</code> is used when using HTTPS for secure communications. It is a part of the certificate checking process and determines whether to connect to a server that does not have a valid certificate.</td></tr>
<tr><td>Default</td>
<td><code>32</code> which means accept the server certificate without checking it</td></tr>
<tr><td>Example(s)</td>
<td><code>h.SSLFlags←8</code></td></tr>
<tr><td>Details</td>
<td>For more information on the interpretation of <code>SSLFlag</code> values, see <a href="https://docs.dyalog.com/latest/Conga%20User%20Guide.pdf">Conga User Guide</a> Appendix C.<br/><br/>
Note: <code>SSLFlags</code> is also a positional argument for the shortcut methods (<code>Get</code>, <code>GetJSON</code>, <code>Do</code>, and <code>New</code>) as well as the <code>HttpCommand</code> constructor. <code>SSLFlags</code> appears after the <code>Cert</code> positional argument.</td></tr></table>

<h3 id="conga-settings-priority"><code>Priority</code></h3>
<table><tr>
<td>Description</td>
<td>The GnuTLS priority string that specifies the TLS session's handshake algorithms.</td></tr>
<tr><td>Default</td>
<td><code>'NORMAL:!CTYPE-OPENPGP'</code></td></tr>
<tr><td>Example(s)</td>
<td>h.Priority←'SECURE128:-VERS-TLS1.0'</td></tr>
<tr><td>Details</td>
<td>In general, you would use a different value than the default only in rare and very specific circumstances. See <a href="https://gnutls.org/manual/html_node/Priority-Strings.html">GnuTLS Priority Strings"</a> for more information.
<br/><br/>
Note: <code>Priority</code> is also a positional argument for the shortcut methods (<code>Get</code>, <code>GetJSON</code>, <code>Do</code>, and <code>New</code>) as well as the <code>HttpCommand</code> constructor. <code>Priority</code> appears after the <code>SSLFlags</code> positional argument.</td></tr></table>

<h2 id="conga-settings-shared-settings">Shared Settings</h2>
<p>Shared settings are set in the <code>HttpCommand</code> class and are used by all instances of <code>HttpCommand</code>.</p>
<h3 id="conga-settings-congapath"><code>CongaPath</code></h3>
<table><tr>
<td>Description</td>
<td>The path to Conga resources</td></tr>
<tr><td>Default</td>
<td><code>''</code></td></tr>
<tr><td>Example(s)</td>
<td><code>HttpCommand.CongaPath←'/myapp/dlls/'</code></td></tr>
<tr><td>Details</td>
<td>
This setting is intended to be used when Conga is not located in the Dyalog installation folder or the current folder, as might be the case when deploying <code>HttpCommand</code> as a part of a runtime application. <code>CongaPath</code> is used for two purposes:<ul><li>If the <code>Conga</code> or <code>DRC</code> namespace is not found in the <code>HttpCommand</code>'s parent namespace or in the root namespace (<code>#</code>), then <code>CongaPath</code> should be the path to the folder containing the <code>conga</code> workspace from which <code>HttpCommand</code> will copy the <code>Conga</code> namespace.</li>
<li><code>CongaPath</code> should be the path to the folder containing the Conga shared libraries</li></ul>See <a href="#conga">HttpCommand and Conga</a> and/or <a href="#integrating">Integrating HttpCommand</a> for more information.</td></tr></table>

<h3 id="conga-settings-congaref"><code>CongaRef</code></h3>
<table><tr>
<td>Description</td>
<td>A reference to the <code>Conga</code> or <code>DRC</code> namespace or to an initialized instance of the <code>Conga.LIB</code> class.</td></tr>
<tr><td>Default</td>
<td><code>''</code></td></tr>
<tr><td>Example(s)</td>
<td>HttpCommand.CongaRef← #.Utils.Conga</td></tr>
<tr><td>Details</td>
<td>This setting is intended to be used when your application has other components that use Conga. To avoid having multiple copies of Conga, you can set <code>CongaRef</code> to point to an existing copy of the Conga API.<br/>See <a href="#conga">HttpCommand and Conga</a> and/or <a href="#integrating">Integrating HttpCommand</a> for more information.</td></tr></table>

<h3 id="conga-settings-ldrc"><code>LDRC</code></h3>
<table><tr>
<td>Description</td>
<td>Once <code>HttpCommand</code> has been initialized by processing a request, <code>LDRC</code> is a reference to the Conga API that <code>HttpCommand</code> is using.</td></tr>
<tr><td>Default</td>
<td>N/A</td></tr>
<tr><td>Example(s)</td>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>HttpCommand.Get 'dyalog.com' ⍝ run a request</code><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>HttpCommand.LDRC.Version</code><br/>
<code>3 4 1612</td></tr>
<tr><td>Details</td>
<td><code>LDRC</code> should be treated as a read-only setting. It provides a means to access the Conga API which may be helpful for debugging and informational purposes.</td></tr></table>

<h3 id="conga-settings-congaversion"><code>CongaVersion</code></h3>
<table><tr>
<td>Description</td>
<td>Once <code>HttpCommand</code> has been initialized by processing a request, <code>CongaVersion</code> is the version number, in major.minor format, of the Conga API that <code>HttpCommand</code> is using.</td></tr>
<tr><td>Default</td>
<td>N/A</td></tr>
<tr><td>Example(s)</td>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>HttpCommand.Get 'dyalog.com' ⍝ run a request</code><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>HttpCommand.CongaVersion</code><br/>
<code>3.4</code></td></tr>
<tr><td>Details</td>
<td><code>CongaVersion</code> should be treated as a read-only setting. It provides information which may be helpful for debugging and informational purposes.</td></tr></table></section><section class="print-page" id="operational-settings"><p>Operational settings affect how <code>HttpCommand</code> behaves.</p>
<h2 id="operational-settings-instance-settings">Instance settings</h2>
<h3 id="operational-settings-keepalive"><code>KeepAlive</code></h3>
<table><tr>
<td>Description</td>
<td>A Boolean which indicates whether <code>HttpCommand</code> close the client connection after receiving the response from the host.<ul><li><code>1</code> = keep connection alive</l1><li><code>0</code> = close connection</li></ul></td></tr>
<tr><td>Default</td>
<td><code>1</code></td></tr>
<tr><td>Example(s)</td>
<td><code>h.KeepAlive←0 ⍝ close the connection</code></td></tr>
<tr><td>Details</td>
<td><code>KeepAlive</code> is only applicable when you persist an instance of <code>HttpCommand</code> and has no effect when you use the shortcut methods <code>Get</code>, <code>GetJSON</code>, or <code>Do</code> as these methods destroy the <code>HttpCommand</code> instance they create when they finish execution. HTTP version 1.1 specifies that connections should be kept alive to improve throughput. Nevertheless, a host may close the connection after sending the response or after a period of inactivity from the client (<code>HttpCommand</code>). If the connection is closed, <code>HttpCommand</code> will open a new connection on a subsequent request.</td></tr></table>

<h3 id="operational-settings-maxpayloadsize"><code>MaxPayloadSize</code></h3>
<table><tr>
<td>Description</td>
<td>The maximum response payload size that <code>HttpCommand</code> will accept.<ul><li><code>¯1</code> = no maximum</li><li><code>≥0</code> = maximum size</li></ul></td></tr>
<tr><td>Default</td>
<td><code>¯1</code></td></tr>
<tr><td>Example(s)</td>
<td><code>h.MaxPayloadSize←100000 ⍝ set a 100,000 byte limit</code></td></tr>
<tr><td>Details</td>
<td>If <code>MaxPayloadSize</code> is set to a value <code>≥0</code> and the response contains a payload, <code>HttpCommand</code> checks the payload size as follows:
<ul><li>If the response contains a <code>content-length</code> header, its value is compared to <code>MaxPayloadSize</code>. If exceeded, <code>HttpCommand</code> will return with a return code of <code>¯5</code> and no payload.</li><li>Otherwise, the response payload is sent in chunks and <code>HttpCommand</code> will accumulate each chunk and compare the total payload size to <code>MaxPayloadSize</code>. If exceeded, <code>HttpCommand</code> will return with a return code of <code>¯5</code> and whatever payload has been accumulated.</li></ul>In either case, if <code>MaxPayloadSize</code> is exceeded, the client connection will be closed.</td></tr>
</table>

<h3 id="operational-settings-maxredirections"><code>MaxRedirections</code></h3>
<table><tr>
<td>Description</td>
<td>The maximum number of redirections that <code>HttpCommand</code> will follow.<br/>
A setting of <code>¯1</code> means there is no limit to the number of redirections followed; exposing the possibility of an infinite redirection loop and eventually a <code>WS FULL</code> error. A setting of <code>0</code> means no redirections will be followed.</tr>
<tr><td>Default</td>
<td><code>10</code></td></tr>
<tr><td>Example(s)</td>
<td><code>h.MaxRedirections←0 ⍝ do not follow any redirections</code>
</td></tr>
<tr><td>Details</td>
<td>If the response HTTP status indicates a redirection (3XX) to another URL, <code>HttpCommand</code> will retain information about the current request in the <a href="#result-response-redirections"><code>Redirections</code></a> element of the result namespace and issue a new request to the new URL. <code>HttpCommand</code> will do this up to <code>MaxRedirections</code> times.<br/><br/> 
</td></tr></table>

<h3 id="operational-settings-outfile"><code>Outfile</code></h3>
<table><tr>
<td>Description</td>
<td><code>Outfile</code> has up to 2 elements:
<ul><li><code>[1] </code>The name of the file or folder to which <code>HttpCommand</code> will write the response payload.  
If a folder is specified, the file name will be the same as the resource specified in <code>URL</code>. </li>
<li><code>[2] </code>an optional flag indicating:
<ul><li><code>0 </code>do not write to an existing, non-empty file (the default)</li>
<li><code>1 </code>replace the contents, if any, if the file exists</li>
<li><code>2 </code>append to the file, if it exists</li></ul></li></ul></td></tr>
<tr><td>Default</td>
<td><code>'' 0</code></td></tr>
<tr><td>Example(s)</td>
<td><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c ← HttpCommand.New '' </code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.URL←'https://www.dyalog.com/uploads/files/student_competition/2022_problems_phase2.pdf'</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.OutFile←'/tmp/'</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.Run</code><br/>
<code>[rc: 0 | msg:  | HTTP Status: 200 "OK" | 399766 bytes written to c:/tmp/2022_problems_phase2.pdf]</code><br/>
</td></tr>
<tr><td>Details</td>
<td>Output to file is subject to <code>MaxPayloadSize</code>.</td></tr></table>

<h3 id="operational-settings-requestonly"><code>RequestOnly</code></h3>
<table><tr>
<td>Description</td>
<td>If set to 1, <code>HttpCommand</code> will return the character vector HTTP request that would be sent, instead of actually sending the request.</td></tr>
<tr><td>Default</td>
<td><code>0</code></td></tr>
<tr><td>Example(s)</td>
<td><code>h.RequestOnly←1</code></td></tr>
<tr><td>Details</td>
<td>This setting is useful for debugging a request that isn't behaving as you expect.<br/><br/>
Setting optional left argument of shared methods <code>Get</code>, <code>GetJSON</code>, <code>Do</code>, or <code>New</code> to <code>1</code> will have the same effect as setting <code>RequestOnly</code> as will the instance method <code>Show</code>.</td></tr></table>

<h3 id="operational-settings-suppressheaders"><code>SuppressHeaders</code></h3>
<table><tr>
<td>Description</td>
<td><code>SuppressHeaders</code> is a Boolean setting indicating whether <code>HttpCommand</code> should suppress the generation of its default HTTP headers for the request.<ul><li><code>1</code> - suppress the default headers</li><li><code>0</code> - generate the default headers</td></tr>
<tr><td>Default</td>
<td><code>0</code> which means <code>HttpCommand</code> will generate its default headers</td></tr>
<tr><td>Example(s)</td>
<td><code>h.SuppressHeaders←1</code></td></tr>
<tr><td>Details</td>
<td><code>HttpCommand</code> will only generate headers that you have not specified yourself. <code>HttpCommand</code> generates the following default headers:<ul><li><code>Host</code> - the host name in the URL. This header <b>must</b> be supplied.</li>
<li><code>User-Agent</code> - <code>Dyalog-HttpCommand/&lt;version&gt;</code></li>
<li><code>Accept</code> - <code>*/*</code>. By default, <code>HttpCommand</code> will accept any response type</li>
<li><code>Authorization</code> - set only if you provide HTTP Basic authentication credentials, or set <code>Auth</code> and  <code>AuthType</code.</li>
<li><code>Cookie</code> - any saved cookies applicable to the request.
</td></tr></table>

<h3 id="operational-settings-timeout"><code>Timeout</code></h3>
<table><tr>
<td>Description</td>
<td>The number of seconds that <code>HttpCommand</code> will count down to wait for a response. If <code>Timeout</code> is positive,  <code>HttpCommand</code> will wait to receive the complete response from the host. If <code>Timeout</code> is negative, the countdown will be reset to <code>|Timeout</code> if Conga has received any data.</td></tr>
<tr><td>Default</td>
<td><code>10</code></td></tr>
<tr><td>Example(s)</td>
<td>h.Timeout←30</td></tr>
<tr><td>Details</td>
<td><code>Timeout</code> should be set to a time value larger than <a href="#operational-settings-conga-settings.md-waittime"><code>WaitTime</code></a>.  Note that <code>Timeout</code> is in seconds and <code>WaitTime</code> is in milliseconds.</td></tr></table>

<h3 id="operational-settings-translatedata"><code>TranslateData</code></h3>
<table><tr>
<td>Description</td>
<td>Set this to <code>1</code> to have <code>HttpCommand</code> attempt to convert the response payload for the following content types.
<ul>
<li><code>'application/json'</code> - <code>HttpCommand</code> will use <code>⎕JSON</code></li>
<li><code>'text/xml'</code> or <code>'application/xml'<code> - <code>HttpCommand</code> will use <code>⎕XML</code></li>
</ul>
</td></tr>
<tr><td>Default</td>
<td><code>0</code></td></tr>
<tr><td>Example(s)</td>
<td><code>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c←HttpCommand.New 'get' 'https://api.github.com/users/dyalog'<br/><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.TranslateData←0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;50↑(⎕←c.Run).Data<br/>
[rc: 0 | msg:  | HTTP Status: 200 "OK" | ⍴Data: 1306]
{"login":"Dyalog","id":4189495,"node_id":"MDEyOk9y<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.TranslateData←1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(⎕←c.Run).Data<br/>
[rc: 0 | msg:  | HTTP Status: 200 "OK" | ⍴Data: ⍬]<br/>
#.[JSON object]
</code>
</td></tr></table>

<h2 id="operational-settings-shared-settings">Shared Settings</h2>
<p>Shared settings are set in the <code>HttpCommand</code> class and are used by all instances of <code>HttpCommand</code>.</p>
<h3 id="operational-settings-debug"><code>Debug</code></h3>
<table><tr>
<td>Description</td>
<td>Set <code>Debug</code> to 1 to turn off <code>HttpCommand</code>'s error trapping. In this case if an error occurs, execution of <code>HttpCommand</code> will be suspended.  Set <code>Debug</code> to 2 to have <code>HttpCommand</code> stop just before sending the request to the host so that you can examine the request and <code>HttpCommand</code>'s current state.  Both of these settings can be useful for debugging. </td></tr>
<tr><td>Default</td>
<td><code>0</code></td></tr>
<tr><td>Example(s)</td>
<td>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c←HttpCommand.New 'get' 'https://api.github.com/users/dyalog'</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.OutFile←0</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.Debug←1</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.Run</code><br/>
<code>DOMAIN ERROR: Invalid file or directory name</code><br/>
<code>HttpCmd[130] outFile←∊1 ⎕NPARTS outFile</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;∧</code><br/>
<br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.Debug←0</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.Run</code><br/>
<code>[rc: ¯1 | msg: DOMAIN ERROR while trying to initialize output file '0' | HTTP Status:  "" | ⍴Data: 0]</code>
</td></tr>
</table></section><h1 class='nav-section-title-end'>Ended: Settings</h1>
                        <h2 class='nav-section-title' id='section-shared-methods'>
                            Shared Methods <a class='headerlink' href='#section-shared-methods' title='Permanent link'>↵</a>
                        </h2>
                        <section class="print-page" id="shortcut-methods"><p>These "shortcut" methods make it easier to issue HTTP requests or create an instance of <code>HttpCommand</code>.</p>
<h3 id="shortcut-methods-get-issue-an-http-get-request"><code>Get</code> - issue an HTTP GET request</h3>
<p><code>Get</code> is probably <code>HttpCommand</code>'s most-used feature.  It issues an HTTP GET request and returns the response from the server. It can be used for many purposes including interacting with web services, downloading files, and returning the contents of web pages.</p>
<table>
<tr><td>Syntax</td>
<td><code>r ←{RequestOnly} HttpCommand.Get args</code></td></tr>
<tr><td><code>args</code></td>
<td>Either<ul><li>a vector of positional settings (only <code>URL</code> is required)<br/>
<code><a href="#shortcut-methods-request-settings-URL">URL</a>&nbsp;
<a href="#shortcut-methods-request-settings-Params">Params</a>&nbsp;
<a href="#shortcut-methods-request-settings-Headers">Headers</a>&nbsp;
<a href="#shortcut-methods-conga-settings-Cert">Cert</a>&nbsp;
<a href="#shortcut-methods-conga-settings-SSLFlags">SSLFlags</a>&nbsp;
<a href="#shortcut-methods-conga-settings-Priority">Priority</a>
</code><br/>
Intermediate positional parameters that are not used should be set to <code>''</code></li>
<li>A namespace containing named variables for the settings for the request.<br/><code>(args ← ⎕NS '').(URL Headers) ← 'someurl.com' ('header1' 'value1')</code>
</li></ul></td></tr>
<tr><td><code>RequestOnly</code></td>
<td>(optional) A Boolean indicating:<ul>
<li><code>0</code> - (default) send the HTTP request and return the response result. 
<li><code>1</code> - return the formatted HTTP request that HttpCommand <i>would</i> send if <code>RequestOnly</code> was <code>0</code>.</li></ul></td></tr>
<tr><td><code>r</code></td>
<td>If RequestOnly is<ul><li><code>0</code> - a namespace containing the request response.</li>
<li><code>1</code> - the formatted HTTP request that <code>HttpCommand</code> would send if <code>RequestOnly</code> was <code>0</code>.</td></tr>
<tr><td>Example(s)</td>
<td><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args ← ⎕NS ''</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args.URL ← 'httpbin.org'</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args.Params ← ('name' 'Donald')('species' 'duck')</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HttpCommand.Get args</code></br>
<code>[rc: 0 | msg:  | HTTP Status: 200 "OK" | ⍴Data: 339]</code><br/><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HttpCommand.Get 'httpbin.org/get' (('name' 'Donald')('species' 'duck'))</code><br/>
<code>[rc: 0 | msg:  | HTTP Status: 200 "OK" | ⍴Data: 339]</code><br/><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1 HttpCommand.Get args</code><br/>
<code>GET /get?name=Donald&species=duck HTTP/1.1</code><br/><br/>
<code>Host: httpbin.org</code><br/><br/>
<code>User-Agent: Dyalog-HttpCommand/5.0.2</code><br/><br/>
<code>Accept: */*</code>
</td></tr>
</table>

<h3 id="shortcut-methods-getjson-issue-a-request-to-a-json-based-web-service"><code>GetJSON</code> - issue a request to a JSON-based web service</h3>
<p><code>GetJSON</code> is used to interact with web services that use JSON for their request and response payloads. It was originally developed as a convenient way to interact with <a href="https://githib.com/dyalog/Jarvis">Jarvis</a>, Dyalog's JSON and REST Service framework. Conveniently, it turns out that there are many web services, including GitHub and Twitter, that use JSON as well. </p>
<p>When <code>Command</code> is something other than <code>GET</code> or <code>HEAD</code>, <code>GetJSON</code> will automatically convert APL <code>Params</code> into JSON format. For <code>GET</code> and <code>HEAD</code>, <code>HttpCommand</code> will URLEncode <code>Params</code> in the query string of the <code>URL</code>. The rationale behind this is that <code>GET</code> and <code>HEAD</code> requests should not have content; therefore <code>Params</code> should be included in the query string of <code>URL</code> and it doesn't make a lot of sense to include JSON in the query string.  If you really need JSON in the query string, you can use <code>⎕JSON</code> to convert <code>Params</code>.</p>
<p><code>GetJSON</code> will attempt to convert any JSON response payload into its equivalent APL representation. </p>
<table>
<tr><td>Syntax</td>
<td><code>r ←{RequestOnly} HttpCommand.GetJSON args</code></td></tr>
<tr><td><code>args</code></td>
<td>Either<ul><li>a vector of positional settings (<code>Command</code> and <code>URL</code> are required.)<br/>
<code><a href="#shortcut-methods-request-settings-Command">Command</a>&nbsp;
<a href="#shortcut-methods-request-settings-URL">URL</a>&nbsp;
<a href="#shortcut-methods-request-settings-Params">Params</a>&nbsp;
<a href="#shortcut-methods-request-settings-Headers">Headers</a>&nbsp;
<a href="#shortcut-methods-conga-settings-Cert">Cert</a>&nbsp;
<a href="#shortcut-methods-conga-settings-SSLFlags">SSLFlags</a>&nbsp;
<a href="#shortcut-methods-conga-settings-Priority">Priority</a>
</code><br/>
Intermediate positional parameters that are not used should be set to <code>''</code></li>
<li>A namespace containing named variables for the settings for the request.<br/>
</li></ul></td></tr>
<tr><td><code>RequestOnly</code></td>
<td>(optional) A Boolean indicating:<ul>
<li><code>0</code> - (default) send the HTTP request and return the response result. 
<li><code>1</code> - return the formatted HTTP request that HttpCommand <i>would</i> send if <code>RequestOnly</code> was <code>0</code>.</li></ul></td></tr>
<tr><td><code>r</code></td>
<td>If RequestOnly is<ul><li><code>0</code> - a namespace containing the request response.</li>
<li><code>1</code> - the formatted HTTP request that <code>HttpCommand</code> would send if <code>RequestOnly</code> was <code>0</code>.</td></tr>
<tr><td>Example(s)</td>
<td>These examples assume you have a <a href="https://github.com/dyalog/Jarvis"><code>Jarvis</code></a> service running at <code>http://localhost:8080</code> and a endpoint of <code>#.sum ← {+/⍵}</code>.<br/><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args ← ⎕NS ''</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args.Command ← 'post'</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args.URL ← 'localhost:8080/sum'</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args.Params ← ⍳1000</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⊢r ← HttpCommand.GetJSON args</code></br>
<code>[rc: 0 | msg:  | HTTP Status: 200 "OK" | ⍴Data: ⍬]</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r.Data</code><br/>
<code>500500</code><br/><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Params ← ('per_page' '3')('page' '1')('sort' 'full_name')</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;URL ← 'https://api.github.com/orgs/dyalog/repos'</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⊢r ← HttpCommand.GetJSON 'get' URL Params</code></br>
<code>[rc: 0 | msg:  | HTTP Status: 200 "OK" | ⍴Data: 3]</code><br/><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r.Data.full_name</code><br/>
<code>&nbsp;Dyalog/a3s-Linux  Dyalog/APLCourse  Dyalog/aplssh </code><br/><br/>
</td></tr>
</table>

<h3 id="shortcut-methods-do-issue-a-generic-http-request"><code>Do</code> - issue a generic HTTP request</h3>
<p><code>Do</code> is essentially the same as <code>Get</code> except that you specify the HTTP method (<code>Command</code>) to use.</p>
<table>
<tr><td>Syntax</td>
<td><code>r ←{RequestOnly} HttpCommand.Do args</code></td></tr>

<tr><td><code>args</code></td>
<td>Either<ul><li>a vector of positional settings (<code>Command</code> and <code>URL</code> are required)<br/>
<code><a href="#shortcut-methods-request-settings-Command">Command</a>&nbsp;
<a href="#shortcut-methods-request-settings-URL">URL</a>&nbsp;
<a href="#shortcut-methods-request-settings-Params">Params</a>&nbsp;
<a href="#shortcut-methods-request-settings-Headers">Headers</a>&nbsp;
<a href="#shortcut-methods-conga-settings-Cert">Cert</a>&nbsp;
<a href="#shortcut-methods-conga-settings-SSLFlags">SSLFlags</a>&nbsp;
<a href="#shortcut-methods-conga-settings-Priority">Priority</a>
</code><br/>
Intermediate positional parameters that are not used should be set to <code>''</code></li>
<li>A namespace containing named variables for the settings for the request.<br/><code>(args ← ⎕NS '').(Command URL Headers) ← 'post' 'someurl.com' ('header1' 'value1')</code>
</li></ul></td></tr>

<tr><td><code>RequestOnly</code></td>
<td>(optional) A Boolean indicating:<ul>
<li><code>0</code> - (default) send the HTTP request and return the response result. 
<li><code>1</code> - return the formatted HTTP request that HttpCommand <i>would</i> send if <code>RequestOnly</code> was <code>0</code>.</li></ul></td></tr>

<tr><td><code>r</code></td>
<td>If RequestOnly is<ul><li><code>0</code> - a namespace containing the request response.</li>
<li><code>1</code> - the formatted HTTP request that <code>HttpCommand</code> would send if <code>RequestOnly</code> was <code>0</code>.</td></tr>

<tr><td>Example(s)</td>
<td><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args ← ⎕NS ''</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args.(Command URL) ← 'post' 'httpbin.org/post'</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args.Params ← ('name' 'Donald')('species' 'duck')</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HttpCommand.Do args</code></br>
<code>[rc: 0 | msg:  | HTTP Status: 200 "OK" | ⍴Data: 465]</code><br/><br/>
</td></tr>
</table>

<h3 id="shortcut-methods-new-create-a-new-instance-of-httpcommand"><code>New</code> - create a new instance of <code>HttpCommand</code></h3>
<p><code>New</code> is different than the other shortcut methods in that it returns an instance of <code>HttpCommand</code>.  <code>Get</code>, <code>GetJSON</code>, and <code>Do</code> all create an instance, run it, return the response namespace, and upon exit the instance is destroyed.</p>
<p><code>New</code> can be useful for maintaining state information, like HTTP cookies across multiple requests or keeping the connection to the host open so that subsequent requests to the host are processed without the overhead of re-establishing the connection.</p>
<p>After specifying the settings in the instance, run the <code>Run</code> instance method to execute the request. </p>
<table>
<tr><td>Syntax</td>
<td><code>instance ←{RequestOnly} HttpCommand.New args</code></td></tr>

<tr><td><code>args</code></td>
<td>Either:<ul>
<li>a vector, possibly empty, of positional settings<br/>
<code><a href="#shortcut-methods-request-settings-Command">Command</a>&nbsp;
<a href="#shortcut-methods-request-settings-URL">URL</a>&nbsp;
<a href="#shortcut-methods-request-settings-Params">Params</a>&nbsp;
<a href="#shortcut-methods-request-settings-Headers">Headers</a>&nbsp;
<a href="#shortcut-methods-conga-settings-Cert">Cert</a>&nbsp;
<a href="#shortcut-methods-conga-settings-SSLFlags">SSLFlags</a>&nbsp;
<a href="#shortcut-methods-conga-settings-Priority">Priority</a>
</code><br/>
Intermediate positional parameters that are not used should be set to <code>''</code></li>
<li>A namespace containing named variables for the settings for the request.<br/><code>(args ← ⎕NS '').(Command URL Headers) ← 'post' 'someurl.com' ('header1' 'value1')</code>
</li></ul></td></tr>

<tr><td><code>RequestOnly</code></td>
<td>(optional) A Boolean indicating when <code>Run</code> is executed:<ul>
<li><code>0</code> - (default) send the HTTP request and return the response result. 
<li><code>1</code> - return the formatted HTTP request that HttpCommand <i>would</i> send if <code>RequestOnly</code> was <code>0</code>.</li></ul></td></tr>

<tr><td><code>instance</code></td>
<td>An instance of <code>HttpCommmand</code>.</td></tr>

<tr><td>Example(s)</td>
<td>Use a namespace for the request settings:<br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args ← ⎕NS ''</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args.(Command URL) ← 'post' 'httpbin.org/post'</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args.Params ← ('name' 'Donald')('species' 'duck')</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cmd ← HttpCommand.New args</code></br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cmd.Run</code></br>
<code>[rc: 0 | msg:  | HTTP Status: 200 "OK" | ⍴Data: 465]</code><br/><br/>
Create an instance of <code>HttpCommand</code> and set the settings directly:<br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cmd ← HttpCommand.New '' ⍝ synonym for cmd ← ⎕NEW HttpCommand</code></br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cmd.(Command URL) ← 'post' 'httpbin.org/post'</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cmd.Params ← ('name' 'Donald')('species' 'duck')</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cmd.Run</code></br>
<code>[rc: 0 | msg:  | HTTP Status: 200 "OK" | ⍴Data: 465]</code><br/><br/>
Set RequestOnly, display the request that would be sent, then send it</br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cmd ← 1 HttpCommand.New 'get' 'dyalog.com'</code></br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cmd.Run</code></br>
<code>GET / HTTP/1.1</code><br/>
<code>Host: dyalog.com</code><br/>
<code>User-Agent: Dyalog-HttpCommand/5.0.4</code><br/>
<code>Accept: */*</code><br/><br/><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cmd.RequestOnly←0</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cmd.Run</code><br/>
<code>[rc: 0 | msg:  | HTTP Status: 200 "OK" | ⍴Data: 23127]</code><br/>
</td></tr>
</table></section><section class="print-page" id="encode-methods"><h2 id="encode-methods-base64-encoding">Base64 Encoding</h2>
<p>Base64 is a binary-to-text encoding scheme that is used to transmit binary data over channels the only reliably support text content. Among Base64's uses are:</p>
<ul>
<li>Embed images or other binary assets in HTML files.</li>
<li>Encode user credentials for HTTP Basic Authentication  </li>
</ul>
<h3 id="encode-methods-base64decode"><code>Base64Decode</code></h3>
<p>Decode a Base64-encoded string or single-byte integer vector.</p>
<table>
<tr><td>Syntax</td>
<td><code>out←{cpo} HttpCommand.Base64Decode b64</code></td></tr>
<tr><td><code>b64</code></td>
<td>Either a single-byte integer or character vector to be decoded</td></tr>
<tr><td><code>cpo</code></td>
<td>(optional) If set to 0 or not supplied, Base64Decode will perform UTF-8 conversion on the result. If set to 1, no conversion will be performed. In almost all cases, you can ignore (and not supply) this argument.</td></tr>
<tr><td><code>out</code></td>
<td>A character vector representing the decodes base-64 right argument.</td></tr>
<tr><td>Example(s)</td>
<td><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HttpCommand.Base64Decode 'RHlhbG9nIOKNuuKNtOKMig=='</code><br>
<code>Dyalog ⍺⍴⌊</code></td></tr>
</table>

<h3 id="encode-methods-base64encode"><code>Base64Encode</code></h3>
<p>Base64 encode a string or integer vector.</p>
<table>
<tr><td>Syntax</td>
<td><code>b64←{cpo} HttpCommand.Base64Encode in</code></td></tr>
<tr><td><code>in</code></td>
<td>Either an integer or character vector to be encoded</td></tr>
<tr><td><code>cpo</code></td>
<td>(optional) If set to 0 or not supplied, Base64Encode will first perform UTF-8 conversion on a character argument. If set to 1, no conversion will be performed. In almost all cases, you can ignore (and not supply) this argument.</td></tr>
<tr><td><code>b64</code></td>
<td>A character vector representing the base-64 encoding of the right argument.</td></tr>
<tr><td>Example(s)</td>
<td><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HttpCommand.Base64Decode 'RHlhbG9nIOKNuuKNtOKMig=='</code><br>
<code>Dyalog ⍺⍴⌊</code></td></tr>
</table>

<h2 id="encode-methods-url-encoding">URL Encoding</h2>
<p>URLs can only be sent over the Internet using the ASCII character set. However, URLs often contain characters outside the ASCII character set. URL encoding converts strings to a format acceptable for transmission over the Internet.  URLEncoding is also used to encode payloads for content-type <code>'application/x-www-form-urlencoded'</code>.</p>
<h3 id="encode-methods-urldecode"><code>UrlDecode</code></h3>
<p>URLDecode a URLEncoded string.</p>
<table>
<tr><td>Syntax</td>
<td><code>out←HttpCommand.UrlDecode in</code></td></tr>
<tr><td><code>in</code></td>
<td>A URLEncoded string</td></tr>
<tr><td><code>out</code></td>
<td>The URLDecoding of <code>in</code>.</td></tr>
<tr><td>Example(s)</td>
<td><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HttpCommand.UrlDecode 'Dyalog%20%E2%8D%BA%E2%8D%B4%E2%8C%8A'</code><br/>
<code>Dyalog ⍺⍴⌊</code><br/><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HttpCommand.UrlDecode 'name=Donald%20Duck'</code><br/>
<code>name=Donald Duck</code><br/><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HttpCommand.UrlDecode 'first=Donald&last=O%27Mallard'</code><br/>
<code>first=Donald&last=O'Mallard</code><br/>
</td></tr>
</table>

<h3 id="encode-methods-urlencode"><code>UrlEncode</code></h3>
<p>URLEncode a string or a set of name/value pairs.</p>
<table>
<tr><td>Syntax</td>
<td><code>out←{name} HttpCommand.UrlEncode in</code></td></tr>
<tr><td><code>in</code></td>
<td>One of:<ul>
<li>a simple character vector to be URLEncoded</li>
<li>a set of <a href="#request-settings-namevalue-pairs">name/value pairs</a></li>
</ul></td></tr>
<tr><td><code>name</code></td>
<td>(optional) The name for the URLEncoded right argument. Applies only in the case where <code>in</code> is a simple character vector.</td></tr>
<tr><td><code>out</code></td>
<td>The URLEncoding of <code>in</code>.</td></tr>
<tr><td>Example(s)</td>
<td><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HttpCommand.UrlEncode 'Dyalog ⍺⍴⌊'</code><br/>
<code>Dyalog%20%E2%8D%BA%E2%8D%B4%E2%8C%8A</code><br/><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'name' HttpCommand.UrlEncode 'Donald Duck'</code><br/>
<code>name=Donald%20Duck</code><br/><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HttpCommand.UrlEncode ('first' 'Donald') ('last' 'O''Mallard')</code><br/>
<code>first=Donald&last=O%27Mallard</code><br/>
</td></tr>
</table></section><section class="print-page" id="misc-methods"><p>This section describes <code>HttpCommand</code> shared methods that don't conveniently fit into other categories.</p>
<h3 id="misc-methods-version"><code>Version</code></h3>
<p>Returns <code>HttpCommand</code> version information.</p>
<table>
<tr><td>Syntax</td>
<td><code>r←HttpCommand.Version</code></td><td>&nbsp;</tr>
<tr><td>Result</td>
<td>A 3-element vector of:<ul>
<li><code>'HttpCommand'</code></li>
<li>The version number</li>
<li>The version date</li>
</td></tr>
<tr><td>Example</td>
<td><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HttpCommand.Version</code><br/>
<code>&nbsp;HttpCommand  5.0.2  2022-08-03</code></td></tr>
</table>

<h3 id="misc-methods-documentation"><code>Documentation</code></h3>
<p>Returns a link to the documentation for <code>HttpCommand</code> that you can click on to navigate to this documentation.</p>
<table>
<tr><td>Syntax</td>
<td><code>r←HttpCommand.Documentation</code></td><td>&nbsp;</td></tr>
<tr><td>Example</td>
<td><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HttpCommand.Documentation</code><br/>
<code>See <a href="https://dyalog.github.io/HttpCommand/">https://dyalog.github.io/HttpCommand/</a></code></td></tr>
</table>

<h3 id="misc-methods-upgrade"><code>Upgrade</code></h3>
<p><code>Upgrade</code> checks GitHub for a newer version of <code>HttpCommand</code> and if one is found it will be <code>⎕FIX</code>ed in the workspace.</p>
<p>Note: <code>Upgrade</code> will only update the in-workspace copy of <code>HttpCommand</code> and will not update the version of <code>HttpCommand</code> found in the Dyalog installation folder. The installed version of <code>HttpCommand</code> is upgraded when updates to Dyalog APL are installed.<table></p>
<tr><td>Syntax</td>
<td><code>r←HttpCommand.Upgrade</code></td></tr>
<tr><td><code>r</code></td>
<td>a 2-element vector of<br/><ul><li>the return code which is <code>1</code> if <code>HttpCommand</code> was upgraded to a newer version, <code>0</code> if <code>HttpCommand</code> on GitHub is not newer than the current version, or <code>¯1</code> if there was an error <code>⎕FIX</code>ing <code>HttpCommand</code> from GitHub.
</li>
<li>character vector message describing the result</li>
</ul></td></tr>
<tr><td>Example</td>
<td><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HttpCommand.Upgrade</code><br/>
<code>
&nbsp;0&nbsp;&nbsp;Already using the most current version: HttpCommand 5.0.2 2022-08-03</code>
</td></tr>
</table></section><h1 class='nav-section-title-end'>Ended: Shared Methods</h1><section class="print-page" id="instance-methods"><p>The methods documented in this section are instance methods and may be called from an instance of <code>HttpCommand</code>. In the documentation below, we will use the name <code>instance</code> to represent an instance of <code>HttpCommand</code>. </p>
<h3 id="instance-methods-run"><code>Run</code></h3>
<p><code>Run</code> "runs" the HTTP request defined by the instance's settings. <code>Run</code> is called internally by the shared "shortcut" methods <code>Get</code>, <code>GetJSON</code>, and <code>Do</code>. </p>
<table>
<tr><td>Syntax</td>
<td><code>result←instance.Run</code></td><td>&nbsp;</tr>
<tr><td><code>result</code></td>
<td><code>result</code> depends on the <code>RequestOnly</code> setting.<br/><br/>
If <code>RequestOnly=1</code>, <code>Run</code> will return, if possible, the HTTP request that <i>would</i> be sent if <code>RequestOnly</code> was set to <code>0</code>. If <code>HttpCommand</code> cannot form a proper HTTP request, <code>Run</code> will return a <a href="#result">result namespace</a> with pertinent information.<br/><br/>
If <code>RequestOnly=0</code>, <code>Run</code> will return a <a href="#result">result namespace</a> containing the result of attempting to build and send the HTTP request specified by the instance's settings. 
</td></tr>
<tr><td>Examples</td>
<td><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance←HttpCommand.New ''</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance.RequestOnly←1</code><br/><br/>
There isn't sufficient information for <code>HttpCommand</code> to build a proper HTTP request.<br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⊢result ← instance.Run</code></br>
<code>[rc: ¯1 | msg: No URL specified | HTTP Status:&nbsp;&nbsp;"" | ⍴Data: 0]</code><br/><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance.URL←'dyalog.com'</code><br/>
Now, there's enough information to form a proper HTTP request.<br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⊢result ← instance.Run</code><br/>
<code>GET / HTTP/1.1<br/>
Host: dyalog.com<br/>
User-Agent: Dyalog-HttpCommand/5.0.3<br/>
Accept: */*<br/><br/></code>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance.RequestOnly←0</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⊢result ← instance.Run</code><br/>
<code>[rc: 0 | msg:  | HTTP Status: 200 "OK" | ⍴Data: 23127]</code>
</table>

<h3 id="instance-methods-show"><code>Show</code></h3>
<p>Returns the HTTP request that <code>HttpCommand</code> would send when <code>Run</code> is executed and <code>RequestOnly</code> is <code>0</code>.  <code>Show</code> is equivalent to setting <code>RequestOnly</code> to <code>1</code> and running <code>Run</code>.</p>
<table>
<tr><td>Syntax</td>
<td><code>r←instance.Show</code></td><td>&nbsp;</td></tr>
<tr><td>Example</td>
<td><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance ← HttpCommand.New 'get' 'dyalog.com'</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance.Show</code><br/>
<code>GET / HTTP/1.1</code><br/><br/>
<code>Host: dyalog.com</code><br/><br/>
<code>User-Agent: Dyalog-HttpCommand/5.0.3</code><br/><br/>
<code>Accept: */*</code>
</td></tr>
</table>

<h3 id="instance-methods-config"><code>Config</code></h3>
<p><code>Config</code> returns the current state of all <code>HttpCommand</code> settings.</p>
<table>
<tr><td>Syntax</td>
<td><code>r←instance.Config</code></td></tr>
<tr><td><code>r</code></td>
<td>A 2-column matrix where<br/>
<code>[;1] </code>contains the setting names<br/>
<code>[;2] </code>contains the corresponding setting values</td></tr>
<tr><td>Example</td>
<td>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance←HttpCommand.New 'get' 'dyalog.com'</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance.Config</code><br/>
<code>&nbsp;Auth</code><br/>
<code>&nbsp;AuthType</code><br/>
<code>&nbsp;BufferSize&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;200000</code><br/>
<code>&nbsp;Cert</code><br/>
<code>&nbsp;Command&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get</code><br/>                    
<code>&nbsp;CongaPath</code><br/>
<code>&nbsp;CongaRef</code><br/>
<code>&nbsp;CongaVersion</code><br/>
<code>&nbsp;ContentType</code><br/>
<code>&nbsp;Cookies</code><br/>
<code>&nbsp;Debug&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0</code><br/>
<code>&nbsp;Headers</code><br/>
<code>&nbsp;KeepAlive&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1</code><br/>                    
<code>&nbsp;LDRC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;not&nbsp;set</code><br/>                    
<code>&nbsp;MaxPayloadSize&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;¯1</code><br/>
<code>&nbsp;MaxRedirections&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10</code><br/>
<code>&nbsp;OutFile</code><br/>
<code>&nbsp;Params</code><br/>
<code>&nbsp;Priority&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NORMAL:!CTYPE-OPENPGP</code><br/>
<code>&nbsp;PrivateKeyFile</code><br/>
<code>&nbsp;PublicCertFile</code><br/>
<code>&nbsp;RequestOnly&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0</code><br/>
<code>&nbsp;SSLFlags&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;32</code><br/>
<code>&nbsp;SuppressHeaders&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0</code><br/>
<code>&nbsp;Timeout&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10</code><br/>
<code>&nbsp;TranslateData&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0</code><br/>
<code>&nbsp;URL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dyalog.com</code><br/>
<code>&nbsp;WaitTime&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5000</code><br/>
</td></tr>
</table>

<h3 id="instance-methods-init"><code>Init</code></h3>
<p><code>Init</code> initializes Conga, Dyalog's TCP/IP utility library. Normally, <code>HttpCommand</code> will initialize Conga when <code>Run</code> is first  called. <code>Init</code> is intended to be used when the user wants to "tweak" Conga prior to <code>Run</code> being executed. It's very unlikely that you'll ever need to use <code>Init</code>.</p>
<table>
<tr><td>Syntax</td>
<td><code>r←instance.Init</code></td></tr>
<tr><td><code>r</code></td>
<td>a 2-element vector of<br/><ul><li><code>[1]</code> the return code. <code>0</code> means Conga is initialized. Non-<code>0</code> indicates some error occurred in Conga initialization.</li>
<li><code>[2]</code> a message describing what went wrong if the return code is not <code>0</code></li>
</ul></td></tr>
<tr><td>Example</td>
<td><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance←HttpCommand.New ''</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance.CongaPath←'/doesnotexist'</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance.Init</code><br/>
<code>¯1  CongaPath "c:/doesnotexist/" does not exist</code>
</td></tr>
</table>

<h2 id="instance-methods-header-related-methods">Header-related Methods</h2>
<p>There are two sets of headers associated with an HTTP request - the request headers and the response headers. The methods described here deal with request headers.</p>
<p><code>HttpCommand</code>'s request headers are stored in the <code>Headers</code> setting which is a 2-column matrix of name/value pairs. Header names are case-insensitive; header values are not. While you can manipulate the <code>Headers</code> array directly, <code>HttpCommand</code> has three methods to manage <code>Headers</code> that accommodate the case-insensitive nature of header names.</p>
<p>Note: The examples below were run using <code>]boxing on</code>.</p>
<h3 id="instance-methods-addheader"><code>AddHeader</code></h3>
<p><code>AddHeader</code> will add a header if a header with that name does not already exist. Use <code>SetHeader</code> to set a header regardless if one with the same name already exists.</p>
<table>
<tr><td>Syntax</td>
<td><code>name instance.AddHeader value</code></td></tr>
<tr><td><code>value</code></td>
<td>the value for the header</td></tr>
<tr><td><code>name</code></td>
<td>the name for the header</td></tr>
<tr><td>Example</td>
<td><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance←HttpCommand.New ''</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'My-Header' instance.AddHeader 'Drake Mallard'</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance.Headers</code><br/>
<code>┌─────────┬─────────────┐</code><br/>
<code>│My-Header│Drake Mallard│</code><br/>
<code>└─────────┴─────────────┘</code><br/>
<code>AddHeader</code> will not replace an existing header with the same case-insensitive name<br/> 
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'my-header' instance.AddHeader 'Daffy Duck'</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance.Headers</code><br/>
<code>┌─────────┬─────────────┐</code><br/>
<code>│My-Header│Drake Mallard│</code><br/>
<code>└─────────┴─────────────┘</code><br/>
</td></tr>
</table>

<h3 id="instance-methods-setheader"><code>SetHeader</code></h3>
<p><code>SetHeader</code> will set a header, replacing one of the same name if it already exists.</p>
<table>
<tr><td>Syntax</td>
<td><code>name instance.SetHeader value</code></td></tr>
<tr><td><code>value</code></td>
<td>the value for the header</td></tr>
<tr><td><code>name</code></td>
<td>the name for the header</td></tr>
<tr><td>Example</td>
<td><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance←HttpCommand.New ''</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'My-Header' instance.SetHeader 'Drake Mallard'</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance.Headers</code><br/>
<code>┌─────────┬─────────────┐</code><br/>
<code>│My-Header│Drake Mallard│</code><br/>
<code>└─────────┴─────────────┘</code><br/><code>SetHeader</code> will replace an existing header with the same case-insensitive name<br/> 
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'my-header' instance.SetHeader 'Daffy Duck'</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance.Headers</code><br/>
<code>┌─────────┬──────────┐</code><br/>
<code>│My-Header│Daffy Duck│</code><br/>
<code>└─────────┴──────────┘</code><br/>
<code>
</td></tr>
</table>

<h3 id="instance-methods-removeheader"><code>RemoveHeader</code></h3>
<p><code>RemoveHeader</code> removes a header. If the header does not exist, <code>RemoveHeader</code> has no effect.</p>
<table>
<tr><td>Syntax</td>
<td><code>instance.RemoveHeader name</code></td></tr>
<tr><td><code>name</code></td>
<td>the case-insensitive name of the header to remove</td</tr>
<tr><td>Example</td>
<td><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'My-Header' instance.SetHeader 'Daffy Duck'</code></br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'another' instance.SetHeader 'some value'</code></br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance.Headers</code><br/>
<code>┌─────────┬──────────┐</code><br/>
<code>│My-Header│Daffy Duck│</code><br/>
<code>├─────────┼──────────┤</code><br/>
<code>│another&nbsp;&nbsp;│some value│</code><br/>
<code>└─────────┴──────────┘</code></br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance.RemoveHeader 'my-header'</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance.Headers</code><br/>
<code>┌───────┬──────────┐</code><br/>
<code>│another│some value│</code><br/>
<code>└───────┴──────────┘</code><br/>
</td></tr>
</table></section>
                        <h2 class='nav-section-title' id='section-result-namespace'>
                            Result Namespace <a class='headerlink' href='#section-result-namespace' title='Permanent link'>↵</a>
                        </h2>
                        <section class="print-page" id="result-operational"><p>For the purposes of this document, we will refer to <code>result</code> as the result namespace returned by <a href="#instance-methods-run"><code>Run</code></a> when <code>RequestOnly=0</code>. <code>result</code> contains information about the request and the response, if any, from the host. Some settings from the request are copied into <code>result</code>.</p>
<h3 id="result-operational-rc"><code>rc</code></h3>
<p>The operational return code. This indicates if <code>HttpCommand</code> was able to form and send an HTTP request and process the response from the host. The sign of <code>rc</code> indicates:</p>
<ul>
<li><code>rc=0</code> no operational error occurred.</li>
<li><code>rc&lt;0</code> an operational error occurred.</li>
<li><code>rc&gt;0</code> a Conga error occurred.</li>
</ul>
<p><code>rc</code> is further described in <a href="#msgs">Messages and Return Codes</a>. To verify that an HTTP request was successful, first check that <code>result.rc=0</code> and then that <a href="#result-response-httpstatus"><code>result.HttpStatus</code></a> is a HTTP status code you would expect from the host.</p>
<h3 id="result-operational-msg"><code>msg</code></h3>
<p>The operational status message. If <code>rc=0</code>, <code>msg</code> will generally be empty (<code>''</code>).  <code>msg</code> will contain (hopefully) helpful information as to the nature of the error or condition. <code>msg</code> is further described in <a href="#msgs">Messages and Return Codes</a>.</p>
<h3 id="result-operational-elapsed"><code>Elapsed</code></h3>
<p>The number of millseconds that the request took to process.</p>
<h3 id="result-operational-outfile"><code>OutFile</code></h3>
<p><code>OutFile</code> is copied from the <a href="#operational-settings-outfile"><code>OutFile</code> setting</a> so that, if the response payload is written to file, the result namespace has a record of the file name.</p>
<h3 id="result-operational-byteswritten"><code>BytesWritten</code></h3>
<p>If <code>OutFile</code> is non-empty, and the HTTP request wassuccessful, <code>BytesWritten</code> is the number of bytes written to that file named by <code>OutFile</code>.  Otherwise, <code>BytesWritten</code> is set to <code>¯1</code>. </p></section><section class="print-page" id="result-request"><p>For the purposes of this document, we will refer to <code>result</code> as the result namespace returned by <a href="#instance-methods-run"><code>Run</code></a> when <code>RequestOnly=0</code>. <code>result</code> contains information about the request and the response, if any, from the host.</p>
<p>Request-related elements in the result namespace are either copied or derived from certain <a href="#request-settings">request settings</a>. Not all request settings are included in the result namespace, but they are retained in the <code>HttpCommand</code> instance. </p>
<h3 id="result-request-command"><code>Command</code></h3>
<p>The case-insensitive HTTP command (method) for the request.</p>
<h3 id="result-request-host"><code>Host</code></h3>
<p>The final host to which the HTTP request was sent.  This may be different from the host specified in the <code>URL</code> setting if the request was redirected.</p>
<h3 id="result-request-path"><code>Path</code></h3>
<p>The final path for the requested resource.  This may be different from the resource specified in the <code>URL</code> setting if the request was redirected.</p>
<h3 id="result-request-port"><code>Port</code></h3>
<p>The port that the request was sent to. If the request was redirected, this may be different from the port specified in the <code>URL</code> setting or the original default port if no port was specified in <code>URL</code>.</p>
<h3 id="result-request-secure"><code>Secure</code></h3>
<p>A Boolean indicating whether the final request was sent using HTTPS. If the request was redirected, this may be reflect a different secure state from the original request. </p>
<h3 id="result-request-url"><code>URL</code></h3>
<p>The final URL of the HTTP request.  If the request was redirected, this may be different from the <code>URL</code> setting.</p></section><section class="print-page" id="result-response"><p>or the purposes of this document, we will refer to <code>result</code> as the result namespace returned by <a href="#instance-methods-run"><code>Run</code></a> when <code>RequestOnly=0</code>. <code>result</code> contains information about the request and the response, if any, from the host. Some settings from the request are copied into <code>result</code>.</p>
<h3 id="result-response-httpstatus"><code>HttpStatus</code></h3>
<p>The integer <a href="https://www.iana.org/assignments/http-status-codes/http-status-codes.xhtml">HTTP response status code</a> returned by the host. Status codes are split into specific ranges:</p>
<ul>
<li>1xx: Informational - Request received, continuing process</li>
<li>2xx: Success - The action was successfully received, understood, and accepted</li>
<li>3xx: Redirection - Further action must be taken in order to complete the request</li>
<li>4xx: Client Error - The request contains bad syntax or cannot be fulfilled</li>
<li>5xx: Server Error - The server failed to fulfill an apparently valid request</li>
</ul>
<h3 id="result-response-httpmessage"><code>HttpMessage</code></h3>
<p>A character vector indicating the HTTP message coresponding to the HTTP status code.   </p>
<h3 id="result-response-httpversion"><code>HttpVersion</code></h3>
<p>A character vector indicating the HTTP version used by the host. </p>
<h3 id="result-response-data"><code>Data</code></h3>
<p>In most cases <code>Data</code> will be the response's character vector payload. <code>Data</code> is not populated if the <code>OutFile</code> setting is set - the payload is instead written, as received, to file.</p>
<p>The <code>Content-Type</code> response header will indicate the type of data in the payload and the <code>Content-Encoding</code> header, if present, will indicate the compression scheme used if the payload is compressed.</p>
<p>If the response payload is compressed using 'deflate' or 'gzip' encoding <code>HttpCommand</code> will uncompress the payload.</p>
<p>If the <code>Content-Type</code> header indicates that the UTF-8 character set is used, <code>HttpCommand</code> will convert the payload to UTF-8. </p>
<p><code>HttpCommand</code> can translate certain content types into a format that may be more useful in the APL environment.  If the <a href="#operational-settings-translatedata">TranslateData</a> is set to <code>1</code>, <code>HttpCommand</code> will attempt to translate <code>application/json</code> content using <code>⎕JSON</code>, and  <code>text/xml</code> and <code>application/xml</code> using <code>⎕XML</code>.</p>
<h3 id="result-response-headers"><code>Headers</code></h3>
<p><code>Headers</code> is the 2-column matrix of response header name/value pairs.</p>
<p>Note: There are two sets of headers in an HTTP request/response transaction - the request headers that are sent to the host, and the response headers that are sent back from the host.</p>
<h3 id="result-response-getheader"><code>∇GetHeader</code></h3>
<p><code>GetHeader</code> is a utility function included in the result namespace that makes it easier to extract response header values. <code>GetHeader</code> accommodates the case-insensitive nature of header names. If the header does not exist, <code>GetHeader</code> returns <code>''</code>.</p>
<table>
<tr><td>Syntax</td>
<td><code>value ← {headers} result.GetHeader name</code></td><td>&nbsp;</tr>
<tr><td><code>name</code></td>
<td>A character vector header name, or vector of header names</td></tr>
<tr><td><code>headers</code></td>
<td>The optional header array to extract from. By default, <code>GetHeader</code> will use the response's <code>Headers</code> array. You may also pass the <code>Headers</code> element of a redirection (see <a href="#result-response-redirections"><code>Redirections</code></a>).</td></tr>
<tr><td><code>value</code></td>
<td>The header value(s) corresponding to the header names specified in <code>name</code>, or the empty vector <code>''</code> for header name(s) that don't exist.</td></tr>
<tr><td>Example(s)</td>
<td><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result.GetHeader 'content-type'</code><br/>
<code>text/html; charset=utf-8</code><br/><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⍝ Note: there is no 'fred' header</code><br/>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result.GetHeader 'content-type' 'fred' 'server'</code><br/>
<code>┌────────────────────────┬┬──────────────────────┐</code><br/>
<code>│text/html; charset=utf-8││Apache/2.4.18 (Ubuntu)│</code><br/>
<code>└────────────────────────┴┴──────────────────────┘</code><br/>
</td></tr></table>

<h3 id="result-response-cookies"><code>Cookies</code></h3>
<p><code>Cookies</code> is a vector of namespaces, one per cookie set by the host. <code>Cookies</code> are frequently used to maintain a state between the client (<code>HttpCommand</code>) and the host. When using an instance of <code>HttpCommand</code>, the instance will retain a copy of <code>Cookies</code> and apply appropriate cookies to subsequent requests.</p>
<p>The sample below shows the names and first 50 characters of the values of 3 cookies returned by GitHub.com. The first cookie holds the session ID.</p>
<pre><code>      'Name' 'Value'⍪↑(HttpCommand.Get'github.com').Cookies.(Name((50∘⌊∘≢↑⊢)Value))
 Name       Value                                              
 _gh_sess   A0ZezbnUgtkiq1lBubH7mrXclGhvhcCFKRUbAb045wGNT2Hlma 
 _octo      GH1.1.809596667.1660313286                         
 logged_in  no                                                 

</code></pre>
<h3 id="result-response-peercert"><code>PeerCert</code></h3>
<p>If the connection to the host uses HTTPS as its protocol which means it is a secure connection, then <code>PeerCert</code> contains the X509 certificate of the host.</p>
<pre><code>      ⊃(HttpCommand.Get 'dyalog.com').PeerCert.Formatted.(Issuer Subject)
┌──────────────────────────┬───────────────┐
│C=US,O=Let's Encrypt,CN=R3│CN=*.dyalog.com│
└──────────────────────────┴───────────────┘
</code></pre>
<h3 id="result-response-redirections"><code>Redirections</code></h3>
<p><code>Redirections</code> is a vector of namespaces, one per HTTP redirect response from the host. An HTTP redirect is a special kind of response from the host that directs the client to another location for the resource that's being requested. When a web browser like Google Chrome or Mozilla Firefox receives a redirect response, they automatically reissue the request for the resource at the new location. The new location is specified in the response's <code>Location</code> header.  A redirection can itself be redirected and can even result in an infinite redirection loop. <code>HttpCommand</code> will also follow the redirections, but it also retains information about each redirection in <code>Redirections</code>. The <a href="#operational-settings-maxredirections"><code>MaxRedirections</code></a> setting can limit the number of redirections that <code>HttpCommand</code> will follow.</p>
<p>Each namespace in <code>Redirections</code> has the following elements:</p>
<table><tr><td><code>HttpStatus</code></td><td>The HTTP status for the request.</td></tr>
<tr><td><code>HttpMessage</code></td><td>The corresponding HTTP status message for the request.</td></tr>
<tr><td><code>HttpVersion</code></td><td>The HTTP version that was used in sending the response.</td></tr>
<tr><td><code>Headers</code></td><td>The headers that were sent by the host. There should be a <code>'Location'</code> header that indicates the redirection location for the requested resource</td></tr>
<tr><td><code>URL</code></td><td>The URL that was used and produced this redirection.</code></td></tr></table>
<p>The example below uses <code><a href="http://httpbin.org/relative_redirect/2">httpbin.org/relative_redirect/2</a></code> to redirect the request twice.</p>
<pre><code>      ⊢result ← HttpCommand.Get 'http://httpbin.org/relative_redirect/2'
[rc: 0 | msg:  | HTTP Status: 200 &quot;OK&quot; | ⍴Data: 266]
</code></pre>
<p>Examining the information in the 2 redirections shows that our original <code>URL</code>, <code>'httpbin.org/relative-redirect/2'</code>, was redirected to <code>/relative-redirect/1</code> which was subsequently redirected to <code>/get</code>.</p>
<pre><code>      'URL' 'Was redirected to'⍪result.(Redirections.URL,⍪Redirections.Headers GetHeader¨⊂'location')
┌───────────────────────────────┬────────────────────┐
│URL                            │Was redirected to   │
├───────────────────────────────┼────────────────────┤
│httpbin.org/relative-redirect/2│/relative-redirect/1│
├───────────────────────────────┼────────────────────┤
│httpbin.org/relative-redirect/1│/get                │
└───────────────────────────────┴────────────────────┘
</code></pre></section><h1 class='nav-section-title-end'>Ended: Result Namespace</h1><section class="print-page" id="msgs"><h3 id="msgs-rc-values"><code>rc</code> Values</h3>
<p>The value of <code>rc</code> may be interpreted as follows:</p>
<table>
<thead>
<tr>
<th>Error Type</th>
<th align="center"><code>rc</code> Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>No error</td>
<td align="center"><code>0</code></td>
<td><code>HttpCommand</code> was able to format and send the request and receive a response without error.</td>
</tr>
<tr>
<td>Conga error</td>
<td align="center"><code>&gt;0</code></td>
<td>If <code>rc</code> is a positive integer, it is a return code that is signalled by Conga when sending the request and receiving the response. If Conga detects an error at the operating system level, it will return the operating system return code. For instance, 10013 is the Microsoft Windows return code for "port in use".</td>
</tr>
<tr>
<td>Translation Error</td>
<td align="center"><code>¯2</code></td>
<td>You specified <code>TranslateData←1</code> and <code>HttpCommand</code> was unable to translate an XML or JSON response payload using <code>⎕XML</code> or <code>⎕JSON</code> respectively or you used <code>GetJSON</code> and response content-type header was not <code>'application/json'</code>.</td>
</tr>
<tr>
<td>Everything else</td>
<td align="center"><code>¯1</code></td>
<td>This is the generic return code for any error condition that is not signalled by Conga.</td>
</tr>
</tbody>
</table>
<p>In general if <code>rc=0</code> then <code>msg</code> will be empty. There are circumstances where <code>msg</code> will contain an informational message even if <code>rc=0</code>.  These messages are included below.   </p>
<p>In the following message descriptions, items that are enclosed in {} represent the value of that named item.  For instance, {BufferSize} represents the value of the <code>BufferSize</code> setting. In many cases, the message text itself is sufficient to explain the condition and its resolution, but we document them nonetheless for completeness. </p>
<h3 id="msgs-request-related-messages">Request-related Messages</h3>
<h4 id="msgs-catch-all-messages">"Catch All" Messages</h4>
<table><tr><td><b>Message</b></td>
<td><code>Unexpected {ERROR} at {location}</code></td></tr>
<tr><td><b>Description</b></td>
<td>You should rarely, if ever, see this message.  It is returned when an error occurred that wasn't anticipated or otherwise handled.</td></tr>
<tr><td><b>Resolution</b></td>
<td>Try to find a consistently reproduceable example and contact Dyalog support.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Invalid HttpCommand setting(s): {setting name(s)}</code></td></tr>
<tr><td><b>Description</b></td>
<td>You passed a namespace argument <code>New</code>, <code>Get</code>, <code>GetJSON</code>, or <code>Do</code> or as a constructor argument to <code>⎕NEW</code> and that namespace contained named elements that are not valid <code>HttpCommand</code> setting names.</td></tr>
<tr><td><b>Resolution</b></td>
<td>Remove the named elements that are not <code>HttpCommand</code> setting names.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Stopped for debugging... (Press Ctrl-Enter)</code></td></tr>
<tr><td><b>Description</b></td>
<td>This message is not returned in the result namespace, but is displayed when you have set <code>Debug←2</code> and <code>HttpCommand</code> has stopped intentionally just prior to establishing the connection to the host.  </td></tr>
<tr><td><b>Resolution</b></td>
<td>Pressing Ctrl-Enter will open the debugger and trace into <code>HttpCommand</code>. Entering <code>→⎕LC+1<code> will resume execution.</td></tr></table>

<h4 id="msgs-non-conga-setting-messages">Non-Conga Setting Messages</h4>
<p>These messages report problems with settings that prevent <code>HttpCommand</code> from creating a proper HTTP request to send to the host. </p>
<table><tr><td><b>Message</b></td>
<td><code>No URL specified</code></td></tr>
<tr><td><b>Description</b></td>
<td>You didn't specify a <code>URL</code> setting.</td></tr>
<tr><td><b>Resolution</b></td>
<td>Specify a valid <a href="#request-settings-URL"><code>URL</code></a>.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>URL is not a simple character vector</code></td></tr>
<tr><td><b>Description</b></td>
<td>The <code>URL</code> setting isn't a simple character vector.</td></tr>
<tr><td><b>Resolution</b></td>
<td>Make sure <code>URL</code> isn't nested or non-character.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Invalid host/port: {host}</code></td></tr>
<tr><td><b>Description</b></td>
<td>You specified a URL that has a hostname followed by a colon (<code>':'</code>) followed by something that does not parse as an integer.  For example: <code>'dyalog.com:ducky'</code></td></tr>
<tr><td><b>Resolution</b></td>
<td>Correct (or omit) the bad port specification.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>No host specified</code></td></tr>
<tr><td><b>Description</b></td>
<td><code>HttpCommand</code> couldn't find a host in the <code>URL</code> setting.</td></tr>
<tr><td><b>Resolution</b></td>
<td>Ensure your <code>URL</code> conforms to the <a href="#request-settings-url">specification</a>.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Invalid port: {port}</code></td></tr>
<tr><td><b>Description</b></td>
<td>The port you specified is not in the range 1-63535.</td></tr>
<tr><td><b>Resolution</b></td>
<td>Specify an integer port number in the range 1-65535.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Invalid protocol: {protocol}</code></td></tr>
<tr><td><b>Description</b></td>
<td><code>HttpCommand</code> thinks you've specified a protocol other than <code>'http://'</code> or <code>'https://</code>.</td></tr>
<tr><td><b>Resolution</b></td>
<td><code>HttpCommand</code> supports only the HTTP and HTTPS protocols. If you have not specified the protocol in your <code>URL</code> setting, <code>HttpCommand</code> will default to use HTTP. HTTPS will be used if you've specified either the default secure port (443) or supplied certificate information.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Cookies are not character</code></td></tr>
<tr><td><b>Description</b></td>
<td><code>Cookies</code> are specified as <a href="#request-settings-namevalue-pairs">name/value pairs</a>. All of the names and values need to be character.</td></tr>
<tr><td><b>Resolution</b></td>
<td>Make sure <code>Cookies</code> names and values are character.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Headers are not character</code></td></tr>
<tr><td><b>Description</b></td>
<td><code>Headers</code> may be specified as <a href="#request-settings-namevalue-pairs">name/value pairs</a>. All of the names and values need to be character.</td></tr>
<tr><td><b>Resolution</b></td>
<td>Make sure <code>Headers</code> names and values are character.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Improper header format</code></td></tr>
<tr><td><b>Description</b></td>
<td>You used a value for <code>Headers</code> that did not conform to one of the formats described in the <a href="#request-settings-headers"><code>Headers</code> specification</a>.</td></tr>
<tr><td><b>Resolution</b></td>
<td>Ensure that <code>Headers</code> conforms to the specification</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Output file folder {foldername} does not exist.</code></td></tr>
<tr><td><b>Description</b></td>
<td>The folder in your {OutFile} setting does not exist. <code>HttpCommand</code> will create the output file, if necessary, in an existing folder but <code>HttpCommand</code> will not create a new folder.</td></tr>
<tr><td><b>Resolution</b></td>
<td>Either create the folder or change the <code>OutFile</code> setting.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>No filename specified in OutFile or URL</code></td></tr>
<tr><td><b>Description</b></td>
<td>If you do not specify a file name in <code>OutFile</code>, <code>HttpCommand</code> will attempt to use the file name specified in <code>URL</code>. However, if there is also no file name in <code>URL</code>, you will receive this message.</td></tr>
<tr><td><b>Resolution</b></td>
<td>Specify a file name in either <code>OutFile</code> or <code>URL</code>.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Output file "{OutFile}" is not empty</code></td></tr>
<tr><td><b>Description</b></td>
<td>You specified the name of an existing, non-empty, file in <a href="#operational-settings-OutFile"><code>OutFile</code></a> but did not specify to overwrite or append to the file.</td></tr>
<tr><td><b>Resolution</b></td>
<td>Either specify a filename of a file that doesn't exist or is empty, or specify that the file is to be overwritten or appended to.</td></tr></table>

<h4 id="msgs-conga-setting-messages">Conga Setting Messages</h4>
<p>The messages in this section are related to the Conga settings in <code>HttpCommand</code>, not the actual execution of Conga code whose messages  are described in <a href="#msgs-conga-execution-related-errors">"Conga Execution"-Related Messages</a>.</p>
<table><tr><td><b>Message</b></td>
<td><code>CongaRef {CongaRef} does not point to a valid instance of Conga</code></td></tr>
<tr><td><b>Description</b></td>
<td>You specified a <code>CongaRef</code> setting that is not the name of, or a reference to, the <code>Conga</code> or the <code>DRC</code>namespace.</td></tr>
<tr><td><b>Resolution</b></td>
<td>Check that <code>CongaRef</code> is actually the name of, or a reference to, the <code>Conga</code> or the <code>DRC</code>namespace.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>{location}.{namespace} does not point to a valid instance of Conga</code></td></tr>
<tr><td><b>Description</b></td>
<td><code>HttpCommand</code> searches for the Conga API according to <a href="#conga-default-behavior">these rules</a> and found a namespace named either <code>Conga</code> or <code>DRC</code>, but that namespace is not a valid Conga namespace.</td></tr>
<tr><td><b>Resolution</b></td>
<td>Either set <code>CongaRef</code> to point to a proper <code>Conga</code> or <code>DRC</code> namespace, or remove/rename the offending namespace.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>CongaPath "{CongaPath}" does not exist</code></td></tr>
<tr><td><b>Description</b></td>
<td>You specified a <code>CongaPath</code> that could not be found.</td></tr>
<tr><td><b>Resolution</b></td>
<td>Set <code>CongaPath</code> to the name of an existing folder containing the Conga shared libraries, or do not set <code>CongaPath</code> and let <code>HttpCommand</code> use the Dyalog installation folder.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>CongaPath "{CongaPath}" is not a folder</code></td></tr>
<tr><td><b>Description</b></td>
<td>You specified a <code>CongaPath</code> that exists, but is not a folder.</td></tr>
<tr><td><b>Resolution</b></td>
<td>Set <code>CongaPath</code> to the name of an existing folder containing the Conga shared libraries, or do not set <code>CongaPath</code> and let <code>HttpCommand</code> use the Dyalog installation folder.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>{Conga API} was copied from {path}, but is not valid</code></td></tr>
<tr><td><b>Description</b></td>
<td><code>HttpCommand</code> was able to copy either the <code>Conga</code> or the <code>DRC</code> namespace according to the procedure described in Conga <a href="#conga-default-behavior">Default Behavior</a>, but the namespace was not a valid Conga API.</td></tr>
<tr><td><b>Resolution</b></td>
<td>Ensure that conga workspace from which <code>HttpCommand</code> attempted to copy the Conga API is proper and the same version as the shared libraries.  See <a href="#integrating">Integrating <code>HttpCommand</code></a>.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Neither Conga nor DRC were successfully copied</code></td></tr>
<tr><td><b>Description</b></td>
<td><code>HttpCommand</code> was unable to copy either the <code>Conga</code> or the <code>DRC</code> namespace according to the procedure described in Conga <a href="#conga-default-behavior">Default Behavior</a>.</td></tr>
<tr><td><b>Resolution</b></td>
<td>The most likely cause is that there is no conga workspace in the paths from which <code>HttpCommand</code> tried to copy. See <a href="#integrating">Integrating <code>HttpCommand</code></a>.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Not found PublicCertFile "{PublicCertFile}"</code><br/>
<code>Not found PrivateKeyFile "{PrivateKeyFile}"</code><br/>
<code>Not found PublicCertFile "{PublicCertFile}" and PrivateKeyFile "{PrivateKeyFile}"</code></td></tr>
<tr><td><b>Description</b></td>
<td>One or both of the file names you specified for <code>PublicCertFile</code> and <code>PrivateKeyFile</code> does not exist.</td></tr>
<tr><td><b>Resolution</b></td>
<td>Set <code>PublicCertFile</code> and <code>PrivateKeyFile</code> to the names of certificate files that actually exist.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>PublicCertFile is empty</code><br/>
<code>PrivateKeyFile is empty</code></td></tr>
<tr><td><b>Description</b></td>
<td>You have specified one of <code>PublicCertFile</code> or <code>PrivateKeyFile</code>, but not the other.</td></tr>
<tr><td><b>Resolution</b></td>
<td>Be sure to set both <code>PublicCertFile</code> and <code>PrivateKeyFile</code>.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Invalid certificate parameter</code></td></tr>
<tr><td><b>Description</b></td>
<td>You specified a value for <code>Cert</code> that is not a valid instance of Conga's <code>X509</code> class.</td></tr>
<tr><td><b>Resolution</b></td>
<td>Make sure that <code>Cert</cert> is a valid instance of the <code>X509</code> class.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Unable to decode PublicCertFile "{PublicCertFile}" as certificate</code></td></tr>
<tr><td><b>Description</b></td>
<td>An error occurred when Conga attempted to use <code>X509Cert.ReadCertFromFile</code> with the value you specified for <code>PublicCertFile</code>.</td></tr>
<tr><td><b>Resolution</b></td>
<td>Make sure <code>PublicCertFile</code> contains a valid certificate. See the <a href="https://docs.dyalog.com/latest/Conga%20User%20Guide.pdf">Conga User Guide</a> for more information.</td></tr></table>

<h4 id="msgs-conga-execution-messages">Conga Execution Messages</h4>
<p>The messages in this section are returned when Conga returns a non-zero return code, or an unexpected Conga event occurs. If there is a non-zero return code from Conga, it is returned in <code>rc</code>.</p>
<p><code>HttpCommand</code> uses Conga's "HTTP" mode, where Conga will parse the response from the host.  Some of the messages occur when the host sends an ill-formed response and Conga cannot parse it as HTTP. The ill-formed data is returned in the <code>Data</code> element of <code>HttpCommand</code>'s result namespace.</p>
<table><tr><td><b>Message</b></td>
<td><code>Could not initialize Conga due to...</code></td></tr>
<tr><td><b>Description</b></td>
<td>Conga could not be initialized for one of many reasons. The remainder of the message should give some indication as to what the problem was. Examples of problems include:
<ul>
<li>the <code>Conga</code> or <code>DRC</code> namespace that <code>HttpCommand</code> found is not a valid Conga interface.</li>
<li>the <code>CongaPath</code> setting does not point to an existing folder containing the Conga shared libraries.</li>
<li><code>HttpCommand</code> was unable to find a valid <code>Conga</code> or <code>DRC</code> namespace and could not copy either from the <code>conga</code> workspace.</li>
</ul></td></tr>
<tr><td><b>Resolution</b></td>
<td>The resolution will depend on the circumstances described in the message. The <a href="https://docs.dyalog.com/latest/Conga%20User%20Guide.pdf">Conga User Guide</a> and/or the <a href="#integrating">Integrating <code>HttpCommand</code></a>section could be helpful here.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Conga client creation failed...</code></td></tr>
<tr><td><b>Description</b></td>
<td>This will occur if Conga is not able to create a client connection to the host. The remainder of the message will indicate the specific Conga error message.</td></tr>
<tr><td><b>Resolution</b></td>
<td>The resolution will depend on the circumstances described in the message. See the <a href="https://docs.dyalog.com/latest/Conga%20User%20Guide.pdf">Conga User Guide</a>. </td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Conga could not parse the HTTP response</code></td></tr>
<tr><td><b>Description</b></td>
<td>The response from the host is not a properly formatted HTTP message.</td></tr>
<tr><td><b>Resolution</b></td>
<td>Inspect the data returned by the host in the <code>Data</code> element of the result.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Response payload not completely received</code></td></tr>
<tr><td><b>Description</b></td>
<td>This occurs when <code>HttpCommand</code> was able to receive and parse the HTTP headers from the host but, during the receipt of the response payload, an error occurred.</td></tr>
<tr><td><b>Resolution</b></td>
<td>Attempt the request again. If the error persists, examine the headers and payload data, if any, returned by the host.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Conga error processing your request: {Conga return code} </code></td></tr>
<tr><td><b>Description</b></td>
<td>Conga encountered some error that wasn't otherwise diagnosed or trapped.</td></tr>
<tr><td><b>Resolution</b></td>
<td>See the <a href="https://docs.dyalog.com/latest/Conga%20User%20Guide.pdf">Conga User Guide</a> for guidance.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Socket closed by server</code></td></tr>
<tr><td><b>Description</b></td>
<td>During processing of the request, the server unexpectedly closed the connection to <code>HttpCommand</code>.</td></tr>
<tr><td><b>Resolution</b></td>
<td>Check that your request is proper for the host. See the <a href="#trouble">Troubleshooting</a> guide.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Unhandled Conga event type: {Conga event}</code></td></tr>
<tr><td><b>Description</b></td>
<td>This should never occur, but for the sake of paranoia, we coded for the possibility of a Conga event that we didn't anticipate.</td></tr>
<tr><td><b>Resolution</b></td>
<td>Try to find a consistently reproduceable example and contact Dyalog support.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Conga wait error: {Conga return code}</code></td></tr>
<tr><td><b>Description</b></td>
<td>An error occurred while Conga was waiting for a response from the host.</td></tr>
<tr><td><b>Resolution</b></td>
<td>Re-attempt the request. Examine any data or headers that may have been received for clues.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Could not set DecodeBuffers on Conga client "{Conga client name}": {Conga return code}</code></td></tr>
<tr><td><b>Description</b></td>
<td>This is another error that should never occur.</td></tr>
<tr><td><b>Resolution</b></td>
<td>Try to find a consistently reproduceable example and contact Dyalog support.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Conga failed to parse the response HTTP header</code></td></tr>
<tr><td><b>Description</b></td>
<td>Conga received an HTTPHeader event but was unable to parse the received data as HTTP headers.</td></tr>
<tr><td><b>Resolution</b></td>
<td>The unparseable data is returned in the <code>Data</code> element of the result namespace and may provide insight as to the problem.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Conga failed to parse the response HTTP chunk</code></td></tr>
<tr><td><b>Description</b></td>
<td>Conga received an HTTPChunk event but was unable to parse the received data as an HTTP chunk.</td></tr>
<tr><td><b>Resolution</b></td>
<td>The unparseable data is returned in the <code>Data</code> element of the result namespace and may provide insight as to the problem.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Conga failed to parse the response HTTP trailer</code></td></tr>
<tr><td><b>Description</b></td>
<td>Conga received an HTTPTrailer event but was unable to parse the received data as an HTTP trailer.</td></tr>
<tr><td><b>Resolution</b></td>
<td>The unparseable data is returned in the <code>Data</code> element of the result namespace and may provide insight as to the problem.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Conga error while attempting to send request: {Conga return code}</code></td></tr>
<tr><td><b>Description</b></td>
<td>Conga was able to establish a connection to the host, but encountered an error when attempting to send the HTTP request.</td></tr>
<tr><td><b>Resolution</b></td>
<td>Examine the request being sent as described in the <a href="#trouble">Troubleshooting</a> guide. The <a href="https://docs.dyalog.com/latest/Conga%20User%20Guide.pdf">Conga User Guide</a> may also be helpful.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Unable to set EventMode on Conga root</code></td></tr>
<tr><td><b>Description</b></td>
<td>This is another message that should never occur.</td></tr>
<tr><td><b>Resolution</b></td>
<td>Try to find a consistently reproduceable example and contact Dyalog support.</td></tr></table>

<h4 id="msgs-operational-messages">Operational Messages</h4>
<table><tr><td><b>Message</b></td>
<td><code>{ERROR} while trying to initialize output file "{OutFile}"</code></td></tr>
<tr><td><b>Description</b></td>
<td>You specified an <code>OutFile</code> setting and an error occured while trying to initialize the file.</td></tr>
<tr><td><b>Resolution</b></td>
<td>{ERROR} should provide information that will help determine the resolution.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Response header size exceeds BufferSize {BufferSize}</code></td></tr>
<tr><td><b>Description</b></td>
<td>The size of the response's HTTPHeader message exceeded the value set for <code>BufferSize</size>.</td></tr>
<tr><td><b>Resolution</b></td>
<td><code>BufferSize</code> is intended to help counteract maliciously large message headers. If the response headers are expected to be very large, increase the value of <code>BufferSize</code>.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Payload length exceeds MaxPayloadSize</code></td></tr>
<tr><td><b>Description</b></td>
<td>The <code>content-length</code> header in the response had a value that exceeded the <code>MaxPayload</code> setting.</td></tr>
<tr><td><b>Resolution</b></td>
<td><code>MaxPayloadSize</code> is intended to help counteract maliciously large messages. If the response payload is expected to be very large, increase the value of <code>MaxPayloadSize</code></td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Request timed out before server responded</code></td></tr>
<tr><td><b>Description</b></td>
<td>The host did not respond within the number of seconds specified in the <code>Timeout</code> setting.</td></tr>
<tr><td><b>Resolution</b></td>
<td>If you expect the host to be slow in responding, increase the magnitude of the <code>Timeout</code> setting.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Redirection detected, but no "location" header supplied.</code></td></tr>
<tr><td><b>Description</b></td>
<td>The host responded with a 3XX HTTP status (redirection), but the response did not contain a <code>location</code> header indicating where to redirect the request.</td></tr>
<tr><td><b>Resolution</b></td>
<td>This is a server-side problem.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Too many redirections ({MaxRedirections})</code></td></tr>
<tr><td><b>Description</b></td>
<td>The host sent more 3XX HTTP status responses (redirections) than <code>MaxRedirections</code> specified.</td></tr>
<tr><td><b>Resolution</b></td>
<td><code>MaxRedirections</code> is intended to prevent redirection loops or too many redirection hops. If the redirections are legitimate, increase the value of <code>MaxRedirections</code>.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Could not translate XML payload</code></td></tr>
<tr><td><b>Description</b></td>
<td>If you specify <code>TranslateData←1</code> and the response content-type header contains <code>'text/xml'</code> or <code>'application/xml'</code>, <code>HttpCommand</code> will attempt to use <code>⎕XML</code> to translate the payload.  If <code>⎕XML</code> fails, this message is returned and <code>rc</code> is set to <code>¯2</code>.</td></tr>
<tr><td><b>Resolution</b></td>
<td>This is probably due to the response payload containing incorrectly formatted XML. The untranslated payload is returned in <code>Data</code>.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Could not translate JSON payload</code></td></tr>
<tr><td><b>Description</b></td>
<td>If you specify <code>TranslateData←1</code> or use the <code>GetJSON</code> shared method and the response content-type header contains <code>'application/json'</code>, <code>HttpCommand</code> will attempt to use <code>⎕JSON</code> to translate the payload.  If <code>⎕JSON</code> fails, this message is returned and <code>rc</code> is set to <code>¯2</code>.</td></tr>
<tr><td><b>Resolution</b></td>
<td>This is probably due to the response payload containing incorrectly formatted JSON. The untranslated payload is returned in <code>Data</code>.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Response content-type is not application/json</code></td></tr>
<tr><td><b>Description</b></td>
<td>You used <code>GetJSON</code> and the response content-type header is not <code>'application/json'</code>. <code>rc</code> is set to <code>¯2</code> and <code>Data</code> contains the response payload.</td></tr>
<tr><td><b>Resolution</b></td>
<td><code>GetJSON</code> expects the response content-type to be <code>'application/json'</code>.  If the host is expected to return some other content-type, consider using a method other than <code>GetJSON</code>.</td></tr></table>

<h4 id="msgs-informational-messages">Informational Messages</h4>
<p>These messages are issued to inform you that, while there was no actual error, </p>
<table><tr><td><b>Message</b></td>
<td><code></code></td></tr>
<tr><td><b>Description</b></td>
<td></td></tr>
<tr><td><b>Resolution</b></td>
<td></td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Connection properties changed, connection reset</code></td></tr>
<tr><td><b>Description</b></td>
<td>Unless otherwise specified, an instance of <code>HttpCommand</code> will attempt to keep the connection for the last request open. If any of the connection properties change on a subsequent request, the old connection closed and a new connection is established.</td></tr>
<tr><td><b>Resolution</b></td>
<td>No resolution necessary.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Unhandled content-encoding: {content-encoding}</code></td></tr>
<tr><td><b>Description</b></td>
<td>This message occurs if the response's content-encoding header is something other than <code>'gzip'</code> or <code>'deflate'</code>.It is intended to inform you that <code>HttpCommand</code> did not automatically decode the payload.</td></tr>
<tr><td><b>Resolution</b></td>
<td>Your application will need to decode the payload.</td></tr></table>

<h3 id="msgs-other-messages">Other Messages</h3>
<p>These messages are not found in the <code>msg</code> element of result namespace, but are issued when using other features of <code>HttpCommand</code>.</p>
<table><tr><td><b>Message</b></td>
<td><code>Could not ⎕FIX file: {ERROR}{: Message}</code></td></tr>
<tr><td><b>Description</b></td>
<td>The <code>Fix</code> method was not able to <code>⎕FIX</code> the file content returned as the response payload.</td></tr>
<tr><td><b>Resolution</b></td>
<td>Ensure that the requested file contains <code>⎕FIX</code>-able contents.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Could not ⎕FIX new HttpCommand: {ERROR}{: Message}</code></td></tr>
<tr><td><b>Description</b></td>
<td>The <code>Upgrade</code> method was not able to <code>⎕FIX</code> a newer <code>HttpCommand</code>.</td></tr>
<tr><td><b>Resolution</b></td>
<td>See <a href="#misc-methods-upgrade"><code>Upgrade</code></a>.  If the problem persists, contact Dyalog support.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Upgraded to {new-version} from {old-version}</code></td></tr>
<tr><td><b>Description</b></td>
<td>The <code>Upgrade</code> method was able to <code>⎕FIX</code> a newer version of <code>HttpCommand</code>.</td></tr>
<tr><td><b>Resolution</b></td>
<td>See <a href="#misc-methods-upgrade"><code>Upgrade</code></a>.</td></tr></table>

<table><tr><td><b>Message</b></td>
<td><code>Already using the most current version {version}</code></td></tr>
<tr><td><b>Description</b></td>
<td>The <code>Upgrade</code> method did not find a newer version of <code>HttpCommand</code>.</td></tr>
<tr><td><b>Resolution</b></td>
<td>See <a href="#misc-methods-upgrade"><code>Upgrade</code></a>.</td></tr></table></section><h1 class='nav-section-title-end'>Ended: Reference</h1>
                        <h1 class='nav-section-title' id='section-advanced-topics'>
                            Advanced Topics <a class='headerlink' href='#section-advanced-topics' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="conga"><p><code>HttpCommand</code> uses Conga, Dyalog's TCP/IP utility library, for communications. <code>HttpCommand</code> requires Conga version 3.0 or later. Conga consists of two elements:</p>
<ul>
<li>Two shared library files whose names begin with "conga" and are found in the Dyalog installation folder. The names of the files varies based on the platform they are running on and the specific version of Conga; for instance <code>conga34_64.dll</code> and <code>conga34ssl64.dll</code> are the shared library files for Conga version 3.4 for the 64-bit version of Dyalog for Windows.</li>
<li>An APL-based API to communicate with the shared libraries. There are two versions of the API both of which are available in the <code>conga</code> workspace.<ul>
<li>A namespace named <code>Conga</code> which was introduced with Conga version 3.0 and implements behavior that makes it easier to run multiple Conga-based utilities in the same workspace. <code>Conga</code> is the recommended API version to use.</li>
<li>A namespace named <code>DRC</code> which is retained for backward-compatibility with applications which use earlier versions of Conga. <code>DRC</code> should only be used in an application where backward compatibility is necessary.</li>
</ul>
</li>
</ul>
<p>The Conga API looks for a matching version of the shared libraries; as such version of the API and the shared libraries must be the same. For more information on Conga please refer to the <a href="https://docs.dyalog.com/latest/Conga%20User%20Guide.pdf">Conga User Guide</a>.</p>
<h3 id="conga-default-behavior">Default Behavior</h3>
<p>When first run, <code>HttpCommand</code> will attempt find or copy the Conga API and then initialize it. <code>HttpCommand</code> will attempt to use the <code>Conga</code> version of the API in preference to the <code>DRC</code> version. In general, all of this is transparent to the user.</p>
<ul>
<li>Look in the current workspace for the Conga API:<ul>
<li>First look in the namespace where <code>HttpCommand</code> resides for a namespace named either <code>Conga</code> or <code>DRC</code>, in that order.</li>
<li>Failing that, look in the root namespace <code>#</code> for a namespace named either <code>Conga</code> or <code>DRC</code>, in that order.</li>
</ul>
</li>
<li>If neither version of the API is found in the current workspace, <code>HttpCommand</code> will attempt to copy the API (first <code>Conga</code> then <code>DRC</code>) from the <code>conga</code> workspace. The API is copied into the <code>HttpCommand</code> class which means there will be no additional footprint in workspace. <code>HttpCommand</code> will attempt to copy the API as follows:<ul>
<li>If the <code>DYALOG</code> environment variable exists, use its folder. Otherwise use the folder from the command line used to start Dyalog.</li>
<li>If that fails, then attempt to copy from the "current" folder as determined by <code>⊃1 ⎕NPARTS ''</code></li>
</ul>
</li>
<li>If the API was found or successfully copied, <code>HttpCommand</code> will initialize Conga as follows:<ul>
<li>If the <code>Conga</code> version of the API is used, <code>HttpCommand</code> will initialize it with a root name of <code>'HttpCommand'</code>.</li>
<li>If the <code>DRC</code> version of the API is used, <code>HttpCommand</code> will simply initialize it. As <code>DRC</code> does not support multiple roots, care should be taken if other Conga-using utilities also reside in the workspace.</li>
</ul>
</li>
<li>If the API was successfully initialized, a reference to the API root can be found in <code>HttpCommand.LDRC</code>.</li>
</ul>
<h3 id="conga-overriding-default-locations">Overriding Default Locations</h3>
<p>There are two methods to tell <code>HttpCommand</code>'s default behavior, both of which involve setting a shared public field in the <code>HttpCommand</code> class.</p>
<ul>
<li>If you have the <code>Conga</code> namespace in your workspace in other than default locations the <code>HttpCommand</code> will search, <code>HttpCommand.CongaRef</code> can be used to specify its location. <code>CongaRef</code> can be an actual reference to the namespace or a character array representing the location. For instance:<br>
<code>HttpCommand.CongaRef←#.Utils.Conga</code> or<br>
<code>HttpCommand.CongaRef←'#.Utils.Conga'</code><br>
This can be useful when integrating <code>HttpCommand</code> into an application that also uses Conga.</li>
<li><code>HttpCommand.CongaPath</code> can be used to specify the path to the shared library files and optionally the conga workspace. This can be useful when bundling <code>HttpCommand</code> in a distributed application. For instance:<br>
<code>HttpCommand.CongaPath←(⊃1 ⎕NPARTS ''),'/conga/'</code> would tell <code>HttpCommand</code> to find the shared libraries in the <code>/conga/</code> subfolder of the current folder. See <a href="#integrating">Integrating <code>HttpCommand</code></a> for more information.</li>
</ul>
<h3 id="conga-using-other-versions-of-conga">Using Other Versions of Conga</h3>
<p>If you need to use a version of Conga other than the one in the Dyalog installation folder, there are two ways to accomplish this:</p>
<ul>
<li>Put the shared libraries and the <code>conga</code> workspace in a folder and set <code>CongaPath</code> to point to that folder.</li>
<li>Put the <code>Conga</code> namespace in your workspace (pointing <code>CongaRef</code> to it if necesssary) and the shared libraries in a folder set <code>CongaPath</code> to point to that folder.</li>
</ul></section><section class="print-page" id="secure"><h3 id="secure-https">HTTPS</h3>
<p>In the HTTP world, secure communications is accomplished by using the HTTPS protocol which uses Transport Layer Security (TLS) or Secure Sockets Layer (SSL) to encrypt communications. Both the client (<code>HttpCommand</code>) and the server use certificates for secure communications. The certificates serve a couple of purposes:</p>
<ul>
<li>They provide bi-directional encryption of the data sent across the link.</li>
<li>They can help provide authentication of the client and/or the server. </li>
</ul>
<h3 id="secure-httpcommand-behavior"><code>HttpCommand</code> Behavior</h3>
<p><code>HttpCommand</code> attempts to figure out if the connection is going to use HTTPS and what port to use based on:</p>
<ul>
<li>The protocol, if any, that you specify in <code>URL</code>.</li>
<li>The port, if any, that you specify in <code>URL</code>.    </li>
<li>Whether you have provided certificate information for the request.</li>
</ul>
<p><code>HttpCommand</code> will use HTTPS if</p>
<ul>
<li>You provide certificate information by using the <code>Cert</code> or <code>PublicCertFile</code> and <code>PrivateKeyFile</code> settings.  </li>
<li>You specify <code>'https'</code> as the protocol.</li>
<li>You don't specify a protocol, but do specify a port in <code>URL</code> of 443. </li>
</ul>
<p><code>HttpCommand</code> will use port 443 if you do not specify a port in <code>URL</code> and <code>HttpCommand</code> has otherwise determined from the above criteria that the connection should use HTTPS.</p>
<h3 id="secure-encrypted-communications">Encrypted Communications</h3>
<p>In most cases, the use of certificates is hidden when using the HTTPS protocol because <code>HttpCommand</code> will automatically generate an "anonymous" certificate.  This is sufficient to provide secure, encrypted, communications.</p>
<h3 id="secure-authentication">Authentication</h3>
<p>Certificates can provide information about the identity of what is at the other end of the communications link. </p>
<h4 id="secure-server-identity">Server Identity</h4>
<p>When <code>HttpCommand</code> uses HTTPS, the <code>PeerCert</code> element of the result namespace contains the server's certificate.  This can be used to validate the server is what you think it is. Most certificates will have a "chain" of parent certificates that show who issued the peer's certificate and any intermediate certificates.  If the final certificate in the chain is issued by a Trusted Root Certificate Authority the domain listed in the certificate has undergone validation by an entity that you can trust. </p>
<p>Dyalog.com provides us with an example of a certificate chain:</p>
<pre><code>      ⊢ r ← HttpCommand.Get 'https://dyalog.com'
[rc: 0 | msg:  | HTTP Status: 200 &quot;OK&quot; | ⍴Data: 23127]
      r.PeerCert  ⍝ Dyalog.com's certificate
 #.HttpCommand.[X509Cert]

      r.PeerCert.Chain
  #.HttpCommand.[X509Cert]  #.HttpCommand.[X509Cert]  #.HttpCommand.[X509Cert]  

     ⍪⊃r.PeerCert.Chain.Formatted.(Subject,' from ',Issuer)
 CN=*.dyalog.com from C=US,O=Let's Encrypt,CN=R3                                                              
 C=US,O=Let's Encrypt,CN=R3 from C=US,O=Internet Security Research Group,CN=ISRG Root X1                      
 C=US,O=Internet Security Research Group,CN=ISRG Root X1 from O=Digital Signature Trust Co.,CN=DST Root CA X3 
</code></pre>
<p>This shows that the certificate for <code>'*.dyalog.com'</code> was issued by Let's Encrypt whose certificate was issued by Internet Security Research Group whose certificate was issued by Digital Signature Trust Co and Digital Signature Trust Co is a Trusted Root Certificate Authority.</p>
<p>The good news is that in most cases you'll never need to look at the certificate chain, but it is available in the rare event that you need to verify the server you're connecting to.</p>
<h4 id="secure-client-identity">Client Identity</h4>
<p>If the service you connect to uses client certificate authentication, you will need to use a certificate when sending your HTTP request. Generally this certificate will be issued by the service provider.  A certificate consists of two parts - a public certificate file and a private key file. <code>HttpCommand</code> allows you to specify the certificate in two ways:</p>
<ul>
<li>provide the file names for the public certificate file and private key file in the <a href="#conga-settings-publiccertfile"><code>PublicCertFile</code></a> and <a href="#conga-settings-privatekeyfile"><code>PrivateKeyFile</code></a> settings respectively.</li>
<li>specify the <a href="#conga-settings-cert"><code>Cert</code></a> setting as either:<ul>
<li>An instance of Conga's <code>X509Cert</code> class</li>
<li>a 2-element vector of the names of the public certificate and private key files  </li>
</ul>
</li>
</ul>
<h3 id="secure-other-https-settings">Other HTTPS Settings</h3>
<p><code>HttpCommand</code> has two more settings <a href="#conga-settings-sslflags"><code>SSLFlags</code></a> and <a href="#conga-settings-priority"><code>Priority</code></a>. The default values for these settings will suffice in almost all cases.  If you need to use something other than the default, refer to the <a href="https://docs.dyalog.com/latest/Conga%20User%20Guide.pdf">Conga User Guide</a>.</p>
<h3 id="secure-further-reading">Further Reading</h3>
<p>See the <a href="https://docs.dyalog.com/latest/Conga%20User%20Guide.pdf">Conga User Guide</a> Chapter 5 for more information on Conga's secure communications and <code>X509Cert</code>. </p></section><section class="print-page" id="integrating"><p>There are two primary aspects that need to be considered when integrating <code>HttpCommand</code> into your application.</p>
<ul>
<li>Are there other components in your application that also use Conga?</li>
<li>How will your application be deployed? </li>
</ul>
<h3 id="integrating-use-of-conga">Use of Conga</h3>
<p>If your application has other components that also use Conga, it's advisable that each component have its own Conga "root" created by <code>Conga.Init</code>. This requires the <code>Conga</code> namespace from the <code>conga</code> workspace. The recommended setup is:</p>
<ul>
<li>Copy the <code>Conga</code> namespace into your workspace. For this example, we will assume you've copied <code>Conga</code> into the root (<code>#</code>) namespace.</li>
<li>Explicitly point <code>HttpCommand</code> at this <code>Conga</code> namespace by setting <code>HttpCommand.CongaRef←#.Conga</code> (or wherever you've copied <code>Conga</code>).</li>
<li>All other Conga-using components should be similarly pointed at this <code>Conga</code> namespace.</li>
</ul>
<p>When <code>HttpCommand</code> is initialized it will create a root named <code>'HttpCommand'</code> when <code>Conga.Init</code> is called. Your other components will create their own Conga roots when they also call <code>Conga.Init</code>. This will ensure that the Conga shared libraries are loaded only once.</p>
<h3 id="integrating-deployment">Deployment</h3>
<p>In addition to the presence of other Conga-using components in your application, you need to consider how your application is deployed.  </p>
<h4 id="integrating-dyalog-installation-folder-is-available">Dyalog Installation Folder is Available</h4>
<p>If the Dyalog installation folder is available, and there are no other components that use Conga, you can use <code>HttpCommand</code> without any additional configuration. <code>HttpCommand</code> will copy the <code>Conga</code> namespace from the <code>conga</code> workspace in the Dyalog installation and find the shared libraries in the Dyalog APL installation folder.</p>
<h4 id="integrating-dyalog-installation-folder-is-not-available">Dyalog Installation Folder is Not Available</h4>
<p>If the Dyalog installation folder is not available, for instance in the case of a runtime application, or a bound or stand-alone executable, then you will need to have a copy of the <code>Conga</code> namespace in your workspace and either put the Conga shared libraries in the same folder as your executuable or set <code>CongaPath</code> to the location of the shared libraries. </p></section><h1 class='nav-section-title-end'>Ended: Advanced Topics</h1>
                        <h1 class='nav-section-title' id='section-about'>
                            About <a class='headerlink' href='#section-about' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="license"><p>MIT License</p>
<p>Copyright (c) 2021 Dyalog</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.</p></section><section class="print-page" id="release-notes"><h2 id="release-notes-version-50">Version 5.0</h2>
<ul>
<li>The major version bump from 4 to 5 was due to:<ul>
<li>swapping the meaning for the <code>Timeout</code> and <code>WaitTime</code> settings. Previously <code>Timeout</code> was used to indicate how long Conga's <code>Wait</code> function would wait for a response and <code>WaitTime</code> was how long <code>HttpCommand</code> would wait for a complete response before timing out.</li>
<li>return codes and messages were normalized </li>
</ul>
</li>
<li>Added new <code>Auth</code> and <code>AuthType</code> settings to more easily support token-based authentication.</li>
<li>Removed half-implemented support for streaming</li>
<li>Added <code>GetHeader</code> function to result namespace</li>
<li>More complete setting checking</li>
<li>Better handling of relative redirections</li>
<li>New documentation</li>
</ul></section><h1 class='nav-section-title-end'>Ended: About</h1></div>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2015-2022 <strong><a href="https://dyalog.com">Dyalog, LTD</a></strong>
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "/", "features": ["navigation.sections", "navigation.instant"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.bd0b6b67.min.js"}</script>
    
    
      <script src="../assets/javascripts/bundle.8aa65030.min.js"></script>
      
        <script src="../js/print-site.js"></script>
      
    
  </body>
</html>